(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(e,t,a){e.exports=a.p+"static/media/fan-portal-icon03.e23c63f9.png"},146:function(e,t,a){},243:function(e,t,a){e.exports=a.p+"static/media/grey-circle.ac5d549e.png"},253:function(e,t,a){e.exports=a.p+"static/media/sidebar-3.34535b95.jpg"},255:function(e,t,a){e.exports=a(527)},402:function(e,t,a){},405:function(e,t){},407:function(e,t){},439:function(e,t){},440:function(e,t){},49:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAG2YAABzjgAA+swAAIT6AAB5gQAA/RMAADBtAAASKQ0eJk4AAAMAUExURevr7Jydn5manJucnuPj5JiZm9vb3PT09MvLzMLCw5GSlPr6+qeoqdXV1tHR0rW1trW2uKusrbi4urO0tLq6vKiqq7e4uLW2tqGipLm6ury8vr6+vr+/wLu8vM7OztDQ0cjJytjY2dTU1aipqqqrrMXGxqanqKmqq6Wmp9LT062usKSlprS0ta2trra2t6ytrqWmqK2ur66vsK6ur7CwsbOztK+vsK+wsbKys7GxsqOkpqOkpZ6foampq6qqrJ2eoKenqaysraKjpZqbnbi4uaKjpKSlp5eYmqioqqurrKChory8vKGio6amqKCho7Gys7CxsrGysrKzs5+gop+gobS1tbq6u7e3uLCxsbKztLi4uJWWmJaXmba3t7i5ub29vZWXmZSWmLq6upOVl5SVl7m5up6foLq7u7u7vJqcnZOUlpeZm5aYmpKUlry8vZKTlpGTlZCRlJCRk6ytr9bX197e3q+vsb2+v8DAweDh4bOztebm5ujp6e/v756eoP///4CAgIGBgYKCgoODg4SEhIWFhYaGhoeHh4iIiImJiYqKiouLi4yMjI2NjY6Ojo+Pj5CQkJGRkZKSkpOTk5SUlJWVlZaWlpeXl5iYmJmZmZqampubm5ycnJ2dnZ6enp+fn6CgoKGhoaKioqOjo6SkpKWlpaampqenp6ioqKmpqaqqqqurq6ysrK2tra6urq+vr7CwsLGxsbKysrOzs7S0tLW1tba2tre3t7i4uLm5ubq6uru7u7y8vL29vb6+vr+/v8DAwMHBwcLCwsPDw8TExMXFxcbGxsfHx8jIyMnJycrKysvLy8zMzM3Nzc7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NXV1dbW1tfX19jY2NnZ2dra2tvb29zc3N3d3d7e3t/f3+Dg4OHh4eLi4uPj4+Tk5OXl5ebm5ufn5+jo6Onp6erq6uvr6+zs7O3t7e7u7u/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/j4+Pn5+fr6+vv7+/z8/P39/f7+/v///zfARREAAAeqSURBVHja7N3xVxJZFMBxQAQVilzPSTslBxcDdwdtBQRBDQUFBYNMDTcoNLAMM7QD23JozvvX94cJZBhQZ+bdO2/26F/Q59wv8K48JwP5n/wY7iH3kHvIPYT6D89bLBazfiF8Y+T09PT09MOHzc3Nd+8yeoTwb99+/PjkSbfj8eN83qYPSCOTOTs7O3veEP69UkcegEIdMpPJCI6zz5/f9p9HPp9//97KMsTwLZO5o2Nh4RmrkHrpmxzHwsICzyLEWSq1IXd1TE6aWYNYSqVSqSRzHpOTDsdDliC2ksBQ4HA4zOxA6iURRJ7DccizAbE9fVpyNXhlXTkcjsNDHxMQKyGEWBV35Tg89Pl8rKTVUtHVoc/n89mYgPBK3686Dt8EIcQwMzOjKUTF+1XHMbG0tLT095s3y8vL77WCqHq/Ehy+Lsdybm9aC4irRKGrLkcut7cXiUTQIS1588jfPo/cXiQSibxGhtTpdyU4kCElyq/zXMdx9AwT0qI+j1zbEQwiQmyUX+fXXR0Fg0EXGsQK1dXRUTAYDIbRIJBdBYNhNIgFsqtgOBx2IkFguwqHQyEcSAu2q3AICwLcVSjEh1oYEPCuQgbix4A4obsK+QmPAwHtKhTy+3+gvEacsF2F/H5/wIAIAevK7/cHAhgQgPNuzzwCgcAiFgSoK3/bgQWhuUdJuwosYkGgu1pcnDdgQCju5wPmMY8CAeyqPY/5+To8BKErPAjY50fb8QIHAnIu6Z7HCxwI0Lmk24ECge8KB4LQ1YuNDYS3X4SuNjbGESAIXW2M40DAuxofH0c4ayF0hQNB6AoJAt8VDgShq/GdHQwIYFfteezMIkCgzrsiBwZkhPp+LulqFgXyB/X9XDoPFEgTviscCE99P+/+/PjlwIAQ6vu5dB4vX2JAALvaaTu8OBCoc0m7q5deHAjYuaQzD68fAwJ3Luk4vC4MyAh4V17vAwxIE7orr9fLY0AIdFde7xpBg8B09cuBCAHtyrvmxoLAdrXm/h0DUgfvas3tdvPQEBdCV2632+3eHgWFwL9ftR12+yYg5CfIfi7pyu3ettvtdkAI2B4lnYfdbndBQiD28wGO9XUwiAFmP5e8zu0CxGOFgrgQu1pf93hcUJA84HlX/DoXIDkoCNB+3r8rj8fjgYIA7ef9u4KGoHXl8XheAUKAzyXdXXlezcFBwM8lXV29moODoHY1BwfB7QoSgtoVIARuj+rXFTAEtCvxPJKPoCBm1K6SyZ9gx3jorrodc0kObh/B7CrJzQJCELviZA1EJsQAtp9LuwKFENA9SjwPbhoSYgbbzwVGl0PeQGT/gg5sP+/tipuFhRCkruQORD5kFPa8qzAsJb/Ehj3v/uqKM8NDSANmPxd11cD5fgS8K5Q/3yOE2L7l9vYWALpKPuI4jsP7M3DhB+JcovyBbmoeJ0K/K45oASG0u0py09pAND7v0oM0qe7nSU4zCKG7R2kJofw5yGsFcVLcz1UOROXztah2pSWE6vkqatUO0qS2n3McFyXaQYiP2h6l0qH6qYCU9nMuGmUBon6P4qLRh9pCrJS6UjsQ9Q+cXKKwR3HRaPQfrSGESlfRFaI5pK7284OKg8aDiyl0tcIEpKV4j6LooPIoaYParlZ4NiBE2X5+7fiXMAIh6rpaIcxAeDVdUXHQem78A/n7ecfRYAlCphXsURTnQfG/JJC/RwkO9iCy9yjBEWcNoqyrlTiTEPldxZmEKOgqHt9iDyL782MlHo9vsQeRtZ9fO5iDyNyjOg72IIq62tqaYg0ib4+6drAJkd3VFJMQBV1NTe2yC5HTFZOQO+9R3fPYZQ4iu6spwcEq5PY9StTV7m6WLYjtVFlXu9nsCDMQi9+ruKtsNptOp9N/WTWHmJ/I2s8l88im0+n0/v7+Qc6mHcSiZI8a4Dg4OFhdVXGnRjHks9I9StpVx7G6uvrpU8yJCHmudD+/cR6CIxaLxR5gQJT/3ufOjljMaDQ6ASHN18q+P5fRVcdhNBqNQ9tWAEhL+ffnCuZhNBqNQ0NDQ0N+qpCmyu85lTu+fEkkEnYLDcio6u/PFXbVcSQSiYTJ5FQFeU7le0518xAcJpPJNKMMUqL0/Tk1h2l4eHh4RB6kPkHlHvKA827HsS/bMXx+nvqtdUcItfvt9OcxfH6eSqVSqa8/boU06d2/AnR8LRaLN0Pq9O6339aVckfqa7FYLB7fBKF0DxlhHsXj42PjQEgIqqspCEehUBgA8dG5347S1fFxoVAo2PpCWrrqqlAoFE5OWn0gBr11VTg5Oan0gdC63w45j1Svo2KVQujdQ8bq6qRSqVQkkAlq95DxuqpUKmUJhNb9dsyuKpVyeVQC0WNX5XK52gOx6LKrcrlabYghE5Tut+N2VS5Xq3YxhNo9ZNyuqtXqhQhipXS/HburavVCDKkzvUcN7qp60QPZ1GtXFxc1EYTV/fwaMmgetV4Iu/v5jV3VarW6CML2fj64q1qt9mc3hPX9fPA8ape9ED3sUX3mcXl5KYboY4/q5xgTQdjfz/t31QvRb1djYz0QvXYlhbC/n/ftqgeinz1KMo8eiG72KKlDBNHPHtXbVT+ILrsaG7vqgei0q6ur770QfXZ19V2A/DcAHpmC7NcZ4/wAAAAASUVORK5CYII="},512:function(e,t,a){},513:function(e,t,a){},514:function(e,t,a){},515:function(e,t,a){},526:function(e,t,a){},527:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a.n(r),o=a(29),i=a.n(o),l=a(81),c=a(73),m=a(59),d=a(235),u=a(236),p=a(2),E=a(7),f=a.n(E),h=a(18),g=a(20),S=a.n(g),v=a(10),I=a(11),b=a(13),P=a(12),O=a(14),D=a(531),N=a(532),C=a(245),_=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card"+(this.props.plain?" card-plain":"")},s.a.createElement("div",{className:"header"+(this.props.hCenter?" text-center":"")},s.a.createElement("h4",{className:"title"},this.props.title),s.a.createElement("p",{className:"category"},this.props.category)),s.a.createElement("div",{className:"content"+(this.props.ctAllIcons?" all-icons":"")+(this.props.ctTableFullWidth?" table-full-width":"")+(this.props.ctTableResponsive?" table-responsive":"")+(this.props.ctTableUpgrade?" table-upgrade":"")+(this.props.customClass?" ".concat(this.props.customClass):"")},this.props.content,s.a.createElement("div",{className:this.props.marginBeforeFooter?"footer mt-before-footer":"footer"},s.a.createElement("div",{className:"width-100"},s.a.createElement("span",null,this.props.legend),this.props.detailsButtonText?s.a.createElement("span",{className:"stats float-right"},s.a.createElement("a",{href:"#",className:"float-right",onClick:this.props.detailsButtonCallback},"".concat(this.props.detailsButtonText," >>"))):""),null!=this.props.stats?s.a.createElement("hr",null):"")))}}]),t}(r.Component),R=_,A=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"card card-stats"},s.a.createElement("div",{className:"content"},s.a.createElement(D.a,null,s.a.createElement(N.a,{xs:3},s.a.createElement("div",{className:"icon-big text-left icon-warning"},this.props.bigIcon)),s.a.createElement(N.a,{xs:9},s.a.createElement("div",{className:"numbers"},s.a.createElement("p",null,this.props.statsText),this.props.statsValue)),s.a.createElement(N.a,{className:"float-right text-right",xs:9},s.a.createElement("div",null,s.a.createElement("h6",null,this.props.statsExtra)))),s.a.createElement("div",{className:"footer"},s.a.createElement("hr",null),s.a.createElement("div",{className:"stats"},this.props.statsIcon," ",this.props.statsIconText))))}}]),t}(r.Component),y=a(15),T=a(533),U=a(548),L=a(45),w=a(64),M=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).state={is_checked:!!e.isChecked},a.handleClick=a.handleClick.bind(Object(w.a)(a)),a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"handleClick",value:function(){this.setState({is_checked:!this.state.is_checked})}},{key:"render",value:function(){var e=this.props,t=(e.isChecked,e.number),a=e.label,n=e.inline,r=Object(L.a)(e,["isChecked","number","label","inline"]),o=void 0!==n?"checkbox checkbox-inline":"checkbox";return s.a.createElement("div",{className:o},s.a.createElement("input",Object.assign({id:t,type:"checkbox",onChange:this.handleClick,checked:this.state.is_checked},r)),s.a.createElement("label",{htmlFor:t},a))}}]),t}(r.Component),F=a(82),x=a(6),j=a.n(x),G=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props,t=e.fill,a=e.simple,n=e.pullRight,r=e.round,o=e.block,i=Object(L.a)(e,["fill","simple","pullRight","round","block"]),l=j()({"btn-fill":t,"btn-simple":a,"pull-right":n,"btn-block":o,"btn-round":r});return s.a.createElement(F.a,Object.assign({className:l},i))}}]),t}(r.Component),B=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).handleCheckbox=function(e){var t=e.target;a.setState(Object(y.a)({},t.name,t.checked))},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){for(var e,t=s.a.createElement(T.a,{id:"edit_tooltip"},"Edit Task"),a=s.a.createElement(T.a,{id:"remove_tooltip"},"Remove"),n=['Sign contract for "What are conference organizers afraid of?"',"Lines From Great Russian Literature? Or E-mails From My Boss?","Flooded: One year later, assessing what was lost and what was found when a ravaging rain swept through metro Detroi","Create 4 Invisible User Experiences you Never Knew About",'Read "Following makes Medium better"'],r=[],o=0;o<n.length;o++)e="checkbox"+o,r.push(s.a.createElement("tr",{key:o},s.a.createElement("td",null,s.a.createElement(M,{number:e,isChecked:1===o||2===o})),s.a.createElement("td",null,n[o]),s.a.createElement("td",{className:"td-actions text-right"},s.a.createElement(U.a,{placement:"top",overlay:t},s.a.createElement(G,{bsStyle:"info",simple:!0,type:"button",bsSize:"xs"},s.a.createElement("i",{className:"fa fa-edit"}))),s.a.createElement(U.a,{placement:"top",overlay:a},s.a.createElement(G,{bsStyle:"danger",simple:!0,type:"button",bsSize:"xs"},s.a.createElement("i",{className:"fa fa-times"}))))));return s.a.createElement("tbody",null,r)}}]),t}(r.Component),k=a(49),z=a.n(k),H=a(243),W=a.n(H),V=a(84),Y=a(47),q=a.n(Y),K=a(4);!function(e){e.GET_ALL_USER_PROFILES="GET_ALL_USER_PROFILES",e.GET_ALL_USER_PROFILES_SUCCESS="GET_ALL_USER_PROFILES_SUCCESS",e.GET_ALL_USER_PROFILES_FAILED="GET_ALL_USER_PROFILES_FAILED",e.UPDATE_USER_PROFILES="UPDATE_USER_PROFILES",e.UPDATE_USER_PROFILES_SUCCESS="UPDATE_USER_PROFILES_SUCCESS",e.UPDATE_USER_PROFILES_FAILED="UPDATE_USER_PROFILES_FAILED",e.UPDATE_PASSWORD="UPDATE_PASSWORD",e.UPDATE_PASSWORD_SUCCESS="UPDATE_PASSWORD_SUCCESS",e.UPDATE_PASSWORD_FAILED="UPDATE_PASSWORD_FAILED",e.CLEAR_USER_PROFILES="CLEAR_USER_PROFILES"}(n||(n={}));var X,Q=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:J(a),Is.UserProfile().GetUsers(e).then(function(e){Z(a,e.data)}).catch(function(e){$(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},J=function(e){e({type:n.GET_ALL_USER_PROFILES})},Z=function(e,t){0===t.length&&K.b.warn("No Data found",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:n.GET_ALL_USER_PROFILES_SUCCESS,payload:t})},$=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:n.GET_ALL_USER_PROFILES_FAILED})},ee=function(e){e({type:n.UPDATE_USER_PROFILES})},te=function(e,t){e({type:n.UPDATE_USER_PROFILES_SUCCESS,payload:t})},ae=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:n.UPDATE_USER_PROFILES_FAILED})},ne=function(e){e({type:n.UPDATE_PASSWORD})},re=function(e,t){ds(t.statusCode,t.message),e({type:n.UPDATE_PASSWORD_SUCCESS,payload:t})},se=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:n.UPDATE_PASSWORD_FAILED})};!function(e){e.GET_MAINTAINANCE_REPORT="GET_MAINTAINANCE_REPORT",e.GET_MAINTAINANCE_REPORT_SUCCESS="GET_MAINTAINANCE_REPORT_SUCCESS",e.GET_MAINTAINANCE_REPORT_FAILED="GET_MAINTAINANCE_REPORT_FAILED",e.DASHBOARD_GET_ALARMS_REPORT="DASHBOARD_GET_ALARMS_REPORT",e.DASHBOARD_GET_ALARMS_REPORT_SUCCESS="DASHBOARD_GET_ALARMS_REPORT_SUCCESS",e.DASHBOARD_GET_ALARMS_REPORT_FAILED="DASHBOARD_GET_ALARMS_REPORT_FAILED",e.GET_USAGE_REPORT="GET_USAGE_REPORT",e.GET_USAGE_REPORT_SUCCESS="GET_USAGE_REPORT_SUCCESS",e.GET_USAGE_REPORT_FAILED="GET_USAGE_REPORT_FAILED",e.GET_STATS="GET_STATS",e.GET_STATS_SUCCESS="GET_STATS_SUCCESS",e.GET_STATS_FAILED="GET_STATS_FAILED"}(X||(X={}));var oe,ie=function(e){e({type:X.GET_MAINTAINANCE_REPORT})},le=function(e,t){e({type:X.GET_MAINTAINANCE_REPORT_SUCCESS,payload:t})},ce=function(e){e({type:X.GET_MAINTAINANCE_REPORT_FAILED})},me=function(e){e({type:X.DASHBOARD_GET_ALARMS_REPORT})},de=function(e,t){e({type:X.DASHBOARD_GET_ALARMS_REPORT_SUCCESS,payload:t})},ue=function(e){e({type:X.DASHBOARD_GET_ALARMS_REPORT_FAILED})},pe=function(e){e({type:X.GET_USAGE_REPORT})},Ee=function(e,t){e({type:X.GET_USAGE_REPORT_SUCCESS,payload:t})},fe=function(e){e({type:X.GET_USAGE_REPORT_FAILED})},he=function(e){e({type:X.GET_STATS})},ge=function(e,t){e({type:X.GET_STATS_SUCCESS,payload:t})},Se=function(e){e({type:X.GET_STATS_FAILED})},ve=a(19),Ie=a(16),be=a.n(Ie),Pe=a(112),Oe=a.n(Pe),De="alarmReportData",Ne="maintenanceReportData",Ce="inverterData",_e="energyConsumptionReportData",Re="usageReport",Ae="/admin/notPermitted",ye=30,Te=30,Ue=30,Le=415,we=220,Me="http://dt.xavor.com:88/view/twin",Fe=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).option1=function(){return s.a.createElement("div",{className:"card card-user"},s.a.createElement("div",{className:"header"+(a.props.hCenter?" text-center":"")},s.a.createElement("h4",{className:"title"},a.props.title),s.a.createElement("p",{className:"category"},a.props.category)),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"user-body"},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,xs:4},s.a.createElement("img",{className:"view-profile-img",src:a.props.avatar,alt:"..."})),s.a.createElement(N.a,{md:9,xs:8},s.a.createElement("h4",{className:"title"},a.props.fullName,s.a.createElement("br",null),s.a.createElement("small",null,a.props.email)),s.a.createElement("div",null,s.a.createElement("small",null,"Last Login: ",a.props.lastLogin," ",a.props.description))))),s.a.createElement("hr",null),s.a.createElement("p",{className:"description user-profile-footer text-center"},s.a.createElement(D.a,{id:"user-info-modal-body-db"},s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Customer")),s.a.createElement("div",null,s.a.createElement("small",null,a.props.attributes.customerId))),s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Type ")),s.a.createElement("div",null,s.a.createElement("small",null,a.props.attributes.userPermission.personaName))),s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Role ")),s.a.createElement("div",null,s.a.createElement("small",null,a.props.attributes.userPermission.roleName)))))))},a.option2=function(){return s.a.createElement("div",{className:"card card-user"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"user-body-2"},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:4},s.a.createElement("img",{className:"view-profile-img",src:a.props.avatar,alt:"..."}),s.a.createElement("div",{class:"vertical-line"})),s.a.createElement(N.a,{md:8},s.a.createElement("h4",{className:"title"},s.a.createElement("div",null,a.props.fullName)),s.a.createElement("div",{className:"description"},s.a.createElement("small",null,s.a.createElement("i",{className:"fa fa-envelope mr-5"}),a.props.email)),s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement("i",{className:"fa fa-circle text-success mr-5"}),"Last Login: ",a.props.lastLogin," ")),s.a.createElement("hr",null),s.a.createElement(N.a,{md:6,id:"user-info-modal-body-db-small-headings"},s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"})," ",s.a.createElement("strong",null,"Customer")),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"}),"  ",s.a.createElement("strong",null,"Customer Type")),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"}),"  ",s.a.createElement("strong",null,"Role"))),s.a.createElement(N.a,{md:6,id:"user-info-modal-body-db-small-body"},s.a.createElement("div",null,a.props.attributes.customerId),s.a.createElement("div",null,a.props.attributes.userPermission.personaName),s.a.createElement("div",null,a.props.attributes.userPermission.roleName)))))))},a.option3=function(){return s.a.createElement("div",{className:"card card-user"},s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"user-body-3"},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:2},s.a.createElement("img",{className:"view-profile-img-small",src:a.props.avatar,alt:"..."}),s.a.createElement("div",{class:"vertical-line"})),s.a.createElement(N.a,{md:10},s.a.createElement("h4",{className:"title"},s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement("i",{className:"fa fa-circle text-success mr-5"})),a.props.fullName)),s.a.createElement("div",{className:"description"},s.a.createElement("small",null,a.props.email)),s.a.createElement("div",null,s.a.createElement("small",null,s.a.createElement("i",{className:"fa fa-circle text-success mr-5"}),"Last Login: ",a.props.lastLogin," ")),s.a.createElement("hr",null),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:6,id:"user-info-modal-body-db-small-headings"},s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"})," ",s.a.createElement("strong",null,"Customer")),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"}),"  ",s.a.createElement("strong",null,"Customer Type")),s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-angle-double-right mr-5"}),"  ",s.a.createElement("strong",null,"Role"))),s.a.createElement(N.a,{md:6,id:"user-info-modal-body-db-small-body"},s.a.createElement("div",null,a.props.attributes.customerId),s.a.createElement("div",null,a.props.attributes.userPermission.personaName),s.a.createElement("div",null,a.props.attributes.userPermission.roleName))))))))},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"dashboard-user-profile-card"},this.option1())}}]),t}(r.Component),xe=(a(184),a(353),20),je=6,Ge=function(e){for(var t=[],a=0;a<e.names.length;a++){var n=e.types[a];t.push(s.a.createElement("i",{className:"fa fa-circle",style:{color:n}})),t.push(" "),t.push(s.a.createElement("span",{style:{color:"rgb(55, 61, 63)",fontSize:"12px",fontWeight:"400"}},e.names[a]))}return t},Be=function(e){return{series:[{name:"Usage Hours per Day",type:"area",data:e&&e.series&&e.series.length?e.series[0]:[]}],options:{width:"100%",height:350,chart:{width:"500px",height:350,type:"line",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:!1,zoomin:!0,zoomout:!0,pan:!1,reset:1,customIcons:[]}}},dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},plotOptions:{bar:{horizontal:!1}},tooltip:{enabled:!1},fill:{type:"solid",opacity:[.35,1]},dataLabels:{enabled:!0},stroke:{curve:"smooth",lineCap:"round",width:2},markers:{size:1},yaxis:[{title:{text:"Running Hours"}}],xaxis:{type:"date",categories:e&&e.labels&&e.labels.length?e.labels:[],title:{text:"Timeline",offsetY:-2}},legend:{position:"right",verticalAlign:"top",containerMargin:{left:35,right:60}},noData:{text:"No Data Available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[{breakpoint:Le,height:500,options:{plotOptions:{bar:{horizontal:!0},chart:{width:"100%",height:500,type:"line"}},legend:{position:"bottom"}}}]}}},ke=function(e){var t=e&&e.length?e:[],a=t.map(function(e){return be()(e.timestamp).format("L")}),n=t.map(function(e){var t=be()(e.timestamp).format("L");return{time:be()(e.timestamp).format("LT"),type:e.type,date:t}});return{series:[{name:"Alarms",data:(a=us(a,a,function(e,t){return e===t})).map(function(e){return n.filter(function(t){return t.date==e&&"Alarm"==t.type}).length})},{name:"Warnings",data:a.map(function(e){return n.filter(function(t){return t.date==e&&"Warning"==t.type}).length})}],options:{chart:{width:"500px",height:350,type:"line",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:!1,zoomin:!0,zoomout:!0,pan:!1,reset:1,customIcons:[]}}},colors:["#ff6633","#FFCC00"],dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},dataLabels:{enabled:!0},stroke:{curve:"smooth",lineCap:"round",width:2},markers:{size:1},yaxis:[{title:{text:"Frequency of Alarms & Warnings"}}],xaxis:{type:"datetime",categories:a,title:{text:"Timeline",offsetY:10}},tooltip:{x:{format:"dd MMM yyyy"}},legend:{position:"bottom",horizontalAlign:"left"},noData:{text:"No Data Available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[{breakpoint:Le,height:500,options:{plotOptions:{bar:{horizontal:!0},chart:{width:"275px",height:500,type:"line"}},legend:{position:"bottom"}}}]}}},ze=function(e,t){var a=e.map(function(e){if(""!=e.expectedMaintenanceDate)return be()(e.expectedMaintenanceDate).format("L")}),n=e.map(function(e){if(""!=e.lastMaintenanceDate)return be()(e.lastMaintenanceDate).format("L")}),r=us(a,n,function(e,t){return e===t}),s=t.map(function(e){if(""!=e.expectedMaintenanceDate)return be()(e.expectedMaintenanceDate).format("L")}),o=t.map(function(e){if(""!=e.lastMaintenanceDate)return be()(e.lastMaintenanceDate).format("L")}),i=us(s,o,function(e,t){return e===t}),l=us(r,i,function(e,t){return e===t}).filter(function(e){return null!=e});return{series:[{name:"Maintained",data:l.map(function(t){return e.filter(function(e){return be()(e.lastMaintenanceDate).format("L")===t}).length})},{name:"Pending",data:l.map(function(e){return t.filter(function(t){return be()(t.expectedMaintenanceDate).format("L")===e}).length})}],options:{chart:{type:"bar",height:430,toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:!1,zoomin:!0,zoomout:!0,pan:!1,reset:1,customIcons:[]}}},plotOptions:{bar:{horizontal:!1,maxItems:8,columnWidth:"20%"}},colors:["#5cb85c","#ff6347"],dataLabels:{enabled:!1,offsetX:-6,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:2},xaxis:{categories:l,type:"datetime",title:{text:"Timeline",offsetY:10}},yaxis:{labels:{formatter:function(e){return Number(e).toFixed(0)}},title:{text:"No of Devices"}},legend:{position:"bottom",horizontalAlign:"left",onItemHover:{highlightDataSeries:!0},markers:{radius:12}},tooltip:{x:{format:"dd MMM yyyy"}},noData:{text:"No Data Available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[{breakpoint:Le,height:500,options:{plotOptions:{bar:{horizontal:!1},chart:{width:"275px",height:500,type:"bar"}},legend:{position:"bottom"}}}]}}},He=function(e,t){e.myDevices;var a=e.configuredDevices,n=e.offlineDevices,r=e.onlineDevices,s=(e.firmware,e.unConfiguredDevices),o=t.maintainedDevices,i=t.pendingMaintainanceDevices;o=o.length;var l=[i=i.length,o],c=[a,s],m=[n,r];return{data1:{labels:["Configured","Unconfigured"],series:c,colors:["#7AC142","#6CA0DC"],chart:{width:128,type:"pie",offsetX:0},legend:{position:"bottom",horizontalAlign:"center",fontSize:"12px",onItemHover:{highlightDataSeries:!0},markers:{radius:12},width:220},dataLabels:{enabled:!0,formatter:function(e,t){return c[t.seriesIndex]}},responsive:[{breakpoint:Le,options:{chart:{offsetX:50}},legend:{position:"bottom"}}]},data2:{labels:["Offline","Online"],series:m,colors:["#FF6961","#77DD77"],chart:{width:128,type:"pie",offsetX:0},legend:{position:"bottom",horizontalAlign:"center",fontSize:"12px",onItemHover:{highlightDataSeries:!0},markers:{radius:12}},dataLabels:{enabled:!0,formatter:function(e,t){return m[t.seriesIndex]}},responsive:[{breakpoint:Le,options:{chart:{offsetX:50}},legend:{position:"bottom"}}]},data3:{labels:["Pending","Maintained"],series:l,colors:["#47B39C","#FFC154"],chart:{width:128,type:"pie",offsetX:100},legend:{position:"bottom",horizontalAlign:"center",fontSize:"12px",onItemHover:{highlightDataSeries:!0},markers:{radius:12}},dataLabels:{enabled:!0,formatter:function(e,t){return l[t.seriesIndex]}},responsive:[{breakpoint:Le,options:{chart:{offsetX:50}},legend:{position:"bottom"}}]}}},We=function(e){var t=e.map(function(e){if(""!=e.expectedMaintenanceDate)return be()(e.expectedMaintenanceDate).format("L")}),a=e.map(function(e){if(""!=e.lastMaintenanceDate)return be()(e.lastMaintenanceDate).format("L")}),n=us(t,a,function(e,t){return e===t}).filter(function(e){return null!=e});return{series:[{name:"Maintained",data:n.map(function(t){return e.filter(function(e){return be()(e.lastMaintenanceDate).format("L")===t}).length})},{name:"Pending",data:n.map(function(t){return e.filter(function(e){return be()(e.expectedMaintenanceDate).format("L")===t}).length})}],options:{chart:{type:"bar",height:430,toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!1,selection:!1,zoom:!1,zoomin:!0,zoomout:!0,pan:!1,reset:1,customIcons:[]}}},plotOptions:{bar:{horizontal:!1,maxItems:8,columnWidth:"20%"}},colors:["#5cb85c","#ff6347"],dataLabels:{enabled:!1,offsetX:-6,style:{fontSize:"12px",colors:["#fff"]}},stroke:{show:!0,width:2},xaxis:{categories:n,type:"datetime",title:{text:"Timeline",offsetY:10}},yaxis:{labels:{formatter:function(e){return Number(e).toFixed(0)}},title:{text:"No of Devices"}},legend:{position:"bottom",horizontalAlign:"left",onItemHover:{highlightDataSeries:!0},markers:{radius:12}},tooltip:{x:{format:"dd MMM yyyy"}},noData:{text:"No Data Available",align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[{breakpoint:Le,height:500,options:{plotOptions:{bar:{horizontal:!1},chart:{width:"275px",height:500,type:"bar"}},legend:{position:"bottom"}}}]}}},Ve=a(48),Ye=a.n(Ve),qe=a(116),Ke=a.n(qe),Xe=a(244),Qe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).getAvgHours=function(e){var t=0;if(e&&e.series){var a=e.series;if(0===(a=a.length?a[0]:[]).length)return 0;t=a.reduce(function(e,t){return e+t},0),(t/=a.length)&&(t=t.toFixed(1)),t=Object(Ve.isNaN)(t)?0:t}return t},a.ChartContentLoader=function(e){return s.a.createElement(Xe.a,{height:e,width:"100%"})},a.loaderInsideCard=function(){return s.a.createElement("div",{className:"spinner"},s.a.createElement(Oe.a,{type:"ThreeDots",color:"#30B99B",height:30,width:30}))},a.componentWillMount=function(){a.props.getStats(a.props.currentCustomerId,a.props.currentUserId);var e={customerId:a.props.currentCustomerId,deviceId:null,batchId:null,date:null};a.props.getUsageReport({customerId:a.props.currentCustomerId,userId:a.props.currentUserId}),a.props.getAlarmAndWarningReport(e);var t=new Date,n=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate(),r={customerId:a.props.currentCustomerId,date:n};a.props.getMaintenanceReport(r)},a.isDifferentFromPrevious=function(e,t,a){return JSON.stringify(e[a])!==JSON.stringify(t[a])},a.getPieChartHeader=function(){return s.a.createElement("div",null,s.a.createElement("span",null))},a.NoDataPieChart=function(){return s.a.createElement("div",{className:"mb-7"},s.a.createElement("div",{className:"centered-container"},s.a.createElement("img",{className:"defaultPieChart",src:W.a,alt:"..."}),s.a.createElement("div",{className:"centered-label"},"No data")))},a.getApexPieChart=function(e){return s.a.createElement("div",null,a.updateForceLayout(),s.a.createElement(q.a,{width:we,height:we,options:e,series:e.series,type:"pie"}))},a.PieChartsSection=function(){var e=He(a.state.computedData,a.props),t=e.data1,n=e.data2,r=e.data3;return s.a.createElement("div",null,s.a.createElement(_,{title:a.getPieChartHeader(),category:"",customClass:"pie-chart-abs-height",content:s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(D.a,{id:"chartPreferences",style:{height:"auto"}},s.a.createElement(N.a,{md:6,xs:12,className:"text-center  remove-padding"},s.a.createElement("div",{className:"header"},s.a.createElement("h4",{className:"title"},"Devices Stats"),s.a.createElement("p",{className:"category"},"Total Count: ".concat(a.state.computedData.myDevices))),a.props.isGettingStats?a.loaderInsideCard():0===a.state.computedData.myDevices?s.a.createElement("span",null,a.NoDataPieChart()," ",Ge({names:t.labels,types:t.colors})):a.getApexPieChart(t)),s.a.createElement(N.a,{md:6,xs:12,className:"text-center  remove-padding"},s.a.createElement("div",{className:"header"},s.a.createElement("h4",{className:"title"},"Configured Stats"),s.a.createElement("p",{className:"category"},"Total Count: ".concat(a.state.computedData.configuredDevices))),a.props.isGettingStats?a.loaderInsideCard():0===a.state.computedData.configuredDevices?s.a.createElement("span",null,a.NoDataPieChart()," ",Ge({names:n.labels,types:n.colors})):a.getApexPieChart(n))),s.a.createElement("hr",null),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:12,className:"text-center  remove-padding"},s.a.createElement("div",{className:"header"},s.a.createElement("h4",{className:"title"},"Maintenance Stats"),s.a.createElement("p",{className:"category"},"Total Count: ".concat(a.props.maintainedDevices.length+a.props.pendingMaintainanceDevices.length))),a.props.isGettingMaintenanceReport?a.loaderInsideCard():a.props.maintainedDevices.length+a.props.pendingMaintainanceDevices.length===0?s.a.createElement("span",null,a.NoDataPieChart()," ",Ge({names:r.labels,types:r.colors})):a.getApexPieChart(r)))))}))},a.AlarmWarningSection=function(){var e=a.props.alarmsWarningData?a.props.alarmsWarningData:[];return s.a.createElement("div",null," ",s.a.createElement(V.SizeMe,null,function(t){return s.a.createElement(_,{id:"chartHours",title:"Device Alarms & Warnings (".concat(a.props.alarmsWarningData.length,")"),category:"All Data",detailsButtonText:"View Detail",detailsButtonCallback:function(){a.props.history.push("/admin/alarmAndWarningReport")},customClass:"custom-card-leftMargin",content:a.props.isGettingAlarmsReport?a.ChartContentLoader(a.isMobileScreen(t)?"200px":"360px"):s.a.createElement("div",null,a.updateForceLayout(),s.a.createElement(q.a,{options:ke(e).options,series:ke(e).series}))})}))},a.UserProfileSection=function(){return s.a.createElement(Fe,{title:"Profile Info",avatar:null===a.props.userInfo.profileImage||""===a.props.userInfo.profileImage?z.a:"data:image/jpeg;base64,"+a.props.userInfo.profileImage,fullName:s.a.createElement("span",null,"".concat(a.props.userInfo.firstName," ").concat(a.props.userInfo.lastName)),email:a.props.userInfo.userId,lastLogin:a.props.userInfo.lastLogin,description:s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-circle text-success mr-10"}),"Online"),attributes:a.props.userInfo})},a.MaintenanceChartSection=function(){return s.a.createElement("div",null," ",s.a.createElement(V.SizeMe,null,function(e){return s.a.createElement(_,{statsIcon:"fa fa-clock-o",id:"chartHours",title:"Device Maintenance (".concat(a.props.maintainedDevices.length+a.props.pendingMaintainanceDevices.length,")"),category:"Last ".concat(ye," days performance"),detailsButtonText:"View Detail",detailsButtonCallback:function(){a.props.history.push("/admin/maintenanceReport")},customClass:"custom-card-leftMargin",content:a.props.isGettingMaintenanceReport?a.ChartContentLoader(a.isMobileScreen(e)?"200px":"360px"):s.a.createElement("div",null,a.updateForceLayout(),s.a.createElement(q.a,{options:ze(a.props.maintainedDevices,a.props.pendingMaintainanceDevices).options,series:ze(a.props.maintainedDevices,a.props.pendingMaintainanceDevices).series,type:"bar"}))})}))},a.UsageDataSection=function(){return s.a.createElement("div",null," ",s.a.createElement(V.SizeMe,null,function(e){return s.a.createElement(_,{id:"chartActivity",title:s.a.createElement("div",null,"Device Usage "),category:"Last ".concat(Te," days performance"),detailsButtonText:"View Detail",detailsButtonCallback:function(){a.props.history.push("/admin/usageReport")},customClass:"custom-card-leftMargin",content:a.props.isGettingUsageData?a.ChartContentLoader(a.isMobileScreen(e)?"200px":"360px"):s.a.createElement("div",null,a.updateForceLayout(),s.a.createElement(q.a,{options:Be(a.props.usageData).options,series:Be(a.props.usageData).series}))})}))},a.AuditLogsSection=function(){return s.a.createElement("div",{className:"hidden"},s.a.createElement(_,{title:s.a.createElement("div",{className:"to-be-done"},"Audit Logs"),category:"Commands",content:s.a.createElement("div",{className:"table-full-width"},s.a.createElement("table",{className:"table"},s.a.createElement(B,null)))}))},a.isMobileScreen=function(e){return e&&e.width&&e.width<=Le},a.getStatsSection=function(){var e=a.state.computedData,t=e.myDevices,n=(e.configuredDevices,e.offlineDevices,e.alarms,e.warnings,e.runningAvg),r=e.maintained,o=e.firmwareUpdates;return s.a.createElement(V.SizeMe,null,function(e){var i=e.size;return s.a.createElement("div",null,s.a.createElement(Ke.a,{gridRef:function(e){return a.setState({statsgrid:e})},columnWidth:a.isMobileScreen(i)?"100%":"25%",gutterWidth:xe,gutterHeight:je},s.a.createElement("div",null,s.a.createElement(A,{bigIcon:s.a.createElement("i",{className:"pe-7s-menu text-warning"}),statsText:"Total Devices",statsValue:a.props.isGettingStats?a.loaderInsideCard():t,statsIcon:s.a.createElement("i",{className:"fa fa-refresh"}),statsIconText:"All Data"})),s.a.createElement("div",null,s.a.createElement(A,{bigIcon:s.a.createElement("i",{className:"pe-7s-clock text-success"}),statsText:s.a.createElement("div",null,"Avg. Running Hours"),statsValue:a.props.isGettingUsageData?a.loaderInsideCard():n,statsIcon:s.a.createElement("i",{className:"fa fa-calendar-o"}),statsIconText:"Last ".concat(Te," days")})),s.a.createElement("div",null," ",s.a.createElement(A,{bigIcon:s.a.createElement("i",{className:"pe-7s-power text-danger"}),statsText:s.a.createElement("div",null,"To be maintained"),statsValue:a.props.isGettingStats?a.loaderInsideCard():r,statsIcon:s.a.createElement("i",{className:" fa fa-calendar-o"}),statsIconText:"Last ".concat(ye," days")})),s.a.createElement("div",null," ",s.a.createElement(A,{bigIcon:s.a.createElement("i",{className:"pe-7s-attention text-warning"}),statsText:s.a.createElement("div",null,"Firmware Updates"),statsValue:a.props.isGettingStats?a.loaderInsideCard():o,statsIcon:s.a.createElement("i",{className:"fa fa-calendar-o"}),statsIconText:"Last ".concat(Ue," days")}))),s.a.createElement("span",{className:"hidden"},(a.isMobileScreen(i),setTimeout(function(){return a.updateForceLayout()},1e3))))})},a.updateForceLayout=function(){null!=a.state.chartgrid&&a.state.chartgrid.updateLayout(),null!=a.state.infogrid&&a.state.infogrid.updateLayout(),null!=a.state.statsgrid&&a.state.statsgrid.updateLayout()},a.state={chartgrid:null,infogrid:null,statsgrid:null,devices:[],companies:[],data:{},computedData:{alarms:a.props.alarmsWarningData.filter(function(e){return"Alarm"===e.type}),warnings:a.props.alarmsWarningData.filter(function(e){return"Warning"===e.type}),configuredDevices:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.configured?a.props.dashboardDeviceStats.configured:0,unConfiguredDevices:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.unConfigured?a.props.dashboardDeviceStats.unConfigured:0,offlineDevices:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.offline?a.props.dashboardDeviceStats.offline:0,onlineDevices:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.online?a.props.dashboardDeviceStats.online:0,firmwareUpdates:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.firmware?a.props.dashboardDeviceStats.firmware:0,myDevices:a.props.dashboardDeviceStats&&a.props.dashboardDeviceStats.totalDevices?a.props.dashboardDeviceStats.totalDevices:0,runningAvg:a.getAvgHours(a.props.usageData),maintained:a.props.pendingMaintainanceDevices.length}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillReceiveProps",value:function(e){(this.isDifferentFromPrevious(e,this.props,"dashboardDeviceStats")||this.isDifferentFromPrevious(e,this.props,"pendingMaintainanceDevices")||this.isDifferentFromPrevious(e,this.props,"usageData"))&&this.setState({computedData:Object(p.a)({},this.state.computedData,{configuredDevices:e.dashboardDeviceStats&&e.dashboardDeviceStats.configured?e.dashboardDeviceStats.configured:0,unConfiguredDevices:e.dashboardDeviceStats&&e.dashboardDeviceStats.unConfigured?e.dashboardDeviceStats.unConfigured:0,offlineDevices:e.dashboardDeviceStats&&e.dashboardDeviceStats.offline?e.dashboardDeviceStats.offline:0,onlineDevices:e.dashboardDeviceStats&&e.dashboardDeviceStats.online?e.dashboardDeviceStats.online:0,firmwareUpdates:e.dashboardDeviceStats&&e.dashboardDeviceStats.firmware?e.dashboardDeviceStats.firmware:0,myDevices:e.dashboardDeviceStats&&e.dashboardDeviceStats.totalDevices?e.dashboardDeviceStats.totalDevices:0,runningAvg:this.getAvgHours(e.usageData),maintained:e.pendingMaintainanceDevices.length})})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"content dashboard-main"},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:12,className:"text-end"}," ",s.a.createElement("small",null,s.a.createElement("label",{id:"last-updated-label",className:"float-right last-updated-margin"},s.a.createElement("i",{className:"fa fa-refresh"})," ","Last Updated at ".concat(be()(new Date).format("hh:mm a")))))),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:12},this.getStatsSection())),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:7,xs:12},s.a.createElement(Ke.a,{gridRef:function(t){return e.setState({chartgrid:t})},component:"div",monitorImageLoading:!0,enableSSR:!0,columnWidth:"100%",gutterWidth:xe,gutterHeight:je},s.a.createElement("div",{key:1},this.UsageDataSection()),s.a.createElement("div",{key:2},this.AlarmWarningSection()),s.a.createElement("div",{key:3},this.MaintenanceChartSection()))),s.a.createElement(N.a,{md:5,xs:12},s.a.createElement(Ke.a,{gridRef:function(t){return e.setState({infogrid:t})},component:"div",monitorImageLoading:!0,enableSSR:!0,columnWidth:"100%",gutterWidth:xe,gutterHeight:je},s.a.createElement("div",{key:4}," ",this.UserProfileSection()),s.a.createElement("div",{key:5}," ",this.PieChartsSection()),s.a.createElement("div",{key:6},this.AuditLogsSection()))))))}}]),t}(r.Component),Je={getStats:function(e,t){return function(){var a=Object(h.a)(f.a.mark(function a(n){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:he(n),Is.Dashboard().GetStats({customerId:e,userId:t}).then(function(e){ge(n,e.data.data)}).catch(function(e){Se(n)});case 2:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},getUserProfiles:Q,getAlarmAndWarningReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:me(a),Is.Dashboard().GetAlarmAndWarningReportData(e).then(function(e){de(a,e.data.data)}).catch(function(e){ue(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getMaintenanceReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ie(a),Is.Dashboard().GetMaintenanceReport(e).then(function(e){le(a,e.data)}).catch(function(e){ce(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getUsageReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:pe(a),Is.Dashboard().UsageReport(e).then(function(e){Ee(a,e.data.data)}).catch(function(e){fe(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Ze=Object(ve.b)(function(e){return{companies:e.Company?e.Company.Companies:[],dashboardDeviceStats:e.Dashboard&&e.Dashboard.dashboardStats?e.Dashboard.dashboardStats:[],isGettingStats:!!e.Dashboard&&e.Dashboard.isGettingStats,currentCustomerId:e.User&&e.User.UserInfo.customerId?e.User.UserInfo.customerId:"",currentUserId:e.User&&e.User.UserInfo.userId?e.User.UserInfo.userId:"",isGettingCompanies:!(!e.Company||!e.Company.isGettingCompanies)&&e.Company.isGettingCompanies,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},isGettingAlarmsReport:!!e.Dashboard&&e.Dashboard.isGettingAlarmsReport,maintainedDevices:e.Dashboard&&e.Dashboard.maintenanceReport?e.Dashboard.maintenanceReport.maintainedDevices:[],pendingMaintainanceDevices:e.Dashboard&&e.Dashboard.maintenanceReport?e.Dashboard.maintenanceReport.pendingDevices:[],alarmsWarningData:e.Dashboard&&e.Dashboard.alarmsWarningData?e.Dashboard.alarmsWarningData:[],isGettingMaintenanceReport:!!e.Dashboard&&e.Dashboard.isGettingMaintenanceReport,userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null,usageData:e.Dashboard&&e.Dashboard.usageReport?e.Dashboard.usageReport:[],isGettingUsageData:e.Dashboard.isGettingUsageData}},Je)(Qe),$e=a(535),et=a(536),tt=a(546);a(61);!function(e){e.ADD_COMPANY="ADD_COMPANY",e.ADD_COMPANY_SUCCESS="ADD_COMPANY_SUCCESS",e.ADD_COMPANY_FAILED="ADD_COMPANY_FAILED",e.ADD_USER_PROFILE="ADD_USER_PROFILE",e.ADD_USER_PROFILE_SUCESS="ADD_USER_PROFILE_SUCCESS",e.ADD_USER_PROFILE_FAILED="ADD_USER_PROFILE_FAILED",e.GET_ALL_COMPANIES="GET_ALL_COMPANIES",e.GET_ALL_COMPANIES_SUCCESS="GET_ALL_COMPANIES_SUCCESS",e.GET_ALL_COMPANIES_FAILED="GET_ALL_COMPANIES_FAILED",e.UPDATE_COMPANY="UPDATE_COMPANY",e.UPDATE_COMPANY_SUCCESS="UPDATE_COMPANY_SUCCESS",e.UPDATE_COMPANY_FAILED="UPDATE_COMPANY_FAILED",e.GET_COMPANIES_LIST="GET_COMPANIES_LIST",e.GET_COMPANIES_LIST_SUCCESS="GET_COMPANIES_LIST_SUCCESS",e.GET_COMPANIES_LIST_FAILED="GET_COMPANIES_LIST_FAILED"}(oe||(oe={}));var at,nt=function(e){e({type:oe.ADD_COMPANY})},rt=function(e,t){K.b.success("Added Successfully!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:oe.ADD_COMPANY_SUCCESS,payload:t})},st=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:oe.ADD_COMPANY_FAILED})},ot=function(e){e({type:oe.ADD_USER_PROFILE})},it=function(e,t){K.b.success("Added User Successfully!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:oe.ADD_USER_PROFILE_SUCESS,payload:t})},lt=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:oe.ADD_USER_PROFILE_FAILED})},ct=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:mt(t),Is.Company().getAllCompanies().then(function(e){dt(t,e.data.data)}).catch(function(e){ut(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},mt=function(e){e({type:oe.GET_ALL_COMPANIES})},dt=function(e,t){e({type:oe.GET_ALL_COMPANIES_SUCCESS,payload:t})},ut=function(e){e({type:oe.GET_ALL_COMPANIES_FAILED})},pt=function(e,t){e({type:oe.UPDATE_COMPANY,payload:t})},Et=function(e,t){e({type:oe.UPDATE_COMPANY_SUCCESS,payload:t})},ft=function(e){e({type:oe.UPDATE_COMPANY_FAILED})},ht=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:gt(t),Is.Company().GetCustomerList().then(function(e){St(t,e.data.data)}).catch(function(e){vt(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},gt=function(e){e({type:oe.GET_ALL_COMPANIES})},St=function(e,t){e({type:oe.GET_COMPANIES_LIST_SUCCESS,payload:t})},vt=function(e){e({type:oe.GET_COMPANIES_LIST_FAILED})};!function(e){e.GET_ROLES="GET_ROLES",e.GET_ROLES_FAILED="GET_ROLES_FAILED",e.GET_ROLES_BY_PERSONA="GET_ROLES_BY_PERSONA",e.GET_ROLES_BY_PERSONA_FAILED="GET_ROLES_BY_PERSONA_FAILED",e.GET_PERSONAS="GET_PERSONAS",e.GET_PERSONAS_FAILED="GET_PERSONAS_FAILED",e.ADD_FORM_NAME="ADD_FORM_NAME",e.ADD_FORM_NAME_SUCCESS="ADD_FORM_NAME_SUCCESS",e.ADD_FORM_NAME_FAILED="ADD_FORM_NAME_FAILED",e.GET_FORMS="GET_FORMS",e.GET_FORMS_FAILED="GET_FORMS_FAILED",e.CREATE_PERSONA_PERMISSIONS="CREATE_PERSONA_PERMISSIONS",e.CREATE_PERSONA_PERMISSIONS_SUCCESS="CREATE_PERSONA_PERMISSIONS_SUCCESS",e.CREATE_PERSONA_PERMISSIONS_FAILED="CREATE_PERSONA_PERMISSIONS_FAILED",e.CREATE_ROLE_PERMISSIONS="CREATE_ROLE_PERMISSIONS",e.CREATE_ROLE_PERMISSIONS_SUCCESS="CREATE_ROLE_PERMISSIONS_SUCCESS",e.CREATE_ROLE_PERMISSIONS_FAILED="CREATE_ROLE_PERMISSIONS_FAILED",e.GET_PERSONA_PERMISSIONS="GET_PERSONA_PERMISSIONS",e.GET_PERSONA_PERMISSIONS_SUCCESS="GET_PERSONA_PERMISSIONS_SUCCESS",e.GET_PERSONA_PERMISSIONS_FAILED="GET_PERSONA_PERMISSIONS_FAILED",e.GET_ROLE_PERMISSIONS="GET_ROLE_PERMISSIONS",e.GET_ROLE_PERMISSIONS_SUCCESS="GET_ROLE_PERMISSIONS_SUCCESS",e.GET_ROLE_PERMISSIONS_FAILED="GET_ROLE_PERMISSIONS_FAILED",e.DELETE_PERSONA_PERMISSION="DELETE_PERSONA_PERMISSION",e.DELETE_PERSONA_PERMISSION_SUCCESS="DELETE_PERSONA_PERMISSION_SUCCESS",e.DELETE_PERSONA_PERMISSION_FAILED="DELETE_PERSONA_PERMISSION_FAILED",e.UPDATE_ROLE_PERMISSIONS="UPDATE_ROLE_PERMISSIONS",e.UPDATE_ROLE_PERMISSIONS_SUCCESS="UPDATE_ROLE_PERMISSIONS_SUCCESS",e.UPDATE_ROLE_PERMISSIONS_FAILED="UPDATE_ROLE_PERMISSIONS_FAILED",e.UPDATE_FORM_NAME="UPDATE_FORM_NAME",e.UPDATE_FORM_NAME_SUCCESS="UPDATE_FORM_NAME_SUCCESS",e.UPDATE_FORM_NAME_FAILED="UPDATE_FORM_NAME_FAILED",e.UPDATE_PERSONA_PERMISSIONS="UPDATE_PERSONA_PERMISSIONS",e.UPDATE_PERSONA_PERMISSIONS_SUCCESS="UPDATE_PERSONA_PERMISSIONS_SUCCESS",e.UPDATE_PERSONA_PERMISSIONS_FAILED="UPDATE_PERSONA_PERMISSIONS_FAILED",e.DELETE_FORM="DELETE_FORM",e.DELETE_FORM_SUCCESS="DELETE_FORM_SUCCESS",e.DELETE_FORM_FAILED="DELETE_FORM_FAILED",e.DELETE_ROLE_PERMISSION="DELETE_ROLE_PERMISSION",e.DELETE_ROLE_PERMISSION_SUCCESS="DELETE_ROLE_PERMISSION_SUCCESS",e.DELETE_ROLE_PERMISSION_FAILED="DELETE_ROLE_PERMISSION_FAILED"}(at||(at={}));var It=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Is.Settings().GetRolesListByPersona(e).then(function(e){Dt(a,e.data)}).catch(function(e){Nt(a)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},bt=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Is.Settings().GetRolesList().then(function(e){Pt(t,e.data)}).catch(function(e){Ot(t)});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Pt=function(e,t){e({type:at.GET_ROLES,payload:t})},Ot=function(e){e({type:at.GET_ROLES_FAILED})},Dt=function(e,t){e({type:at.GET_ROLES_BY_PERSONA,payload:t})},Nt=function(e){e({type:at.GET_ROLES_BY_PERSONA_FAILED})},Ct=function(e){e({type:at.ADD_FORM_NAME})},_t=function(e,t){K.b.success("Form Created Successfully!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.ADD_FORM_NAME_SUCCESS,payload:t})},Rt=function(e){K.b.success("Failed to Create Form!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.ADD_FORM_NAME_FAILED})},At=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Is.Settings().GetCustomerTypes().then(function(e){yt(t,e.data)}).catch(function(e){Tt(t)});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},yt=function(e,t){e({type:at.GET_PERSONAS,payload:t})},Tt=function(e){e({type:at.GET_PERSONAS_FAILED})},Ut=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Is.Settings().GetFormTypes().then(function(e){Lt(t,e.data)}).catch(function(e){wt(t)});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},Lt=function(e,t){e({type:at.GET_FORMS,payload:t})},wt=function(e){e({type:at.GET_FORMS_FAILED})},Mt=function(e){e({type:at.CREATE_PERSONA_PERMISSIONS})},Ft=function(e,t){K.b.success("New Persona Permission Added",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.CREATE_PERSONA_PERMISSIONS_SUCCESS,payload:t})},xt=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.CREATE_PERSONA_PERMISSIONS_FAILED})},jt=function(e){e({type:at.CREATE_ROLE_PERMISSIONS})},Gt=function(e,t){K.b.success("Successfullly Added Role Permission!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.CREATE_ROLE_PERMISSIONS_SUCCESS,payload:t})},Bt=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.CREATE_ROLE_PERMISSIONS_FAILED})},kt=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Wt(t),Is.Settings().GetPersonaPermissionsList().then(function(e){zt(t,e.data)}).catch(function(e){Ht(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},zt=function(e,t){e({type:at.GET_PERSONA_PERMISSIONS_SUCCESS,payload:t})},Ht=function(e){e({type:at.GET_PERSONA_PERMISSIONS_FAILED})},Wt=function(e){e({type:at.GET_PERSONA_PERMISSIONS})},Vt=function(e,t){K.b.success("Deleted!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_PERSONA_PERMISSION_SUCCESS,payload:t})},Yt=function(e){K.b.error("Something went wrong!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_PERSONA_PERMISSION_FAILED})},qt=function(e,t){K.b.success("Deleted Form!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_FORM_SUCCESS,payload:t})},Kt=function(e){K.b.error("Something went wrong!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_FORM_FAILED})},Xt=function(e){e({type:at.DELETE_FORM})},Qt=function(e,t){K.b.success("Deleted Form!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_ROLE_PERMISSION_SUCCESS,payload:t})},Jt=function(e){K.b.error("Something went wrong!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:at.DELETE_ROLE_PERMISSION_FAILED})},Zt=function(e){e({type:at.DELETE_ROLE_PERMISSION})},$t=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:aa(t),Is.Settings().GetRolePermissionsList().then(function(e){ea(t,e.data)}).catch(function(e){ta(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ea=function(e,t){e({type:at.GET_ROLE_PERMISSIONS_SUCCESS,payload:t})},ta=function(e){e({type:at.GET_ROLE_PERMISSIONS_FAILED})},aa=function(e){e({type:at.GET_ROLE_PERMISSIONS})},na=function(e,t){e({type:at.UPDATE_ROLE_PERMISSIONS_SUCCESS,payload:t})},ra=function(e){e({type:at.UPDATE_ROLE_PERMISSIONS_FAILED})},sa=function(e){e({type:at.UPDATE_ROLE_PERMISSIONS})},oa=function(e,t){e({type:at.UPDATE_FORM_NAME_SUCCESS,payload:t})},ia=function(e){e({type:at.UPDATE_FORM_NAME_FAILED})},la=function(e){e({type:at.UPDATE_FORM_NAME})},ca=function(e,t){e({type:at.UPDATE_PERSONA_PERMISSIONS_SUCCESS,payload:t})},ma=function(e){e({type:at.UPDATE_PERSONA_PERMISSIONS_FAILED})},da=function(e){e({type:at.UPDATE_PERSONA_PERMISSIONS})},ua=(a(402),function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"spinner"},s.a.createElement(Oe.a,{type:"ThreeDots",color:"#2BAD60",height:80,width:80})))}),pa=a(549),Ea=a(534),fa=a(28),ha=function(e){function t(e){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).call(this,e))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.menuItemIdkey,n=t.menuItemIdName;return s.a.createElement("span",null,s.a.createElement("label",null,this.props.label,1==this.props.required?s.a.createElement("span",{className:"error"},"*"):s.a.createElement("span",null)),s.a.createElement("span",{className:"custom-dropdown"},s.a.createElement(pa.a,{title:this.props.title,disabled:this.props.disabled,id:this.props.id,"data-tip":!0,"data-for":this.props.tooltipID,className:this.props.className},this.props.canResetSelectedOption?s.a.createElement(Ea.a,{eventKey:"-1",onSelect:function(){var t;return e.props.onSelectOption((t={},Object(y.a)(t,a,e.props.resetId),Object(y.a)(t,n,e.props.resetValue),t))}},this.props.resetValue):"",this.props.list&&this.props.list.length>0?this.props.list.map(function(t){return s.a.createElement(Ea.a,{eventKey:t[a],key:t[a],onSelect:function(){return e.props.onSelectOption(t)},className:e.props.canDisableOptions&&e.props.disableOptionFunc(t)?"optionDisable":"",disabled:!!e.props.canDisableOptions&&e.props.disableOptionFunc(t)},t[n])}):s.a.createElement(Ea.a,{eventKey:-1,key:-1,onSelect:function(){}},this.props.defaultOption?this.props.defaultOption:"Loading...")),s.a.createElement(fa.a,{id:this.props.tooltipID,effect:"solid",place:this.props.direction?this.props.direction:"top"},s.a.createElement("span",null,this.props.title))))}}]),t}(r.Component),ga=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).componentWillMount=function(){a.props.getPersonas()},a.getInitialState=function(){return{customerType:a.props.personas&&a.props.personas.length?a.props.personas[0].personaName:"Select User Type",name:"",address:"",admin:{firstName:"",lastName:"",email:""},errors:{name:"",address:"",email:"",firstName:"",lastName:"",customerType:""},isDisabled:!0}},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name,s=e.currentTarget.value;if(""===s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.state.admin&&Object.keys(a.state.admin).includes(r)){var o=Object(p.a)({},a.state.admin);o[r]=s.trimLeft().trimRight(),a.setState({admin:o,errors:t,isDisabled:n})}else{var i;a.setState((i={},Object(y.a)(i,r,e.currentTarget.value.trimLeft().trimRight()),Object(y.a)(i,"errors",t),Object(y.a)(i,"isDisabled",n),i))}},a.getCompanyObject=function(){return{name:a.state.name,address:a.state.address,email:a.state.admin?a.state.admin.email:"",firstName:a.state.admin?a.state.admin.firstName:"",lastName:a.state.admin?a.state.admin.lastName:"",customerType:a.state.customerType}},a.handleSubmit=function(e){e.preventDefault(),a.validates(a.getCompanyObject())?(a.props.AddCompany(a.state),a.setState(a.getInitialState()),e.target.reset()):K.b.warn("Please provide required information",{position:K.b.POSITION.BOTTOM_RIGHT})},a.onSelectCompanyType=function(e){var t=e.personaId;a.setState({customerType:t})},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""===e[1].toString().trimLeft().trimRight()&&(t[e[0]]="Required",n=!1)}),n?a.setState({isDisabled:!1}):a.setState({errors:t,isDisabled:!0}),n},a.isButtonDisabled=function(){var e=a.state,t=e.name,n=e.address,r=e.admin;return""===e.customerType||""===t||""===n||void 0===r||""===r.firstName||""===r.lastName||""===r.email},a.noPermissionOverlay=function(e){return s.a.createElement("div",{className:"overlay"},s.a.createElement("div",{className:"overlay-opacity",onClick:function(){}}),s.a.createElement(C.a,null,s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,xs:2}),s.a.createElement(N.a,{md:7,xs:8}," ",s.a.createElement("div",{className:"filter-child"},s.a.createElement("h4",null,e))),s.a.createElement(N.a,{md:2,xs:2}))))},a.state=a.getInitialState(),a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"getValidationState",value:function(e,t,a){var n=e[t]&&e[t].length;return n&&n>a?"error":null}},{key:"render",value:function(){return s.a.createElement("div",{className:"content not-permitted"},s.a.createElement(C.a,{fluid:!0},this.props.componentPermissions&&this.props.componentPermissions.canInsert?"":this.noPermissionOverlay("Sorry, You don't have permission to add new user"),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{title:"Create User",content:s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(N.a,{md:12,xs:12,className:"custom-inputs"},s.a.createElement(N.a,{md:6,xs:12,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin",validationState:this.getValidationState(this.state,"name",50)},s.a.createElement(et.a,null,"User Name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{maxLength:50,type:"text",name:"name",placeholder:"User name",onInput:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.name),s.a.createElement(tt.a.Feedback,null))),s.a.createElement(N.a,{md:6,xs:12},s.a.createElement(ha,{title:""!==this.state.customerType?this.state.customerType:"Select User Type",id:"split-button-addUsers-userType",className:"dropdown-50 text-cut",list:this.props.personas,onSelectOption:this.onSelectCompanyType,tooltipID:"administration-addUsers-userType",label:"User Type",direction:"bottom",required:!0,menuItemIdkey:"personaId",menuItemIdName:"personaName"}))),s.a.createElement(N.a,{md:12,xs:12,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin",validationState:this.getValidationState(this.state,"address",200)},s.a.createElement(et.a,null,"Address",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"text",name:"address",placeholder:"Address",onInput:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.address),s.a.createElement(tt.a.Feedback,null))),s.a.createElement(N.a,{md:12,xs:12,className:"custom-inputs"},s.a.createElement(N.a,{md:6,xs:12,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin",validationState:this.getValidationState(this.state.admin,"firstName",50)},s.a.createElement(et.a,null,"First name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{maxLength:50,type:"text",name:"firstName",placeholder:"First name",onInput:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.firstName),s.a.createElement(tt.a.Feedback,null))),s.a.createElement(N.a,{md:6,xs:12,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin",validationState:this.getValidationState(this.state.admin,"lastName",50)},s.a.createElement(et.a,null,"Last name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{maxLength:50,type:"text",name:"lastName",placeholder:"Last name",onInput:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.lastName),s.a.createElement(tt.a.Feedback,null)))),s.a.createElement(N.a,{md:6,xs:12,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin",validationState:this.getValidationState(this.state.admin,"email",100)},s.a.createElement(et.a,null,"Email address",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"email",name:"email",placeholder:"Email",onInput:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.email),s.a.createElement(tt.a.Feedback,null))),s.a.createElement(N.a,{md:7,xs:12,className:"custom-inputs companyAddButton"},s.a.createElement(G,{fill:!0,className:"buttonColor",id:"submit",type:"submit",disabled:!!this.isButtonDisabled()},"Create User")),s.a.createElement(N.a,{md:12,xs:12},this.props.isAddingCompany&&s.a.createElement(ua,{isLoading:!0})),s.a.createElement("div",{className:"clearfix"}))})))))}}]),t}(s.a.Component),Sa={AddCompany:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:nt(a),Is.Company().CreateCompany(e).then(function(e){a(ct()),rt(a,e.data)}).catch(function(e){st(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getPersonas:At},va=Object(ve.b)(function(e){return{isLoggedIn:!!e.User&&e.User.isLoggedIn,isAddingCompany:!!e.Company&&e.Company.isAddingCompany,addCompanyAlertStatus:e.Alerts?e.Alerts.addCompanyAlertStatus:"not assigned",personas:e.Settings?e.Settings.personas:[],permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},Sa)(ga),Ia=a(547),ba=a(538),Pa=a(539),Oa=a(540),Da=a(30),Na=function(e){return s.a.createElement("button",e,e.children)},Ca=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).filterPages=function(e,t){return e.filter(function(e){return e<=t})},a.getVisiblePages=function(e,t){return t<4?a.filterPages([1,2,3],t):e%5>=0&&e>=4&&e+2<t?[1,e-1,e,e+1]:e%5>=0&&e>4&&e+2>=t?[1,t-2,t-1,t]:[1,2,3,t]},a.changePage=a.changePage.bind(Object(w.a)(a)),a.state={visiblePages:a.getVisiblePages(null,e.pages)},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.pages!==e.pages&&this.setState({visiblePages:this.getVisiblePages(null,e.pages)}),this.changePage(e.page+1)}},{key:"changePage",value:function(e){if(e!==this.props.page+1){var t=this.getVisiblePages(e,this.props.pages);this.setState({visiblePages:this.filterPages(t,this.props.pages)}),this.props.onPageChange(e-1)}}},{key:"render",value:function(){var e=this,t=this.props.PageButtonComponent,a=void 0===t?Na:t,n=this.state.visiblePages,r=this.props.page+1;return s.a.createElement("div",null,s.a.createElement("div",{className:"Table__pagination"},s.a.createElement("div",{className:"Table__prevPageWrapper"},s.a.createElement(a,{className:"Table__pageButton",onClick:function(){1!==r&&e.changePage(r-1)},disabled:1===r},s.a.createElement("i",{className:"fa fa-angle-left fa-xs"}),"  ","Prev")),s.a.createElement("div",{className:"Table__visiblePagesWrapper"},n.map(function(t,n,o){return s.a.createElement("span",{key:t},o[n-1]+2<t?s.a.createElement("span",null,"..."):s.a.createElement(a,{key:t,className:r===t?"Table__pageButton Table__pageButton--active":"Table__pageButton",onClick:e.changePage.bind(null,t)},t))})),s.a.createElement("div",{className:"Table__nextPageWrapper"},s.a.createElement(a,{className:"Table__pageButton",onClick:function(){r!==e.props.pages&&e.changePage(r+1)},disabled:r===this.props.pages},"Next"," ",s.a.createElement("i",{className:"fa fa-angle-right fa-xs"})))),s.a.createElement("div",{className:"totalCount"},"Total Results: ",this.props.totalCount?this.props.totalCount:this.props.data.length))}}]),t}(s.a.Component),_a=a(537),Ra=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).state={sizeList:[5,10,20,50,100]},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:this.props.classNames},s.a.createElement("span",{className:"under-dd"},"Rows"),s.a.createElement("span",null,s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:this.props.selectedPage,id:"page-size-dd",className:"mr-20"}," ",this.state.sizeList.map(function(t){return s.a.createElement(Ea.a,{eventKey:t,key:t,onSelect:function(){return e.props.changePageSize(t)}},t)}))))}}]),t}(s.a.Component),Aa=a(544),ya=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).removeErrors=function(){a.setState({errors:{customer_name:"",customer_address:"",user_firstName:"",user_lastName:"",user_emailAddress:""}})},a.handleShow=function(e,t){a.removeErrors(),a.setState({showModal:!0,showUserModal:!1,customerType:t.original.customerType,user:{address:t.original.address,name:t.original.name,id:t.original.id,customerType:t.original.customerType}})},a.handleUserProfileShow=function(e,t){a.removeErrors();var n=t.original;a.props.getRolesByPersona(n.customerType),a.setState({showUserModal:!0,showModal:!0,userProfile:Object(p.a)({},a.state.userProfile,{customerId:n.customerId,firstName:"",lastName:"",emailAddress:"",personaType:n.customerType}),isDisabled:!0})},a.handleClose=function(){a.removeErrors(),a.setState({showModal:!1,userProfile:{customerId:"",firstName:"",lastName:"",emailAddress:"",roleType:"Select Role",roleId:-1}})},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name,s=e.currentTarget.value;if(r.includes("user_")){var o=r.split("_")[1];""===s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({userProfile:Object(p.a)({},a.state.userProfile,Object(y.a)({},o,s)),errors:t,isDisabled:n,componentPermissions:Object(p.a)({},a.props.componentPermissions)})}else if(r.includes("customer_")){var i=r.split("_")[1];""===s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({user:Object(p.a)({},a.state.user,Object(y.a)({},i,s)),errors:t,isDisabled:n,componentPermissions:Object(p.a)({},a.props.componentPermissions)})}else{var l;""===s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState((l={},Object(y.a)(l,r,s),Object(y.a)(l,"errors",t),Object(y.a)(l,"isDisabled",n),l))}},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""===e[1].toString().trimLeft().trimRight()&&(t[e[0]]="Required",n=!1)}),n?a.setState({isDisabled:!1}):a.setState({errors:t,isDisabled:!0}),n},a.handleSave=function(e){a.validates(a.state.user)&&a.props.updateCompany(a.state.user),a.setState({showModal:!1})},a.handleUserSave=function(e){if(a.setState({showModal:!1,showUserModal:!1}),a.validates(a.state.userProfile)){var t={userId:a.props.userId,customerId:a.state.userProfile.customerId,roleType:a.state.userProfile.roleType,roleId:a.state.userProfile.roleId,firstName:a.state.userProfile.firstName,lastName:a.state.userProfile.lastName,emailAddress:a.state.userProfile.emailAddress,lang:"en"};a.props.AddUserProfile(t)}else K.b.warn("Please enter all required values")},a.getEditUserModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.showModal,onHide:a.handleClose},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Edit User")),s.a.createElement(Aa.a.Body,null,s.a.createElement($e.a,{controlId:"formHorizontalCustomeType"},s.a.createElement(et.a,null,"Type"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"Type",name:"customer_customerType",value:a.state.user.customerType,disabled:!0}),s.a.createElement("span",{className:"error"},a.state.errors.customer_customerType)),s.a.createElement($e.a,{controlId:"formHorizontalEmail"},s.a.createElement(et.a,null,"Name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"Company Name",name:"customer_name",value:a.state.user.name,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.customer_name)),s.a.createElement($e.a,{controlId:"formHorizontalPassword"},s.a.createElement(et.a,null,"Address"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"Address",name:"customer_address",value:a.state.user.address,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.customer_address))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{variant:"secondary",onClick:a.handleClose},"Cancel"),s.a.createElement(G,{className:"buttonColor",onClick:a.handleSave,disabled:!!a.state.isDisabled},"Save Changes"))))},a.getUserProfileModal=function(){return s.a.createElement(Aa.a,{show:a.state.showModal,onHide:a.handleClose},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Add User Profile")),s.a.createElement(Aa.a.Body,null,s.a.createElement(D.a,{className:"ml-0"},s.a.createElement(N.a,{md:12,className:"custom-inputs mb-15 custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.userProfile.roleType?a.state.userProfile.roleType:"Select User Type",id:"split-button-admin-monitorUser-UserTypes",className:"dropdown-50 text-cut",list:a.props.persona_roles,onSelectOption:function(e){return a.setState({userProfile:Object(p.a)({},a.state.userProfile,{roleType:e.role1})})},tooltipID:"admin-monitorUser-UserTypes",label:"User Type",direction:"bottom",required:!1,menuItemIdkey:"id",menuItemIdName:"role1"})),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"First Name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"First Name",name:"user_firstName",value:a.state.userProfile.firstName,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.user_firstName))),s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Last Name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"Last Name",name:"user_lastName",value:a.state.userProfile.lastName,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.user_lastName))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Email Address",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{bsClass:"form-control",type:"email",placeholder:"Email Address",name:"user_emailAddress",value:a.state.userProfile.emailAddress,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.user_emailAddress)))))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{variant:"secondary",onClick:a.handleClose},"Cancel"),s.a.createElement(G,{className:"buttonColor",onClick:a.handleUserSave,disabled:!!a.state.isDisabled},"Add")))},a.state={customerType:"",showModal:!1,showUserModal:!1,errors:{customer_name:"",customer_address:"",user_firstName:"",user_lastName:"",user_emailAddress:""},isDisabled:!1,sort:[],pageSize:5,userProfile:{customerId:"",firstName:"",lastName:"",emailAddress:"",roleType:a.props.persona_roles&&a.props.persona_roles.length?a.props.persona_roles[0].role1:"Select Role",roleId:a.props.persona_roles.length?a.props.persona_roles[0].id:-1},user:{name:"",address:"",id:-1,customerType:""}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return!0}},{key:"render",value:function(){var e=this,t=this.props,a=t.row,n=t.addUserProfilePermission,r=t.updatePermission;t.showDevicePermission,t.registerDevicePermission;return s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement(G,{"data-tip":!0,"data-for":"add-btn",variant:"primary",onClick:function(t){return e.handleUserProfileShow(t,a)},className:n?"d-block":"d-none",disabled:!n},s.a.createElement("i",{className:"fa fa-plus"})),s.a.createElement(fa.a,{id:"add-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Add User Profile")),s.a.createElement(G,{"data-tip":!0,"data-for":"edit-btn",variant:"primary",onClick:function(t){return e.handleShow(t,a)},className:r?"d-block":"d-none",disabled:!r},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Edit"))),this.state.showModal?!1===this.state.showUserModal?this.getEditUserModal():this.getUserProfileModal():"")}}]),t}(s.a.Component),Ta={updateCompany:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Is.Company().UpdateCompany(e).then(function(t){200!=t.status?ft(a):(pt(a,e),Et(a,t.data.data))}).catch(function(e){ft(a)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},AddUserProfile:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ot(a),Is.Company().CreateUserProfile(e).then(function(e){it(a,e.data)}).catch(function(e){lt(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getRolesByPersona:It},Ua=Object(ve.b)(function(e){return{userId:e.User?e.User.UserInfo.userId:"",persona_roles:e.Settings?e.Settings.persona_roles:[]}},Ta)(ya),La=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handlePageSize=function(e){a.setState({pageSize:e})},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.getUsersTable=function(e){var t=Ye.a.clone(e),n=t&&t.length>0&&Zr(t);return s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:5,defaultPageSize:5,data:n||[],PaginationComponent:Ca,columns:[{Header:function(){return s.a.createElement("span",{className:"sortable"},"Name")},accessor:"name",style:Qr},{Header:function(){return s.a.createElement("span",{className:"sortable"},"User Type")},accessor:"customerType"},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Address")},accessor:"address",style:Qr},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Created By")},accessor:"createdBy"},{Header:"Status",accessor:"isActive",maxWidth:100,sortable:!1,filterable:!1,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.isActive})}},{Header:"",accessor:"Update",sortable:!1,filterable:!1,minWidth:50,width:200,show:a.getAllActionsAllowed(),Cell:function(e){return s.a.createElement("div",{className:"icon-btn flex_display"},s.a.createElement(Ua,{row:e,addUserProfilePermission:a.state.permissions.addUserProfile,updatePermission:a.props.componentPermissions&&a.props.componentPermissions.canUpdate}),s.a.createElement(G,{"data-tip":!0,"data-for":"device-show",variant:"primary",onClick:function(t){a.props.history.push("/admin/monitorDevice",{customerID:e.original.id,customerName:e.original.name,selectedCustomerId:e.original.customerId})},disabled:!a.state.permissions.showDevices,className:a.state.permissions.showDevices?"d-block":"d-none"},s.a.createElement("i",{className:"fa fa-eye"})),s.a.createElement(fa.a,{id:"device-show",effect:"solid",place:"top"},s.a.createElement("span",null,"Monitor Devices")),s.a.createElement(G,{disabled:!a.state.permissions.registerDevices,className:a.state.permissions.registerDevices?"d-block":"d-none","data-tip":!0,"data-for":"device-register",variant:"primary",onClick:function(t){a.props.history.push("/admin/devices",{customerID:e.original.id,customerName:e.original.name,selectedCustomerId:e.original.customerId})}},s.a.createElement("i",{className:"fa fa-mobile-phone"})),s.a.createElement(fa.a,{id:"device-register",effect:"solid",place:"top"},s.a.createElement("span",null,"Register Devices")))}}],showPagination:!0,pageSize:a.state.pageSize,filterable:!0,sorted:a.state.sort,onSortedChange:a.handleSort,defaultFilterMethod:Xr,className:"-highlight"})},a.getAllActionsAllowed=function(){return a.props.componentPermissions&&a.props.componentPermissions.canInsert||a.state.permissions.showDevices||a.state.permissions.registerDevices||a.props.componentPermissions&&a.props.componentPermissions.canUpdate},a.onSelectPersonaTab=function(e){a.setState({selectedTab:e})},a.getTabbedComponent=function(){var e=a.props.companies?a.props.companies.map(function(e){return e.customerType}):[];e=function(e,t,a){for(var n=e.concat(t),r=0;r<n.length;r++)for(var s=r+1;s<n.length;s++)a(n[r],n[s])&&(n.splice(s,1),s--);return n}(e,e,wa);var t=a.props.personas.filter(function(t){return e.includes(t.personaName)}),n=a.props.companies?a.props.companies:[],r={};return t.forEach(function(e){r[e.id]=a.getFilteredContent(e.personaName)}),s.a.createElement("div",null,s.a.createElement(Ia.a.Container,{id:"user-monitor-page",activeKey:a.state.selectedTab,onSelect:function(e){return a.onSelectPersonaTab(e)}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs",className:"responsiveNav"},s.a.createElement(Pa.a,{eventKey:100},"All ",s.a.createElement(Oa.a,null,n?n.length:0)),t.map(function(e){return s.a.createElement(Pa.a,{eventKey:e.id},e.personaName," ",s.a.createElement(Oa.a,null,r[e.id].length))}))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!1},s.a.createElement(Ia.a.Pane,{eventKey:100},a.getUsersTable(n)),t.map(function(e){return s.a.createElement(Ia.a.Pane,{eventKey:e.id},a.getUsersTable(r[e.id]))}))))))},a.getFilteredContent=function(e){return a.props.companies&&a.props.companies.filter(function(t){return t.customerType===e})},a.state={customerType:"",showModal:!1,showUserModal:!1,isDisabled:!1,sort:[],pageSize:5,selectedTab:100,permissions:{showDevices:os(a.props.permissions),registerDevices:is(a.props.permissions),addUserProfile:ls(a.props.permissions)}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.getAllCompanies(),this.props.getRoles()}},{key:"shouldComponentUpdate",value:function(e,t){return!Ye.a.isEqual(e.companies,this.props.companies)||!Ye.a.isEqual(t,this.state)}},{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{title:s.a.createElement("div",null,s.a.createElement("span",null,"Monitor Users")," ",s.a.createElement(Ra,{classNames:"float-right-2",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize})),category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:this.props.isGettingCompanies&&this.props.companies&&0===this.props.companies.length?s.a.createElement("div",{className:"fixed-height"}," ",s.a.createElement(ua,null)):s.a.createElement("div",{className:"pad-5"},this.getTabbedComponent())})))))}}]),t}(s.a.Component);function wa(e,t){return e===t}var Ma,Fa={getAllCompanies:ct,getRoles:bt,getRolesByPersona:It},xa=Object(ve.b)(function(e){return{companies:e.Company?e.Company.Companies:[],isGettingCompanies:!(!e.Company||!e.Company.isGettingCompanies)&&e.Company.isGettingCompanies,roles:e.Settings?e.Settings.roles:[],persona_roles:e.Settings?e.Settings.persona_roles:[],userId:e.User?e.User.UserInfo.userId:"",personas:e.Settings?e.Settings.personas:[],permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},Fa)(La);!function(e){e.LOGIN_ALERT="LOGIN_ALERT",e.ADD_COMPANY_ALERT="ADD_COMPANY_ALERT",e.ADD_DEVICE_ALERT="ADD_DEVICE_ALERT",e.GET_USAGE_REPORT_STATUS="GET_USAGE_REPORT_STATUS"}(Ma||(Ma={}));var ja,Ga=function(e,t){e({type:Ma.LOGIN_ALERT,payload:t})},Ba=function(e,t){e({type:Ma.ADD_DEVICE_ALERT,payload:t})},ka=function(e,t){e({type:Ma.GET_USAGE_REPORT_STATUS,payload:t})};!function(e){e.ADD_DEVICE="ADD_DEVICE",e.ADD_DEVICE_SUCCESS="ADD_DEVICE_SUCCESS",e.ADD_DEVICE_FAILED="ADD_DEVICE_FAILED",e.GET_ALL_DEVICES="GET_ALL_DEVICES",e.GET_ALL_DEVICES_SUCCESS="GET_ALL_DEVICES_SUCCESS",e.GET_ALL_DEVICES_FAILED="GET_ALL_DEVICES_FAILED",e.UPDATE_DEVICE="UPDATE_DEVICE",e.UPDATE_DEVICE_SUCCESS="UPDATE_DEVICE_SUCCESS",e.UPDATE_DEVICE_FAILED="UPDATE_DEVICE_FAILED",e.UPLOAD_BOM="UPLOAD_BOM",e.UPLOAD_BOM_SUCCESS="UPLOAD_BOM_SUCCESS",e.UPLOAD_BOM_FAILED="UPLOAD_BOM_FAILED",e.UPDATE_FIRMWARE="UPDATE_FIRMWARE",e.UPDATE_FIRMWARE_SUCCESS="UPDATE_FIRMWARE_SUCCESS",e.UPDATE_FIRMWARE_FAILED="UPDATE_FIRMWARE_FAILED",e.GET_DEVICE_BATCH="GET_DEVICE_BATCH",e.GET_DEVICE_BATCH_SUCCESS="GET_DEVICE_BATCH_SUCCESS",e.GET_DEVICE_BATCH_FAILED="GET_DEVICE_BATCH_FAILED",e.GET_ERROR_CODES="GET_ERROR_CODES",e.GET_ERROR_CODES_SUCCESS="GET_ERROR_CODES_SUCCESS",e.GET_ERROR_CODES_FAILED="GET_ERROR_CODES_FAILED",e.UPDATE_ERROR_CODE="UPDATE_ERROR_CODE",e.UPDATE_ERROR_CODE_SUCCESS="UPDATE_ERROR_CODE_SUCCESS",e.UPDATE_ERROR_CODE_FAILED="UPDATE_ERROR_CODE_FAILED",e.CLEAR_REPORT_DATA="CLEAR_REPORT_DATA",e.GET_DEVICES_LIST="GET_DEVICES_LIST",e.GET_DEVICES_LIST_SUCCESS="GET_DEVICES_LIST_SUCCESS",e.GET_DEVICES_LIST_FAILED="GET_DEVICES_LIST_FAILED"}(ja||(ja={}));var za,Ha=function(e){e({type:ja.ADD_DEVICE})},Wa=function(e,t){K.b.success("Added Successfully!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.ADD_DEVICE_SUCCESS,payload:t})},Va=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.ADD_DEVICE_FAILED})},Ya=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:qa(t),Ds(t,!0),Is.Device().getDevices().then(function(e){Ds(t,!1),Ka(t,e.data.data)}).catch(function(e){Ds(t,!1),Xa(t)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},qa=function(e){e({type:ja.GET_ALL_DEVICES})},Ka=function(e,t){e({type:ja.GET_ALL_DEVICES_SUCCESS,payload:t})},Xa=function(e){e({type:ja.GET_ALL_DEVICES_FAILED})},Qa=function(e,t){e({type:ja.UPDATE_DEVICE,payload:t})},Ja=function(e,t){K.b.success("Added Successfully!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.UPDATE_DEVICE_SUCCESS,payload:t})},Za=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.UPDATE_DEVICE_FAILED})},$a=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:en(t),Ds(t,!0),Is.Device().GetDeviceBatchList().then(function(e){Ds(t,!1),tn(t,e.data)}).catch(function(e){Ds(t,!1)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},en=function(e){e({type:ja.GET_DEVICE_BATCH})},tn=function(e,t){e({type:ja.GET_DEVICE_BATCH_SUCCESS,payload:t})},an=function(e){e({type:ja.UPLOAD_BOM})},nn=function(e,t){e({type:ja.UPLOAD_BOM_SUCCESS,payload:t})},rn=function(e){e({type:ja.UPLOAD_BOM_FAILED,payload:null})},sn=function(e){e({type:ja.UPDATE_FIRMWARE})},on=function(e,t){e({type:ja.UPDATE_FIRMWARE_SUCCESS,payload:t})},ln=function(e){e({type:ja.UPDATE_FIRMWARE_FAILED,payload:null})},cn=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:mn(t),Ds(t,!0),Is.Device().GetErrorCodes().then(function(e){Ds(t,!1),dn(t,e.data.data)}).catch(function(e){Ds(t,!1),un(t)});case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},mn=function(e){e({type:ja.GET_ERROR_CODES})},dn=function(e,t){e({type:ja.GET_ERROR_CODES_SUCCESS,payload:t})},un=function(e){e({type:ja.GET_ERROR_CODES_FAILED})},pn=function(e){e({type:ja.UPDATE_ERROR_CODE})},En=function(e,t){K.b.success("Error Code Updated",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.UPDATE_ERROR_CODE_SUCCESS,payload:t})},fn=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:ja.UPDATE_ERROR_CODE_FAILED})},hn=function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:gn(t),Is.Device().GetDeviceList().then(function(e){Sn(t,e.data.data)}).catch(function(e){vn(t)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},gn=function(e){e({type:ja.GET_DEVICES_LIST})},Sn=function(e,t){e({type:ja.GET_DEVICES_LIST_SUCCESS,payload:t})},vn=function(e){e({type:ja.GET_DEVICES_LIST_FAILED})},In=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handleInputChange=function(e){var t={},n=e.currentTarget.name,r=e.currentTarget.value;if(""==r.trimLeft().trimRight()?"newBatch"===n?a.setState({deviceBatch:"",isDisabled:!1}):t=Object(p.a)({},a.state.errors,Object(y.a)({},n,"Required")):t=Object(p.a)({},a.state.errors,Object(y.a)({},n,"")),"newBatch"===n&&""!==r.trimLeft().trimRight())a.setState({deviceBatch:"None",newBatch:e.currentTarget.value,errors:t,isDisabled:!0});else if("devicePrefix2"===n){var s;if(new RegExp(/^([^0-9]*)$/).test(r))t=Object(p.a)({},a.state.errors,Object(y.a)({},n,"")),a.setState((s={},Object(y.a)(s,n,e.currentTarget.value),Object(y.a)(s,"errors",t),s));else t=Object(p.a)({},a.state.errors,Object(y.a)({},n,"Prefix cannot contain numbers")),a.setState({errors:t})}else{var o;a.setState((o={},Object(y.a)(o,n,e.currentTarget.value),Object(y.a)(o,"errors",t),o))}},a.onSelectCompany=function(e){a.setState({companyName:e.name,companyId:e.id,selectedCustomerId:e.customerId,isDisabled:!1,deviceBatch:"",isAddingNewBatch:!0,newBatch:""})},a.getDeviceObject=function(){return{companyId:a.state.companyId,companyName:a.state.companyName,deviceBatch:a.state.deviceBatch,startRange:a.state.startRange,endRange:a.state.endRange,newBatch:a.state.newBatch}},a.isButtonDisabled=function(){var e=a.state,t=e.companyId,n=(e.devicePrefix,e.deviceBatch),r=e.startRange,s=e.endRange,o=e.newBatch;return-1===t||""===n||""===o||""===r||""===s},a.handleSubmit=function(e){if(e.preventDefault(),a.validates(a.getDeviceObject())){var t=Object(p.a)({},a.state);t.devicePrefix=t.devicePrefix.concat(t.devicePrefix2.trimStart().trimEnd()),t.createdBy=a.props.loggedInEmail,a.state.isAddingNewBatch?t.batchId="batch"+t.newBatch:t.batchId=t.deviceBatch,t.companyName=a.state.selectedCustomerId,a.props.AddDevices(t),a.setState(a.getInitialState())}else K.b.warn("Please provide required information",{position:K.b.POSITION.BOTTOM_RIGHT})},a.onSelectDeviceBatch=function(e){var t=e.batchId;""===t?a.setState({deviceBatch:t,isAddingNewBatch:!0,newBatch:""}):a.setState({deviceBatch:t,isAddingNewBatch:!1,newBatch:"None"})},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""!=e[1].toString().trimLeft().trimRight()&&"0"!=e[1].toString().trimLeft().trimRight()||(t[e[0]]="Required",n=!1)}),n?a.setState({isDisabled:!1}):a.setState({errors:t,isDisabled:!0}),n},a.noPermissionOverlay=function(e){return s.a.createElement("div",{className:"overlay"},s.a.createElement("div",{className:"overlay-opacity",onClick:function(){}}),s.a.createElement(C.a,null,s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,xs:2}),s.a.createElement(N.a,{md:7,xs:8}," ",s.a.createElement("div",{className:"filter-child"},s.a.createElement("h4",null,e))),s.a.createElement(N.a,{md:2,xs:2}))))},a.state=a.getInitialState(),a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"getInitialState",value:function(){var e=ps(this.props.userInfo,this.props.companiesList);return{companyId:this.props.history.location.state&&this.props.history.location.state.customerID?this.props.history.location.state.customerID:e.id,companyName:this.props.history.location.state&&this.props.history.location.state.customerName?this.props.history.location.state.customerName:e.name,selectedCustomerId:this.props.history.location.state&&this.props.history.location.state.selectedCustomerId?this.props.history.location.state.selectedCustomerId:e.customerId,devicePrefix:"Smart_Fan_",devicePrefix2:"",deviceBatch:"",startRange:"",endRange:"",deviceName:"",isAddingNewBatch:!0,isDisabled:!1,newBatch:"",errors:{startRange:"",endRange:"",deviceBatch:"",companyName:"",newBatch:"",devicePrefix2:""}}}},{key:"componentWillMount",value:function(){this.props.companiesList&&0===this.props.companiesList.length&&this.props.getCompaniesList(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList()}},{key:"render",value:function(){return s.a.createElement("div",{className:"content not-permitted"},s.a.createElement(C.a,{fluid:!0},this.props.componentPermissions&&this.props.componentPermissions.canInsert?"":this.noPermissionOverlay("Sorry, You don't have permission to add new device"),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:"Add Devices",content:s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{md:4},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select User",id:"split-button-addDevices-user",className:"dropdown-70 text-cut",list:this.props.companiesList&&this.props.companiesList,onSelectOption:this.onSelectCompany,tooltipID:"device-addDevices-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:4},s.a.createElement(ha,{title:""!==this.state.deviceBatch?this.state.deviceBatch:"Select Batch",id:"split-button-devices-addDevices-existing-batch",className:"dropdown-70 text-cut",list:this.props.devicesBatchList&&this.props.devicesBatchList,onSelectOption:this.onSelectDeviceBatch,tooltipID:"devices-addDevices-existing-batch",label:"Existing Device Batch",direction:"bottom",disabled:this.state.newBatch&&""!==this.state.newBatch.trimLeft().trimRight()&&"None"!==this.state.newBatch.trimLeft().trimRight(),required:!0,menuItemIdkey:"batchId",menuItemIdName:"batchName",canResetSelectedOption:!0,resetId:"",resetValue:"Select Batch"}))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{md:6,className:"deviceCustomPadding"},s.a.createElement($e.a,{className:"inputMargin"},s.a.createElement(et.a,null,"New Batch"),s.a.createElement(tt.a,{maxLength:10,type:"text",name:"newBatch",placeholder:"Enter new batch",disabled:!this.state.isAddingNewBatch,onChange:this.handleInputChange,value:this.state.newBatch}),this.state.isAddingNewBatch?s.a.createElement("span",{className:"error"},this.state.errors.newBatch):""))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{md:3},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Device Prefix"),s.a.createElement(tt.a,{name:"devicePrefix",type:"text",value:this.state.devicePrefix,disabled:!0}))),s.a.createElement(N.a,{md:3},s.a.createElement($e.a,null,s.a.createElement(tt.a,{maxLength:10,className:"label-less",name:"devicePrefix2",type:"text",value:this.state.devicePrefix2,disabled:!1,onChange:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.devicePrefix2))),s.a.createElement(N.a,{md:6},s.a.createElement($e.a,null,s.a.createElement(D.a,null,s.a.createElement("label",{className:"customLabel"},"Serial range ",s.a.createElement("span",{className:"error"},"*"))),s.a.createElement(N.a,{md:5},s.a.createElement(tt.a,{value:this.state.startRange,type:"number",placeholder:"Enter starting range",name:"startRange",onChange:this.handleInputChange,min:1}),s.a.createElement("span",{className:"error"},this.state.errors.startRange)),s.a.createElement(N.a,{className:"separatorCol"},s.a.createElement("label",{className:"separator"},"-")),s.a.createElement(N.a,{md:5},s.a.createElement(tt.a,{value:this.state.endRange,type:"number",placeholder:"Enter ending range",name:"endRange",onChange:this.handleInputChange,min:1}),s.a.createElement("span",{className:"error"},this.state.errors.endRange))))),s.a.createElement(N.a,{md:12,xs:12},s.a.createElement(G,{pullRight:!0,fill:!0,className:"buttonColor",id:"submit",type:"submit",disabled:!!this.isButtonDisabled()},"Add")),s.a.createElement(N.a,{md:12},this.props.isAddingDevice&&s.a.createElement(ua,{isLoading:!0})),s.a.createElement("div",{className:"clearfix"}))})))))}}]),t}(s.a.Component),bn={getCompaniesList:ht,AddDevices:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ha(a),Ba(a,"not assigned"),Is.Device().AddDevice(e).then(function(e){a(Ya()),Wa(a,e.data.data),Ba(a,"Success")}).catch(function(e){Va(a),Ba(a,"Failed")});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getDeviceBatchList:$a},Pn=Object(ve.b)(function(e){return{companiesList:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],isAddingDevice:!!e.Device&&e.Device.isAddingDevice,addDeviceAlertStatus:e.Alerts?e.Alerts.addDeviceAlertStatus:"not assigned",permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},loggedInEmail:e.User.UserInfo&&e.User.UserInfo.userId?e.User.UserInfo.userId:"",userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},bn)(In),On=a(46),Dn=a(115),Nn=(a(71),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).noPermissionOverlay=function(e){return s.a.createElement("div",{className:"overlay"},s.a.createElement("div",{className:"overlay-opacity",onClick:function(){}}),s.a.createElement(C.a,null,s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,xs:2}),s.a.createElement(N.a,{md:7,xs:8}," ",s.a.createElement("div",{className:"filter-child"},s.a.createElement("h4",null,e))),s.a.createElement(N.a,{md:2,xs:2}))))},a.handleInputChange=function(e){var t=e.currentTarget.name;a.setState(Object(y.a)({},t,e.currentTarget.value))},a.onSelectCompany=function(e){var t=e.id,n=e.name;a.setState({companyName:n,companyId:t})},a.onSelectDeviceBatch=function(e){a.setState({deviceBatch:e.batchId})},a.onSelectFormat=function(e){a.setState({choosenFormat:e.id})},a.isValidState=function(){a.setState({valid:a.state.isFileValid})},a.onDrop=function(e){a.setState({files:[].concat(Object(On.a)(a.state.files),Object(On.a)(e))}),e.forEach(function(e){}),a.setState({isFileValid:!0},a.isValidState)},a.handleUpload=function(){var e={companyId:a.state.companyName.toString(),deviceBatch:a.state.deviceBatch,fileformat:a.state.choosenFormat,bomType:a.state.selectedBOMType},t=a.state.files[0],n=new FormData;n.append("file",t),a.props.uploadBOM(e,n),a.setState({files:[]})},a.getFileSelectionButtonState=function(){return-1==a.state.companyId||""==a.state.deviceBatch||a.state.files.length>=1||a.props.isUploadingBOM},a.state={companyId:a.props.userInfo?a.props.userInfo.customer_Id:-1,companyName:a.props.userInfo?a.props.userInfo.customerId:"",deviceBatch:"",devicesBatchList:[],formatsList:fs,choosenFormat:".csv",files:[],isFileValid:!1,valid:!1,bomTypes:hs,selectedBOMType:"Smart Fan Box"},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"content  not-permitted"},this.props.componentPermissions&&this.props.componentPermissions.canInsert?"":this.noPermissionOverlay("Sorry, You don't have permission to upload BOM"),s.a.createElement(C.a,{fluid:!0},s.a.createElement(R,{title:"Upload BOM",content:s.a.createElement("div",null,s.a.createElement(D.a,null,s.a.createElement("div",{id:"fileUploaderSection"},s.a.createElement(N.a,{md:3,xs:12},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select User",id:"split-button-devices-BOM-user",className:"dropdown-70 text-cut",list:this.props.companies&&this.props.companies,onSelectOption:this.onSelectCompany,tooltipID:"devices-BOM-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,xs:12},s.a.createElement(ha,{title:""!==this.state.deviceBatch?this.state.deviceBatch:"Select Device Batch",id:"split-button-devices-BOM-deviceBatch",className:"dropdown-70 text-cut",list:this.props.devicesBatchList&&this.props.devicesBatchList,onSelectOption:this.onSelectDeviceBatch,tooltipID:"devices-BOM-deviceBatch",label:"Device Batch",direction:"bottom",required:!0,menuItemIdkey:"batchId",menuItemIdName:"batchName"})),s.a.createElement(N.a,{md:3,xs:12,className:"custom-dropdown"},s.a.createElement(ha,{title:""!==this.state.choosenFormat?this.state.choosenFormat:"Choose File Format",id:"split-button-devices-BOM-format",className:"dropdown-70 text-cut",list:this.state.formatsList&&this.state.formatsList,onSelectOption:this.onSelectFormat,tooltipID:"devices-BOM-format",label:"File Format",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"value"})),s.a.createElement(N.a,{md:3,xs:12,className:"custom-dropdown"},s.a.createElement(ha,{title:""!==this.state.selectedBOMType?this.state.selectedBOMType:"Select BOM Type",id:"split-button-devices-BOM-bomType",className:"dropdown-70 text-cut",list:this.state.bomTypes&&this.state.bomTypes,onSelectOption:function(t){e.setState({selectedBOMType:t.id})},tooltipID:"devices-BOM-bomType",label:"BOM Type",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"value"})),s.a.createElement(N.a,{md:12,xs:12,className:"text-right pd-30 float-right"},s.a.createElement(Dn.a,{"data-tip":!0,"data-for":"file-select-btn",className:"filedropzone "+(this.getFileSelectionButtonState()?"disabled":"buttonColor"),multiple:!1,onDrop:this.onDrop,accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel",disabled:!!this.getFileSelectionButtonState()},s.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"})," Select File"),s.a.createElement(fa.a,{id:"file-select-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Select Batch File")),s.a.createElement(G,{"data-tip":!0,onClick:this.handleUpload,"data-for":"file-upload-btn",className:"upload-btn buttonColor "+(this.state.files.length<1||this.props.isUploadingBOM?"disabledBtn":""),disabled:!!(this.state.files.length<1||this.props.isUploadingBOM)},s.a.createElement("i",{className:"fa fa-upload","aria-hidden":"true"})," Upload"),s.a.createElement(fa.a,{id:"file-upload-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Upload Batch File"))))),s.a.createElement("div",null,s.a.createElement(N.a,{md:12,xs:12,className:"file-place-holder"},this.state.files.length?this.state.files.map(function(t){return s.a.createElement("div",{className:"ui card file-card"},s.a.createElement("div",{className:"content"},s.a.createElement(N.a,{md:12,xs:12,className:"remove-padding-left remove-padding-right"},s.a.createElement(N.a,{md:2,xs:3,className:"remove-padding-left"}," ",s.a.createElement("i",{className:"fa fa-file-excel-o excel-color"})),s.a.createElement(N.a,{md:9,xs:7,className:"mt-5 text-wrap"}," ",s.a.createElement("span",null,t.name)),s.a.createElement(N.a,{md:1,xs:2,className:"mt-5 float-right clearBtn",onClick:function(){e.setState({files:[]})}}," ",s.a.createElement("i",{className:"fa fa-times"})))))}):this.props.isUploadingBOM?s.a.createElement(ua,null):s.a.createElement("div",{className:"pd-50"},"Uploaded Files will be shown here"))))})))}}]),t}(s.a.Component)),Cn={getAllCompanies:ht,getDeviceBatchList:$a,uploadBOM:function(e,t){return function(){var a=Object(h.a)(f.a.mark(function a(n){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:an(n),Ds(n,!0),Ba(n,"not assigned"),Is.Device().UploadBOM(e,t).then(function(e){nn(n,e.data.data),K.b.success("BOM Uploaded!",{position:K.b.POSITION.BOTTOM_RIGHT})}).catch(function(e){console.log(e),K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),rn(n)});case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},_n=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],isUploadingBOM:!!e.Device&&e.Device.isUploadingBOM,addDeviceAlertStatus:e.Alerts?e.Alerts.addDeviceAlertStatus:"not assigned",permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},Cn)(Nn),Rn=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:"Under construction",category:"Please visit later.",content:s.a.createElement("div",null)})))))}}]),t}(r.Component),An=function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handlePageSize=function(e){a.setState({pageSize:e})},a.onSelectCompany=function(e){a.setState({companyName:e.name,companyId:e.id,selectedCustomerId:e.customerId})},a.handleShow=function(e,t){a.removeErrors(),a.setState({showModal:!0,deviceName:t.original.name,selectedDeviceId:t.original.id,deviceId:t.original.deviceId,deviceCompany:t.original.customerId})},a.handleClose=function(){a.removeErrors(),a.setState({showModal:!1})},a.removeErrors=function(){a.setState({errors:{deviceName:""}})},a.handleSave=function(e){a.setState({showModal:!1});var t=a.props.companies?a.props.companies.filter(function(e){return e.id==a.state.deviceCompany}):[];t.length>0&&t[0].name;a.props.updateDevice({id:a.state.selectedDeviceId,deviceSerialId:a.state.deviceId,deviceName:a.state.deviceName,companyName:a.state.selectedCustomerId})},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""==e[1].toString().trimLeft().trimRight()&&(t[e[0]]="Required",n=!1)}),n?a.setState({isDisabled:!1}):a.setState({errors:t,isDisabled:!0}),n},a.handleInputChange=function(e){var t,n={},r=!1,s=e.currentTarget.name,o=e.currentTarget.value;""==o.trimLeft().trimRight()?(n=Object(p.a)({},a.state.errors,Object(y.a)({},s,"Required")),r=!0):(n=Object(p.a)({},a.state.errors,Object(y.a)({},s,"")),r=!1),a.setState((t={},Object(y.a)(t,s,o),Object(y.a)(t,"errors",n),Object(y.a)(t,"isDisabled",r),t))},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.sortDevices=function(e){var t=Ye.a.clone(a.props.companies);if((t=t&&t.length>0&&Zr(t))&&e){var n=[];return t.forEach(function(t){e=e.filter(function(e){return e.customerId!==t.id||(n.push(e),!1)})}),n}return null},a.getEditModal=function(){return s.a.createElement(Aa.a,{show:a.state.showModal,onHide:a.handleClose},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Edit Device")),s.a.createElement(Aa.a.Body,null,s.a.createElement($e.a,{controlId:"formHorizontalEmail"},s.a.createElement(et.a,null,"Device name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",placeholder:"Device Name",name:"deviceName",value:a.state.deviceName,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.deviceName))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(F.a,{onClick:a.handleClose},"Close"),s.a.createElement(F.a,{onClick:a.handleSave,disabled:!!a.state.isDisabled},"Save Changes")))},a.checkNull=function(e){return null===e?"N/A":e},a.getDeviceStatusSubComponent=function(){return function(e){var t=e.original.devicestatus&&e.original.devicestatus.length?e.original.devicestatus[0]:{};return s.a.createElement(D.a,{className:"errorCodeDetails grayback"},s.a.createElement(N.a,{md:12,xs:12},s.a.createElement("div",{className:"deviceDetails"},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-bolt"}),s.a.createElement("strong",null,"Speed (Hz): "),a.checkNull(t.speed))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-thermometer-half"}),s.a.createElement("strong",null,"Temperature (\xb0C): "),a.checkNull(t.temp))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-tint"}),s.a.createElement("strong",null,"Humidity (%RH): "),a.checkNull(t.humidity))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-tachometer"}),s.a.createElement("strong",null,"Pressure (hPa): "),a.checkNull(t.pressure))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-hourglass"}),s.a.createElement("strong",null,"Usage Time (hrs): "),a.checkNull(t.usageHours))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-clock-o"}),s.a.createElement("strong",null,"Running Time (s): "),a.checkNull(t.runningTime))),s.a.createElement(N.a,{md:3}," ",s.a.createElement("div",null,s.a.createElement("i",{className:"fa fa-gavel"}),s.a.createElement("strong",null,"Maintenance Time (hrs): "),a.checkNull(t.maintenanceHours)))))))}};var n=ps(a.props.userInfo,a.props.companies);return a.state={companyId:a.props.history.location.state&&a.props.history.location.state.customerID?a.props.history.location.state.customerID:n.id,companyName:a.props.history.location.state&&a.props.history.location.state.customerName?a.props.history.location.state.customerName:n.name,selectedCustomerId:a.props.history.location.state&&a.props.history.location.state.selectedCustomerId?a.props.history.location.state.selectedCustomerId:n.customerId,showModal:!1,isDisabled:!1,selectedDeviceId:-1,deviceName:"",deviceId:"",deviceCompanyName:"",errors:{deviceName:""},sort:[],pageSize:5},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.getAllCompanies(),this.props.getDevices()}},{key:"render",value:function(){var e=this,t=-1!=this.state.companyId?this.props.devices?this.props.devices.filter(function(t,a){return t.customerId===e.state.companyId}):[]:this.props.devices;return t=this.sortDevices(t),s.a.createElement("div",{className:"content"},s.a.createElement("div",null,this.state.showModal?this.getEditModal():""),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("span",null,"Monitor Devices"),"  ",t&&t.length?s.a.createElement(Ra,{classNames:"float-right-2",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize}):s.a.createElement("span",null)),content:s.a.createElement("div",null,s.a.createElement(D.a,{className:"rowMargin"},s.a.createElement(N.a,{md:8},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select Customer",id:"split-button-devices-monitoring-customer",className:"dropdown-50 text-cut",list:this.props.companies&&this.props.companies,onSelectOption:this.onSelectCompany,tooltipID:"devices-monitoring-customer",direction:"bottom",menuItemIdkey:"id",menuItemIdName:"name",defaultOption:"All Devices"}))),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},this.props.isGettingDevices&&this.props.devices&&0==this.props.devices.length?s.a.createElement(ua,null):t&&t.length?s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:t&&t.length?0:5,defaultPageSize:5,PaginationComponent:Ca,SubComponent:this.getDeviceStatusSubComponent(),columns:[{expander:!0,Expander:function(e){var t=e.isExpanded;e.row,Object(L.a)(e,["isExpanded","row"]);return s.a.createElement("div",null,t?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"})))}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Name")},accessor:"name",minWidth:150,style:Qr},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Id")},accessor:"deviceId",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Code")},accessor:"deviceCode",minWidth:150},{Header:"Configured",minWidth:120,width:120,accessor:"isInstalled",sortable:!1,filterable:!1,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.isInstalled})}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Status")},accessor:"connectivityStatus",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Last Maintenance")},id:"lastMaintenanceDate",minWidth:150,style:Qr,accessor:function(e){var t="";return null!=e.lastMaintenanceDate&&(t=be()(e.lastMaintenanceDate).format("x")),t},Cell:function(e){return e.original.lastMaintenanceDate?be()(e.original.lastMaintenanceDate).format("MM/DD/YYYY"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.lastMaintenanceDate).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}},{Header:"",accessor:"Update",sortable:!1,filterable:!1,Cell:function(t){return s.a.createElement("div",null,s.a.createElement(F.a,{disabled:!e.props.componentPermissions||!e.props.componentPermissions.canUpdate,"data-tip":!0,"data-for":"edit-btn",onClick:function(a){return e.handleShow(a,t)}},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"right"},s.a.createElement("span",null,e.props.componentPermissions&&e.props.componentPermissions.canUpdate?"Edit":"Not Permitted")))},width:80}],data:t,showPagination:!0,pageSize:this.state.pageSize,sorted:this.state.sort,onSortedChange:this.handleSort,filterable:!0,defaultFilterMethod:Xr,className:"-highlight"}):s.a.createElement("div",{className:"DeviceMonitoringNoDevice"}," No Devices Found"))))})))))}}]),t}(s.a.Component),yn={getAllCompanies:ht,getDevices:Ya,updateDevice:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ds(a,!0),Is.Device().UpdateDevice(e).then(function(t){Qa(a,e),Ja(a,t.data.data),Ds(a,!1)}).catch(function(e){Za(a,e.response.data.message),Ds(a,!1)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Tn=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devices:e.Device?e.Device.devices:[],isGettingDevices:!(!e.Device||!e.Device.isGettingDevices)&&e.Device.isGettingDevices,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},yn)(An),Un=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handleInputChange=function(e){var t=e.currentTarget.name;a.setState(Object(y.a)({},t,e.currentTarget.value))},a.onSelectCompany=function(e){a.setState({companyName:e.name,companyId:e.id})},a.onSelectDeviceBatch=function(e){a.setState({deviceBatch:e.batchId})},a.onSelectFormat=function(e){a.setState({choosenFormat:e.id})},a.isValidState=function(){a.setState({valid:a.state.isFileValid})},a.onDrop=function(e){a.setState({files:[].concat(Object(On.a)(a.state.files),Object(On.a)(e))}),e.forEach(function(e){}),a.setState({isFileValid:!0},a.isValidState)},a.handleUpload=function(){var e={companyId:a.state.companyName.toString(),deviceBatch:a.state.deviceBatch,fileformat:a.state.choosenFormat},t=a.state.files[0],n=new FormData;n.append("file",t),a.props.updateFirmware(e,n),a.setState({files:[]})},a.noPermissionOverlay=function(e){return s.a.createElement("div",{className:"overlay"},s.a.createElement("div",{className:"overlay-opacity",onClick:function(){}}),s.a.createElement(C.a,null,s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,xs:2}),s.a.createElement(N.a,{md:7,xs:8}," ",s.a.createElement("div",{className:"filter-child"},s.a.createElement("h4",null,e))),s.a.createElement(N.a,{md:2,xs:2}))))},a.state={companyId:a.props.userInfo?a.props.userInfo.customer_Id:-1,companyName:a.props.userInfo?a.props.userInfo.customerId:"",deviceBatch:"",devicesBatchList:[],formatsList:Es,choosenFormat:".bin",files:[],isFileValid:!1,valid:!1},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"content not-permitted"},s.a.createElement(C.a,{fluid:!0},this.props.componentPermissions&&this.props.componentPermissions.canInsert?"":this.noPermissionOverlay("Sorry, You don't have permission to update firmware"),s.a.createElement(R,{title:"Update Firmware",content:s.a.createElement("div",null,s.a.createElement(D.a,null,s.a.createElement("div",{id:"fileUploaderSection"},s.a.createElement(N.a,{md:3,xs:12},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select User",id:"split-button-devices-firmware-user",className:"dropdown-70 text-cut",list:this.props.companies&&this.props.companies,onSelectOption:this.onSelectCompany,tooltipID:"devices-firmware-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,xs:12},s.a.createElement(ha,{title:""!==this.state.deviceBatch?this.state.deviceBatch:"Select Device Batch",id:"split-button-devices-firmware-deviceBatch",className:"dropdown-70 text-cut",list:this.props.devicesBatchList&&this.props.devicesBatchList,onSelectOption:this.onSelectDeviceBatch,tooltipID:"devices-firmware-deviceBatch",label:"Device Batch",direction:"bottom",required:!0,menuItemIdkey:"batchId",menuItemIdName:"batchName"})),s.a.createElement(N.a,{md:3,xs:12},s.a.createElement(ha,{title:""!==this.state.choosenFormat?this.state.choosenFormat:"Choose File Format",id:"split-button-devices-firmware-fileType",className:"dropdown-70 text-cut",list:this.state.formatsList,onSelectOption:this.onSelectFormat,tooltipID:"devices-firmware-fileType",label:"File Format",direction:"bottom",menuItemIdkey:"id",menuItemIdName:"value"})),s.a.createElement(N.a,{md:3,xs:12,className:"text-right pd-22"},s.a.createElement(Dn.a,{"data-tip":!0,"data-for":"file-select-btn",className:"filedropzone  "+(-1==this.state.companyId||""==this.state.deviceBatch||this.state.files.length>=1||this.props.isUploadingFirmware?"disabled":"buttonColor"),multiple:!1,onDrop:this.onDrop,accept:".bin",disabled:!!(-1==this.state.companyId||""==this.state.deviceBatch||this.state.files.length>=1||this.props.isUploadingFirmware)},s.a.createElement("i",{className:"fa fa-file-text-o","aria-hidden":"true"})," Select File"),s.a.createElement(fa.a,{id:"file-select-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Select Batch File")),s.a.createElement(G,{"data-tip":!0,onClick:this.handleUpload,"data-for":"file-upload-btn",className:"upload-btn buttonColor "+(this.state.files.length<1||this.props.isUploadingFirmware?"disabledBtn":""),disabled:!!(this.state.files.length<1||this.props.isUploadingFirmware)},s.a.createElement("i",{className:"fa fa-upload","aria-hidden":"true"})," Update"),s.a.createElement(fa.a,{id:"file-upload-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Update Firmware"))))),s.a.createElement("div",null,s.a.createElement(N.a,{md:12,xs:12,className:"file-place-holder"},this.state.files.length?this.state.files.map(function(t){return s.a.createElement("div",{className:"ui card file-card"},s.a.createElement("div",{className:"content"},s.a.createElement(N.a,{md:12,xs:12,className:"remove-padding-left remove-padding-right"},s.a.createElement(N.a,{md:2,xs:3,className:"remove-padding-left remove-padding-right"}," ",s.a.createElement("i",{className:"fa fa-cogs file-icon"})),s.a.createElement(N.a,{md:9,xs:7,className:"mt-5 text-wrap"}," ",s.a.createElement("span",null,t.name)),s.a.createElement(N.a,{md:1,xs:2,className:"mt-5 float-right clearBtn",onClick:function(){e.setState({files:[]})}}," ",s.a.createElement("i",{className:"fa fa-times"})))))}):this.props.isUploadingFirmware?s.a.createElement(ua,null):s.a.createElement("div",{className:"pd-50"},"Uploaded Files will be shown here"))),s.a.createElement("div",{className:"clearfix"}))})))}}]),t}(s.a.Component),Ln={getAllCompanies:ht,getDeviceBatchList:$a,updateFirmware:function(e,t){return function(){var a=Object(h.a)(f.a.mark(function a(n){return f.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:sn(n),Ba(n,"not assigned"),Is.Device().UpdateFirmware(e,t).then(function(e){on(n,e.data.data),K.b.success("Firmware Updated!",{position:K.b.POSITION.BOTTOM_RIGHT})}).catch(function(e){ln(n),K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT})});case 3:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()}},wn=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],addDeviceAlertStatus:e.Alerts?e.Alerts.addDeviceAlertStatus:"not assigned",isUploadingFirmware:!!e.Device&&e.Device.isUploadingFirmware,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},Ln)(Un),Mn=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).getTwinIFrame=function(e){var t=a.props.userInfo.customerId;return s.a.createElement("iframe",{src:"".concat(Me,"/").concat(t,"?mode=").concat(e)})},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.componentPermissions;return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{title:"Distributor Digital twin",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:e.canUpdate&&e.canView?this.getTwinIFrame("edit"):e.canView?this.getTwinIFrame("view"):s.a.createElement("div",{className:"no-permission"},"Sorry, You don't have permissions to view this site")})))))}}]),t}(s.a.Component),Fn=Object(ve.b)(function(e){return{permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User.UserInfo&&e.User.UserInfo?e.User.UserInfo:null}},{})(Mn);!function(e){e.GET_ALL_USAGEREPORT="GET_ALL_USAGEREPORT",e.GET_ALL_USAGEREPORT_SUCCESS="GET_ALL_USAGEREPORT_SUCCESS",e.GET_ALL_USAGEREPORT_FAILED="GET_ALL_USAGEREPORT_FAILED",e.GET_ALARMS_REPORT="GET_ALARMS_REPORT",e.GET_ALARMS_REPORT_SUCCESS="GET_ALARMS_REPORT_SUCCESS",e.GET_ALARMS_REPORT_FAILED="GET_ALARMS_REPORT_FAILED",e.GET_MAINTENANCE_REPORT="GET_MAINTENANCE_REPORT",e.GET_MAINTENANCE_REPORT_SUCCESS="GET_MAINTENANCE_REPORT_SUCCESS",e.GET_MAINTENANCE_REPORT_FAILED="GET_MAINTENANCE_REPORT_FAILED",e.GET_INVERTER_DETAILS="GET_INVERTER_DETAILS",e.GET_INVERTER_DETAILS_SUCCESS="GET_INVERTER_DETAILS_SUCCESS",e.GET_INVERTER_DETAILS_FAILED="GET_INVERTER_DETAILS_FAILED",e.GET_ENERGY_CONSUMPTION_DATA="GET_ENERGY_CONSUMPTION_DATA",e.GET_ENERGY_CONSUMPTION_SUCCESS="GET_ENERGY_CONSUMPTION_SUCCESS",e.GET_ENERGY_CONSUMPTION_FAILED="GET_ENERGY_CONSUMPTION_FAILED",e.CLEAR_REPORT_DATA="CLEAR_REPORT_DATA"}(za||(za={}));var xn,jn=function(e){e({type:za.GET_ALL_USAGEREPORT})},Gn=function(e,t){e({type:za.GET_ALL_USAGEREPORT_SUCCESS,payload:t})},Bn=function(e){e({type:za.GET_ALL_USAGEREPORT_FAILED})},kn=function(e){e({type:za.GET_MAINTENANCE_REPORT})},zn=function(e,t){(null===t||t&&0===t.length)&&K.b.warn("No Data Available for selected filters ",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_MAINTENANCE_REPORT_SUCCESS,payload:t})},Hn=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_MAINTENANCE_REPORT_FAILED})},Wn=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a({type:za.CLEAR_REPORT_DATA,payload:e});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Vn=function(e){e({type:za.GET_ALARMS_REPORT})},Yn=function(e,t){e({type:za.GET_ALARMS_REPORT_SUCCESS,payload:t})},qn=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e(Wn(De)),e({type:za.GET_ALARMS_REPORT_FAILED})},Kn=function(e){e({type:za.GET_INVERTER_DETAILS})},Xn=function(e,t){0==t.length&&K.b.warn("No Data Available for selected filters ",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_INVERTER_DETAILS_SUCCESS,payload:t})},Qn=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_INVERTER_DETAILS_FAILED})},Jn=function(e){e({type:za.GET_ENERGY_CONSUMPTION_DATA})},Zn=function(e,t){0==t.length&&K.b.warn("No Data Available for selected filters ",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_ENERGY_CONSUMPTION_SUCCESS,payload:t})},$n=function(e,t){K.b.error(t,{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:za.GET_ENERGY_CONSUMPTION_FAILED})},er=function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).isReportButtonDisabled=function(){var e=a.state,t=e.companyId,n=e.deviceId,r=e.date;return""===n||-1===t||""===r},a.componentWillReceiveProps=function(e){JSON.stringify(e.usageReport)!=JSON.stringify(a.state.usageReport)&&-1!=a.state.companyId&&""!=a.state.deviceId&&""!=a.state.date&&a.setState({usageReport:e.usageReport})},a.onSelectCompany=function(e){a.setState({companyName:e.name,companyId:e.id,deviceName:"",date:"",selectedCustomerId:e.customerId})},a.onSelectDevice=function(e){var t=e.deviceId,n=e.name;a.setState({deviceName:n,deviceId:t})},a.handleInputChange=function(e){a.setState({date:e.currentTarget.value})},a.handleSubmit=function(e){var t="";if(e.preventDefault(),""!=a.state.companyName&&""!=a.state.deviceName&&""!=a.state.date){var n=Object(p.a)({},a.state);n.days=7,n.emailId=a.props.userInfo.userId,a.props.GetUsageReport(n)}else""===a.state.companyName?t="Please select User":""===a.state.deviceName?t="Please select Device":""===a.state.date&&(t="Please select Date"),K.b.warn(t,{position:K.b.POSITION.BOTTOM_RIGHT})},a.getDisplayModeButton=function(){var e=Jr;return s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:e.filter(function(e){return e.mode===a.state.displayMode})[0].name,id:"display-mode-dd",className:"mr-20"}," ",e.map(function(e){return s.a.createElement(Ea.a,{eventKey:e.mode,key:e.mode,onSelect:function(){return a.setState({displayMode:e.mode})}},e.name)}))},a.handleExport=function(){if(""!=a.state.companyName&&""!=a.state.deviceName&&""!=a.state.date){var e=Object(p.a)({},a.state);e.days=7,e.emailId=a.props.userInfo.userId,a.props.exportUsageReport(e)}else{K.b.warn("Please select required parameters to export data",{position:K.b.POSITION.BOTTOM_RIGHT})}};var n=ps(a.props.userInfo,a.props.companies);return a.state={companyName:n.name,deviceName:"",deviceId:"",date:"",companyId:n.id,lastUpdate:"no updates",displayMode:1,usageReport:null,selectedCustomerId:n.customerId},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devices&&0===this.props.devices.length&&this.props.getDevices()}},{key:"componentWillUnmount",value:function(){this.props.clearReportData(Re)}},{key:"componentDidUpdate",value:function(e){if(this.props!=e&&this.props.usageReport&&this.props.usageReport.labels&&this.props.usageReport.labels.length>0){var t="Usage report from "+this.props.usageReport.labels[0]+" to "+this.props.usageReport.labels[this.props.usageReport.labels.length-1];this.setState({lastUpdate:t})}}},{key:"render",value:function(){var e=this;console.log(this.state,this.props.devices);var t=-1!=this.state.companyId&&this.props.devices?this.props.devices.filter(function(t,a){return t.customerId===e.state.companyId}):[];return console.log(t,"Usage Report"),s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{id:"chartActivity",title:s.a.createElement("div",null,s.a.createElement("h5",null,"Device Usage ")),content:s.a.createElement("div",null,s.a.createElement(D.a,null,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement(N.a,{md:3,xs:6,className:"custom-dropdown"},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select User",disabled:this.props.isFetchingUsageReport,id:"split-button-pull-right-usagereport-user",className:"dropdown-80 text-cut",list:this.props.companies,onSelectOption:this.onSelectCompany,tooltipID:"reports-usagereport-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,xs:6,className:"custom-dropdown"},s.a.createElement(ha,{title:""!==this.state.deviceName?this.state.deviceName:"Select Device",disabled:this.props.isFetchingUsageReport,id:"split-button-pull-right-usagereport-device",className:"dropdown-80 text-cut",list:t,onSelectOption:this.onSelectDevice,tooltipID:"reports-usagereport-device",label:"Device",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name",defaultOption:""===this.state.companyName?"Select Company":"No Devices"})),s.a.createElement(N.a,{md:2,xs:12,className:""},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Select Date",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"date",value:this.state.date,onChange:function(t){return e.handleInputChange(t)},placeholder:"Select date"}))),s.a.createElement("span",{className:"float-right"},this.props.componentPermissions.canExport?s.a.createElement(N.a,{md:2,xs:6,className:"viewReportButton marg-top"},s.a.createElement(G,{fill:!0,className:"buttonColor",id:"exportToExcel",onClick:function(){return e.handleExport()},disabled:!(!this.isReportButtonDisabled()&&!this.props.isFetchingUsageReport)},"Export Data")):""),s.a.createElement("span",{className:"float-right"},s.a.createElement(N.a,{md:2,xs:6,className:"viewReportButton marg-top"},s.a.createElement(G,{fill:!0,className:"buttonColor",type:"submit",disabled:!(!this.isReportButtonDisabled()&&!this.props.isFetchingUsageReport)},s.a.createElement("i",{className:"fa fa-search searchIcon"}),"View Report"))))),s.a.createElement(D.a,null,s.a.createElement(N.a,null,s.a.createElement("div",null,null!==this.state.usageReport&&1==this.state.displayMode?s.a.createElement("div",{className:"graphical-report"},s.a.createElement(q.a,{options:Be(this.props.usageReport).options,series:Be(this.props.usageReport).series,type:"area",height:300})):0==this.state.displayMode?s.a.createElement("div",{className:"usageReportDiv"},"Feature Coming Soon. Please visit later"):!0===this.props.isFetchingUsageReport?s.a.createElement(ua,null):s.a.createElement("div",{className:"usageReportDiv"},"Select Company, Device & Date to see report")))))})))))}}]),t}(s.a.Component),tr={GetUsageReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:jn(a),ka(a,"not Assigned"),Is.Report().UsageReport(e).then(function(e){0===e.data.data.labels.length?K.b.warn("No Report found for selected option",{position:K.b.POSITION.BOTTOM_RIGHT}):K.b.success("Successful",{position:K.b.POSITION.BOTTOM_RIGHT}),Gn(a,e.data.data)}).catch(function(e){Bn(a),K.b.error(e.response.data.message,{position:K.b.POSITION.BOTTOM_RIGHT})});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getAllCompanies:ht,getDevices:hn,exportUsageReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Is.Report().ExportUsageReport(e).then(function(e){var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","file.csv"),document.body.appendChild(a),a.click()}).catch(function(e){console.log(e)});case 1:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},clearReportData:Wn},ar=Object(ve.b)(function(e){return{usageReport:e.Report?e.Report.usageReport:null,isLoading:!!e.User&&e.User.isLoading,userInfo:e.User?e.User.UserInfo:null,companies:e.Company?e.Company.CompaniesList:[],devices:e.Device?e.Device.deviceList:[],isFetchingUsageReport:!!e.Report&&e.Report.isFetchingUsageReport,getUsageReportStatus:e.Alerts?e.Alerts.getUsageReportStatus:"not Assigned",permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},tr)(er),nr=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).onSelectFilter=function(e){a.setState({typeFilter:e})},a.handleShow=function(e,t){var n=t.original;a.removeErrors(),a.setState({showModal:!0,selectedItem:{type:n.type,code:n.code,description:n.description,reasonAnalysis:n.reasonAnalysis,registerNumber:n.registerNumber}})},a.handleClose=function(){a.removeErrors(),a.setState({showModal:!1})},a.removeErrors=function(){a.setState({errors:{deviceName:""}})},a.handleSave=function(e){a.props.updateErrorCode(a.state.selectedItem)},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""==e[1].toString().trimLeft().trimRight()&&(t[e[0]]="Required",n=!1)}),n?a.setState({isDisabled:!1}):a.setState({errors:t,isDisabled:!0}),n},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name,s=e.currentTarget.value;""==s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({selectedItem:Object(p.a)({},a.state.selectedItem,Object(y.a)({},r,s)),errors:t,isDisabled:n})},a.getTable=function(e){var t=e;return s.a.createElement(Da.a,{minRows:t&&t.length>0?0:5,TheadComponent:function(){return null},PaginationComponent:function(e){return s.a.createElement(Ca,Object.assign({},e,{totalCount:a.props.errorCodesList?a.props.errorCodesList.length:0}))},SubComponent:function(e){return s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:16},s.a.createElement("div",{className:"errorCodeDetails"},s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom"}," ",s.a.createElement("span",null,"Register Parameter "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,e.original.code))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom"}," ",s.a.createElement("span",null,"Register Number "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,e.original.registerNumber))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom"}," ",s.a.createElement("span",null,"Reason Analysis "))),s.a.createElement(N.a,{className:"ml-3 reason-content",md:10,xs:12},s.a.createElement("span",null,e.original.reasonAnalysis))))))},columns:[{expander:!0,Expander:function(e){var t=e.isExpanded;Object(L.a)(e,["isExpanded"]);return s.a.createElement("div",null,t?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"})))}},{Header:"Description",accessor:"description"}],data:t,showPagination:!0,pageSize:a.state.pageSize,defaultPageSize:a.state.pageSize,className:"-highlight"})},a.handlePageSize=function(e){a.setState({pageSize:e})},a.state={showModal:!1,typeFilter:"Alarm",selectedItem:{type:"",code:"",registerNumber:"",description:"",reasonAnalysis:""},errors:{description:"",reasonAnalysis:""},pageSize:5},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.errorCodesList&&0===this.props.errorCodesList.length&&this.props.getErrorCodesList()}},{key:"componentWillReceiveProps",value:function(e){e.isUpdatingErrorCode||this.setState({showModal:!1})}},{key:"render",value:function(){var e=this,t=this.props.errorCodesList?this.props.errorCodesList.filter(function(e){return"Warning"==e.type}):[],a=this.props.errorCodesList?this.props.errorCodesList.filter(function(e){return"Alarm"==e.type}):[];return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("span",null,"Error Codes")," ",s.a.createElement(Ra,{classNames:"float-right-2",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize})),content:s.a.createElement("div",null,s.a.createElement("div",null,this.props.isGettingErrorCode?s.a.createElement(ua,null):s.a.createElement(Ia.a.Container,{id:"controlled-tab-example",activeKey:this.state.typeFilter,onSelect:function(t){return e.onSelectFilter(t)}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs"},s.a.createElement(Pa.a,{eventKey:"Alarm"},"Alarms ",s.a.createElement(Oa.a,null,a.length)),s.a.createElement(Pa.a,{eventKey:"Warning"},"Warnings  ",s.a.createElement(Oa.a,null,t.length)))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!1},s.a.createElement(Ia.a.Pane,{eventKey:"Alarm"},s.a.createElement(D.a,{id:"errorCodeTable"},s.a.createElement(N.a,{md:12},this.getTable(a)))),s.a.createElement(Ia.a.Pane,{eventKey:"Warning"},s.a.createElement(D.a,{id:"errorCodeTable"},s.a.createElement(N.a,{md:12},this.getTable(t))))))))))})))))}}]),t}(s.a.Component),rr={getErrorCodesList:cn,updateErrorCode:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ds(a,!0),pn(a),Is.Device().UpdateErrorCode(e).then(function(t){En(a,e)}).catch(function(e){fn(a)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},sr=Object(ve.b)(function(e){return{errorCodesList:e.Device&&e.Device.errorCodes?e.Device.errorCodes:[],isGettingErrorCode:!(!e.Device||!e.Device.isGettingErrorCode)&&e.Device.isGettingErrorCode,isUpdatingErrorCode:!(!e.Device||!e.Device.isUpdatingErrorCode)&&e.Device.isUpdatingErrorCode,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},rr)(nr),or=a(249),ir=a.n(or),lr=(a(145),function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).isReportButtonDisabled=function(){var e=a.state.selectedFilters,t=e.device,n=e.user,r=e.batch,s=e.date;return-1===t.id||-1===n.id||""===r||null===s||""===s},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.onSelectCompany=function(e){var t=a.state.selectedFilters;t.user.id=e.id,t.user.name=e.name,t.user.selectedCustomerId=e.customerId,t.device.id=-1,t.device.name="Select Device",a.setState({selectedFilters:t,isDisabled:!1})},a.onSelectDeviceBatch=function(e){var t=e.batchId,n=a.state.selectedFilters;n.batch=t,a.setState({selectedFilters:n})},a.onSelectDevice=function(e){var t=e.deviceId,n=e.name,r=a.state.selectedFilters;r.device.id=t,r.device.name=n,a.setState({selectedFilters:r})},a.handleDateChange=function(e){var t=a.state.selectedFilters,n=t.batch,r=(t.date,t.device),s=t.user;t.date=e.currentTarget.value;var o=null===e&&""===n&&-1===r.id&&-1===s.id;a.setState({selectedFilters:t,isDisabled:o})},a.getUserSpecificDevices=function(e){if(a.props.devices)return a.props.devices.filter(function(t){return t.customerId===e})},a.getAlarmWarningTable=function(e){var t=e;return s.a.createElement("div",{className:"content"},s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:t&&t.length>0?0:5,defaultPageSize:5,PaginationComponent:function(e){return s.a.createElement(Ca,Object.assign({},e,{totalCount:a.state.alarmReportData?a.state.alarmReportData.length:0}))},SubComponent:function(e){return s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:16},s.a.createElement("div",{className:"errorCodeDetails"},s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Register Parameter "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,e.original.code))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Register Number "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,e.original.registerNumber))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Reason Analysis "))),s.a.createElement(N.a,{className:"ml-3 reason-content",md:10,xs:12},s.a.createElement("span",null,e.original.reasonAnalysis))))))},columns:[{expander:!0,Expander:function(e){var t=e.isExpanded;Object(L.a)(e,["isExpanded"]);return s.a.createElement("div",null,t?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"})))}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Name")},accessor:"deviceName",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Id")},accessor:"deviceId",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Type")},accessor:"type",minWidth:100},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Error Date")},id:"timestamp",minWidth:150,accessor:function(e){var t="";return null!=e.timestamp&&(t=be()(e.timestamp).format("x")),t},Cell:function(e){return e.original.timestamp?be()(e.original.timestamp).format("MM/DD/YYYY"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.lastMaintenanceDate).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}}],data:t,showPagination:!0,pageSize:a.state.pageSize,filterable:!0,sorted:a.state.sort,onSortedChange:a.handleSort,defaultFilterMethod:Xr,className:"-highlight"}))},a.getReportFilters=function(){var e=a.getUserSpecificDevices(a.state.selectedFilters.user.id);return e=e||[],s.a.createElement(D.a,{id:""},s.a.createElement(N.a,{md:3,className:"remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.user.name?a.state.selectedFilters.user.name:"Select User",disabled:!1,id:"split-button-pull-right-alarmwarningreport-user",className:"dropdown-80 text-cut",list:a.props.companies,onSelectOption:a.onSelectCompany,tooltipID:"reports-alarmwarningreport-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,className:" remove-padding pull-left custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.batch?a.state.selectedFilters.batch:"Select Batch",disabled:!1,id:"split-button-pull-right-alarmwarningreport-batch",className:"dropdown-80 text-cut",list:a.props.devicesBatchList,onSelectOption:a.onSelectDeviceBatch,tooltipID:"reports-alarmwarningreport-batch",label:"Device Batch",direction:"bottom",required:!0,menuItemIdkey:"batchId",menuItemIdName:"batchId"})),s.a.createElement(N.a,{md:3,className:" remove-padding pull-left custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.device.name?a.state.selectedFilters.device.name:"Select Device",disabled:!1,id:"split-button-alarmwarningreport-device",className:"dropdown-80 text-cut",list:e,onSelectOption:a.onSelectDevice,tooltipID:"reports-alarmwarningreport-device",label:"Device",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name",defaultOption:""===a.state.selectedFilters.user.name?"Select Company":"No Devices"})),s.a.createElement(N.a,{md:3,className:"remove-padding custom-dropdown"},s.a.createElement("div",null,s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Select Date",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"date",value:a.state.selectedFilters.date,onChange:function(e){return a.handleDateChange(e)},placeholder:"Select date"})))),s.a.createElement(N.a,{md:12,xs:12,className:"float-right"},s.a.createElement("div",{id:"secondRow"},s.a.createElement(G,{disabled:!(!a.isReportButtonDisabled()&&!a.props.isGettingAlarmsReport),bsStyle:"warning",className:"float-right report-btn",onClick:function(){return a.getReportData()}},s.a.createElement("i",{className:"fa fa-search searchIcon"}),"View Report"))))},a.getReportData=function(){var e;-1!=(e={customerId:-1===a.state.selectedFilters.user.id?null:a.state.selectedFilters.user.selectedCustomerId,deviceId:-1===a.state.selectedFilters.device.id?null:a.state.selectedFilters.device.id,batchId:""===a.state.selectedFilters.batch?null:a.state.selectedFilters.batch,date:""===a.state.selectedFilters.date?null:a.state.selectedFilters.date}).customerId||""!=e.date?a.props.getAlarmAndWarningReport(e):K.b.warn("Please select required filter to generate report",{position:K.b.POSITION.BOTTOM_RIGHT})},a.displayData=function(e){return s.a.createElement(D.a,null,s.a.createElement(N.a,{id:"awreport"},a.getAlarmWarningTable(e)))},a.onSelectFilter=function(e){a.setState({selectedHistoryType:e})},a.getCodeObj=function(e){var t=a.props.errorCodesList&&a.props.errorCodesList.filter(function(t){return t.code===e});return t&&t.length?t[0]:null},a.retreiveTopAlarms=function(){var e=a.state.errorOccurrence;return e?e=e.map(function(e){var t=a.state.alarmReportData.filter(function(t){return t.code===e.code});return e.count=t.length,e}).filter(function(e){return e.count>0}).sort(function(e,t){return e.count>t.count?-1:t.count>e.count?1:0}).slice(0,3).map(function(e){var t=a.getCodeObj(e.code);return t.occurence=e.count,t}):[]},a.getCollapsibleHeader=function(){return s.a.createElement("div",null,s.a.createElement("h6",{className:"clickable collapsible-header"},"Most Occurred Alarms & Warnings ",a.state.isExpanded?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"}))))},a.handlePageSize=function(e){a.setState({pageSize:e})},a.getDisplayModeButton=function(){var e=Jr;return s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:e.filter(function(e){return e.mode===a.state.displayMode})[0].name,id:"display-mode-dd"}," ",e.map(function(e){return s.a.createElement(Ea.a,{eventKey:e.mode,key:e.mode,onSelect:function(){return a.setState({displayMode:e.mode})}},e.name)}))},a.AlarmWarningSection=function(){var e=a.props.alarmReportData?a.props.alarmReportData:[],t=ke(e);return s.a.createElement("div",{className:"graphical-report"},"  ",s.a.createElement("div",null,s.a.createElement(q.a,{options:t.options,series:t.series,height:300})))};var n=ps(a.props.userInfo,a.props.companies);return a.state={selectedFilters:{user:{id:n.id,name:n.name,selectedCustomerId:n.customerId},device:{id:-1,name:""},batch:"",date:""},selectedHistoryType:"Alarm",alarmReportData:[],isDisabled:!0,errorOccurrence:[],isExpanded:!1,sort:[],pageSize:5,displayMode:0},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearAlarmReportData(De)}},{key:"componentWillMount",value:function(){rs(kr,this.props.permissions,this.props.location.pathname)||this.props.history.push(Ae),this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devices&&0===this.props.devices.length&&this.props.getDevices(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList(),this.props.errorCodesList&&0===this.props.errorCodesList.length&&this.props.getErrorCodesList()}},{key:"componentWillReceiveProps",value:function(e){if(e.alarmReportData.length>=0&&this.props.errorCodesList&&this.props.errorCodesList.length>=0){var t=[];t=this.props.errorCodesList.map(function(e){return{code:e.code,count:0}}),t=(t=us(t,t,function(e,t){return e.code===t.code})).map(function(t){var a=e.alarmReportData.filter(function(e){return e.code===t.code});return t.count=a.length,t}).filter(function(e){return e.count>0}).sort(function(e,t){return e.count>t.count?-1:t.count>e.count?1:0}).slice(0,3),this.setState({errorOccurrence:t,alarmReportData:e.alarmReportData})}}},{key:"render",value:function(){var e=this,t=this.state.alarmReportData?this.state.alarmReportData.filter(function(e){return"Warning"===e.type}):[],a=this.state.alarmReportData?this.state.alarmReportData.filter(function(e){return"Alarm"===e.type}):[],n=this.retreiveTopAlarms();return s.a.createElement("div",{className:"content"},s.a.createElement("div",null),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("h5",null,"Device Alarms & Warnings  ",s.a.createElement("span",{className:"float-right"},this.getDisplayModeButton()))),content:s.a.createElement("div",null,s.a.createElement("div",null,this.getReportFilters()),this.props.isGettingAlarmsReport?s.a.createElement(ua,null):this.state.alarmReportData&&0===this.state.alarmReportData.length?s.a.createElement("div",{className:"alarmReportDiv no-data"},"Select Filters to Generate Report"):1===this.state.displayMode?s.a.createElement("div",null,this.AlarmWarningSection()):s.a.createElement("div",{className:"alarmReportDiv"},s.a.createElement("div",null,s.a.createElement(ir.a,{trigger:this.getCollapsibleHeader(),onOpening:function(){e.setState({isExpanded:!0})},onClosing:function(){e.setState({isExpanded:!1})}},s.a.createElement("div",{className:"collap-content"},n.map(function(e){return s.a.createElement("div",null,s.a.createElement("i",{className:"Alarm"===e.type?" fa fa-circle red-text":" fa fa-circle yellow-text"}),"".concat(e.description," (").concat(e.occurence,")"))})))),s.a.createElement(Ia.a.Container,{id:"alarm-warning-report",activeKey:this.state.selectedHistoryType,onSelect:function(t){return e.onSelectFilter(t)}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs"},s.a.createElement(Pa.a,{eventKey:"Alarm"},"Alarms ",s.a.createElement(Oa.a,null,a.length)),s.a.createElement(Pa.a,{eventKey:"Warning"},"Warnings  ",s.a.createElement(Oa.a,null,t.length)),s.a.createElement(Ra,{classNames:"float-right-2",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize}))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!1},s.a.createElement(Ia.a.Pane,{eventKey:"Alarm"},this.displayData(a)),s.a.createElement(Ia.a.Pane,{eventKey:"Warning"},this.displayData(t))))))))})))))}}]),t}(s.a.Component)),cr={getAllCompanies:ht,getDeviceBatchList:$a,getDevices:hn,getAlarmAndWarningReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Vn(a),Is.Report().GetAlarmAndWarningReportData(e).then(function(e){Yn(a,e.data.data)}).catch(function(e){qn(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},getErrorCodesList:cn,clearAlarmReportData:Wn},mr=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],devices:e.Device&&e.Device.deviceList?e.Device.deviceList:[],alarmReportData:e.Report&&e.Report.alarmReportData?e.Report.alarmReportData:[],isGettingAlarmsReport:!!e.Report&&e.Report.isGettingAlarmsReport,errorCodesList:e.Device&&e.Device.errorCodes?e.Device.errorCodes:[],isGettingErrorCode:!(!e.Report||!e.Device.isGettingErrorCode)&&e.Device.isGettingErrorCode,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},cr)(lr),dr=function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).onSelectCompany=function(e){var t=a.state.selectedFilters;t.user.id=e.id,t.user.name=e.name,t.user.selectedCustomerId=e.customerId,t.device.id=-1,t.device.name="Select Device",a.setState({selectedFilters:t,isDisabled:!1})},a.onSelectDevice=function(e){var t=e.deviceId,n=e.name,r=a.state.selectedFilters;r.device.id=t,r.device.name=n,a.setState({selectedFilters:r})},a.getUserSpecificDevices=function(e){if(a.props.devices)return a.props.devices.filter(function(t){return t.customerId===e})},a.getTable=function(e){var t=a.state.inverterData;return s.a.createElement("div",{className:"content"},s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:5,defaultPageSize:5,PaginationComponent:function(e){return s.a.createElement(Ca,Object.assign({},e,{totalCount:a.state.inverterData?a.state.inverterData.length:0}))},collapseOnSortingChange:!0,SubComponent:function(e){var t=e.original;return s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12,xs:16},s.a.createElement("div",{className:"errorCodeDetails"},s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Alarm "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,t.alarm?t.alarm:"-"))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Warning "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,t.warning?t.warning:"-"))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Title "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,t.title?t.title:"-"))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Code "))),s.a.createElement(N.a,{className:"ml-3",md:10,xs:12},s.a.createElement("span",null,t.code?t.code:"-"))),s.a.createElement("div",{className:""},s.a.createElement(N.a,{md:2,xs:4},s.a.createElement(Oa.a,{className:"badge-custom "}," ",s.a.createElement("span",null,"Reason Analysis "))),s.a.createElement(N.a,{className:"ml-3 reason-content",md:10,xs:12},s.a.createElement("span",null,t.reasonAnalysis?t.reasonAnalysis:"-"))))))},columns:[{expander:!0,Expander:function(e){var t=e.isExpanded;Object(L.a)(e,["isExpanded"]);return s.a.createElement("div",null,t?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"})))}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Date & Time")},id:"timestamp",minWidth:150,style:Qr,accessor:function(e){var t="";return null!=e.timestamp&&(t=be()(e.timestamp).format("x")),t},Cell:function(e){return e.original.timestamp?be()(e.original.timestamp).format("MM/DD/YYYY hh:mm"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.timestamp).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Output Frequency")},accessor:"outputFrequency",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Output Current")},accessor:"outputCurrent",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Output Voltage")},accessor:"outputVoltage",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Output Power")},accessor:"outputPower",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"RPM")},accessor:"rpm",minWidth:100},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Speed")},accessor:"speed",minWidth:100}],data:t,showPagination:!0,pageSize:a.state.pageSize,filterable:!0,sorted:a.state.sort,onSortedChange:a.handleSort,defaultFilterMethod:Xr,className:"-highlight"}))},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.handleDateChange=function(e){var t=a.state.selectedFilters,n=t.device,r=t.user;t.date=e.currentTarget.value;var s=null===e&&-1===n.id&&-1===r.id;a.setState({selectedFilters:t,isDisabled:s})},a.getReportFilters=function(){var e=a.getUserSpecificDevices(a.state.selectedFilters.user.id);return e=e||[],s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,className:"remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.user.name?a.state.selectedFilters.user.name:"Select User",disabled:!1,id:"split-button-inverter-user",className:"dropdown-80 text-cut",list:a.props.companies,onSelectOption:a.onSelectCompany,tooltipID:"reports-inverter-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,className:" remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.device.name?a.state.selectedFilters.device.name:"Select Device",disabled:!1,id:"split-button-inverter-device",className:"dropdown-80 text-cut",list:e,onSelectOption:a.onSelectDevice,tooltipID:"reports-inverter-device",label:"Device",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name",defaultOption:""===a.state.selectedFilters.user.name?"Select Company":"No Devices"})),s.a.createElement(N.a,{md:3,className:" remove-padding custom-dropdown"},s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Select Date",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"date",value:a.state.selectedFilters.date,onChange:function(e){return a.handleDateChange(e)},placeholder:"Select date"}))),s.a.createElement(N.a,{md:3,className:"custom-dropdown float-left viewReportButton marg-top"},s.a.createElement("div",null,s.a.createElement(G,{disabled:!(!a.isReportButtonDisabled()&&!a.props.isGettingInverterDetails),bsStyle:"warning",className:"float-left report-btn",onClick:function(){return a.getReportData()}},s.a.createElement("i",{className:"fa fa-search searchIcon"}),"View Report"))))},a.isReportButtonDisabled=function(){var e=a.state.selectedFilters,t=e.device,n=e.user,r=e.date;return-1===t.id||-1===n.id||""===r},a.getReportData=function(){var e;null!=(e={customerId:-1==a.state.selectedFilters.user.id?null:a.state.selectedFilters.user.selectedCustomerId,deviceId:-1==a.state.selectedFilters.device.id?null:a.state.selectedFilters.device.id,date:""===a.state.selectedFilters.date?null:a.state.selectedFilters.date}).customerId&&null!=e.deviceId&&""!=e.date?a.props.getInverterData(e):K.b.warn("Please select required filters to generate report",{position:K.b.POSITION.BOTTOM_RIGHT})},a.displayData=function(e){return s.a.createElement(D.a,null,s.a.createElement(N.a,{id:"awreport"},a.getTable(e)))},a.handlePageSize=function(e){a.setState({pageSize:e})},a.getDisplayModeButton=function(){var e=Jr;return s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:e.filter(function(e){return e.mode===a.state.displayMode})[0].name,id:"display-mode-dd",className:"mr-20"}," ",e.map(function(e){return s.a.createElement(Ea.a,{eventKey:e.mode,key:e.mode,onSelect:function(){return a.setState({displayMode:e.mode})}},e.name)}))};var n=ps(a.props.userInfo,a.props.companies);return a.state={selectedFilters:{user:{id:n.id,name:n.name,selectedCustomerId:n.customerId},date:"",device:{id:-1,name:""}},inverterData:[],isDisabled:!0,sort:[],pageSize:5,displayMode:0},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devices&&0===this.props.devices.length&&this.props.getDevices()}},{key:"componentWillReceiveProps",value:function(e){e.inverterData&&this.setState({inverterData:e.inverterData})}},{key:"componentWillUnmount",value:function(){this.props.clearInverterData(Ce)}},{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement("div",null),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("h5",null,"PLC Inverter Details  ",s.a.createElement("span",{className:"float-right hidden"},this.getDisplayModeButton()))),content:s.a.createElement("div",null,s.a.createElement("div",null,this.getReportFilters()),this.props.isGettingInverterDetails?s.a.createElement(ua,null):0==this.state.inverterData.length?s.a.createElement("div",{className:"alarmReportDiv no-data"},"Select Filters to Generate Report"):0==this.state.displayMode?s.a.createElement("div",null,s.a.createElement(D.a,null," ",s.a.createElement(Ra,{classNames:"float-right-2 mr-20",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize})),s.a.createElement("div",null,this.displayData())):s.a.createElement("div",{className:"alarmReportDiv no-data"},"Feature coming soon! Please visit later"))})))))}}]),t}(s.a.Component),ur={getAllCompanies:ht,getDevices:hn,getInverterData:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Kn(a),Is.Report().GetInverterDetails(e).then(function(e){Xn(a,e.data.data)}).catch(function(e){Qn(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},clearInverterData:Wn},pr=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devices:e.Device&&e.Device.deviceList?e.Device.deviceList:[],inverterData:e.Report&&e.Report.inverterData?e.Report.inverterData:[],isGettingInverterDetails:!(!e.Report||!e.Report.isGettingInverterDetails)&&e.Report.isGettingInverterDetails,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},ur)(dr),Er=function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).isReportButtonDisabled=function(){var e=a.state.selectedFilters,t=e.device,n=e.user,r=e.date;return-1===t.id||-1===n.id||null===r||""===r},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.onSelectCompany=function(e){var t=a.state.selectedFilters;t.user.id=e.id,t.user.name=e.name,t.user.selectedCustomerId=e.customerId,t.device.id=-1,t.device.name="Select Device",a.setState({selectedFilters:t,isDisabled:!1})},a.onSelectDevice=function(e){var t=e.deviceId,n=e.name,r=a.state.selectedFilters;r.device.id=t,r.device.name=n,a.setState({selectedFilters:r})},a.onDateTimeChange=function(e){var t=a.state.selectedFilters;t.date=e.currentTarget.value,a.setState({selectedFilters:t})},a.getUserSpecificDevices=function(e){if(a.props.devices)return a.props.devices.filter(function(t){return t.customerId===e})},a.getReportTable=function(){var e=a.state.reportData;return s.a.createElement("div",{className:"content"},s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:e&&e.length>0?0:5,defaultPageSize:5,PaginationComponent:function(e){return s.a.createElement(Ca,Object.assign({},e,{totalCount:a.state.reportData?a.state.reportData.length:0}))},columns:[{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Name")},accessor:"deviceName",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Id")},accessor:"deviceId",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Consumption Date")},accessor:"date",minWidth:150},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Power Consumption")},accessor:"powerConsumption",minWidth:150}],data:e,showPagination:!0,pageSize:a.state.pageSize,filterable:!0,sorted:a.state.sort,onSortedChange:a.handleSort,defaultFilterMethod:Xr,className:"-highlight"}))},a.getReportFilters=function(){var e=a.getUserSpecificDevices(a.state.selectedFilters.user.id);return e=e||[],s.a.createElement(D.a,{id:"report-dd"},s.a.createElement(N.a,{md:3,className:"remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.user.name?a.state.selectedFilters.user.name:"Select User",disabled:!1,id:"split-button-pull-right-energy-user",className:"dropdown-80 text-cut",list:a.props.companies,onSelectOption:a.onSelectCompany,tooltipID:"reports-energy-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,className:" remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.device.name?a.state.selectedFilters.device.name:"Select Device",disabled:!1,id:"split-button-energy-device",className:"dropdown-80 text-cut",list:e,onSelectOption:a.onSelectDevice,tooltipID:"reports-energy-device",label:"Device",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name",defaultOption:""===a.state.selectedFilters.user.name?"Select Company":"No Devices"})),s.a.createElement(N.a,{md:2,className:"custom-dropdown  remove-padding"},s.a.createElement("div",null,s.a.createElement("div",null,s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Select Date ",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"date",value:a.state.selectedFilters.date,onChange:function(e){return a.onDateTimeChange(e)},placeholder:"Select date"}))))),s.a.createElement(N.a,{md:2,className:"report-btn-container"},s.a.createElement("div",null,s.a.createElement(G,{disabled:!(!a.isReportButtonDisabled()&&!a.props.isGettingEnergyDetails),bsStyle:"warning",className:"float-right report-btn",onClick:function(){return a.getReportData()}},s.a.createElement("i",{className:"fa fa-search searchIcon"}),"View Report"))))},a.getReportData=function(){var e="";if(-1!=a.state.selectedFilters.user.id&&-1!=a.state.selectedFilters.device.id&&""!=a.state.selectedFilters.date){var t;t={customerId:a.state.selectedFilters.user.selectedCustomerId,deviceId:a.state.selectedFilters.device.id,date:a.state.selectedFilters.date},a.props.getEnergyReport(t)}else-1===a.state.selectedFilters.user.id?e="Please select User":-1===a.state.selectedFilters.device.id?e="Please select Device":""===a.state.selectedFilters.date&&(e="Please select Date"),K.b.warn(e,{position:K.b.POSITION.BOTTOM_RIGHT})},a.displayData=function(){return s.a.createElement(D.a,null,s.a.createElement(N.a,{id:"awreport"},a.getReportTable()))},a.handlePageSize=function(e){a.setState({pageSize:e})},a.getDisplayModeButton=function(){var e=Jr;return s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:e.filter(function(e){return e.mode===a.state.displayMode})[0].name,id:"display-mode-dd",className:"mr-20"}," ",e.map(function(e){return s.a.createElement(Ea.a,{eventKey:e.mode,key:e.mode,onSelect:function(){return a.setState({displayMode:e.mode})}},e.name)}))};var n=ps(a.props.userInfo,a.props.companies);return a.state={selectedFilters:{user:{id:n.id,name:n.name,selectedCustomerId:n.customerId},device:{id:-1,name:""},batch:"",date:""},reportData:[],isDisabled:!0,isExpanded:!1,sort:[],pageSize:5,displayMode:0},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearReportData(_e)}},{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devices&&0===this.props.devices.length&&this.props.getDevices(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList()}},{key:"componentWillReceiveProps",value:function(e){e.reportData&&this.setState({reportData:e.reportData})}},{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement("div",null),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("h5",null,"Device Energy Consumption ",s.a.createElement("span",{className:"float-right hidden"},this.getDisplayModeButton()))),content:s.a.createElement("div",null,s.a.createElement("div",null,this.getReportFilters()),this.props.isGettingEnergyDetails?s.a.createElement(ua,null):0==this.state.reportData.length?s.a.createElement("div",{className:"alarmReportDiv no-data"},"Select Filters to Generate Report"):0==this.state.displayMode?s.a.createElement("div",null,s.a.createElement(D.a,null," ",s.a.createElement(Ra,{classNames:"float-right-2 mr-20",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize})),s.a.createElement("div",null,this.displayData())):s.a.createElement("div",{className:"alarmReportDiv no-data"},"Feature Coming Soon! Please visit later"))})))))}}]),t}(s.a.Component),fr={getAllCompanies:ht,getDeviceBatchList:$a,getDevices:hn,getEnergyReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Jn(a),Is.Report().GetEnergyConsumptionReport(e).then(function(e){Zn(a,e.data.data)}).catch(function(e){$n(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},clearReportData:Wn},hr=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],devices:e.Device&&e.Device.deviceList?e.Device.deviceList:[],reportData:e.Report&&e.Report.energyConsumptionReportData?e.Report.energyConsumptionReportData:[],isGettingEnergyDetails:!!e.Report&&e.Report.isGettingEnergyDetails,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},fr)(Er),gr=function(e){function t(e){var a;Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).isReportButtonDisabled=function(){var e=a.state.selectedFilters,t=e.device,n=e.user,r=e.batch,s=e.date;return-1===t.id||-1===n.id||""===r||""===s},a.onSelectCompany=function(e){var t=a.state.selectedFilters;t.user.id=e.id,t.user.name=e.name,t.user.selectedCustomerId=e.customerId,t.device.id=-1,t.device.name="Select Device",a.setState({selectedFilters:t,isDisabled:!1})},a.onSelectDeviceBatch=function(e){var t=e.batchId,n=a.state.selectedFilters;n.batch=t,a.setState({selectedFilters:n})},a.onSelectDevice=function(e){var t=e.deviceId,n=e.name,r=a.state.selectedFilters;r.device.id=t,r.device.name=n,a.setState({selectedFilters:r})},a.handleDateChange=function(e){var t=a.state.selectedFilters,n=t.batch,r=(t.date,t.device),s=t.user;t.date=e.currentTarget.value;var o=null===e&&""===n&&null===r.id&&-1===s.id;a.setState({selectedFilters:t,isDisabled:o})},a.getUserSpecificDevices=function(e){return a.props.devices.filter(function(t){return t.customerId===e})},a.handlePageSize=function(e){a.setState({pageSize:e})},a.getMaintenanceDataTable=function(){return s.a.createElement("div",{className:"content"},s.a.createElement(Da.a,{noDataText:"No Data Available",minRows:a.state.maintenanceReportData&&a.state.maintenanceReportData.length>0?0:5,defaultPageSize:5,PaginationComponent:Ca,columns:[{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Name")},accessor:"deviceName",minWidth:130},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Id")},accessor:"deviceId",minWidth:130},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Device Status")},accessor:"deviceStatus",minWidth:130},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Usage Hours")},accessor:"runningHours",minWidth:130},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Last Maintenance")},id:"lastMaintenanceDate",minWidth:150,accessor:function(e){var t="";return null!=e.lastMaintenanceDate&&(t=be()(e.lastMaintenanceDate).format("x")),t},Cell:function(e){return e.original.lastMaintenanceDate?be()(e.original.lastMaintenanceDate).format("MM/DD/YYYY"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.lastMaintenanceDate).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Expected Maintenance")},id:"expectedMaintenanceDate",minWidth:150,accessor:function(e){var t="";return null!=e.expectedMaintenanceDate&&(t=be()(e.expectedMaintenanceDate).format("x")),t},Cell:function(e){return e.original.expectedMaintenanceDate?be()(e.original.expectedMaintenanceDate).format("MM/DD/YYYY"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.expectedMaintenanceDate).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}}],data:a.state.maintenanceReportData,showPagination:!0,filterable:!0,sorted:a.state.sort,onSortedChange:a.handleSort,defaultFilterMethod:Xr,pageSize:a.state.pageSize,className:"-highlight"}))},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.getReportFilters=function(){var e=a.getUserSpecificDevices(a.state.selectedFilters.user.id);return s.a.createElement(D.a,null,s.a.createElement(N.a,{md:3,className:"remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.user.name?a.state.selectedFilters.user.name:"Select User",disabled:!1,id:"split-button-pull-right-maintenancereport-user",className:"dropdown-80 text-cut",list:a.props.companies,onSelectOption:a.onSelectCompany,tooltipID:"reports-maintenancereport-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"})),s.a.createElement(N.a,{md:3,className:" remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.batch?a.state.selectedFilters.batch:"Select Batch",disabled:!1,id:"split-button-pull-right-maintenancereport-batch",className:"dropdown-80 text-cut",list:a.props.devicesBatchList,onSelectOption:a.onSelectDeviceBatch,tooltipID:"reports-maintenancereport-batch",label:"Device Batch",direction:"bottom",required:!0,menuItemIdkey:"batchId",menuItemIdName:"batchId"})),s.a.createElement(N.a,{md:3,className:" remove-padding custom-dropdown"},s.a.createElement(ha,{title:""!==a.state.selectedFilters.device.name?a.state.selectedFilters.device.name:"Select Device",disabled:!1,id:"split-button-maintenancereport-device",className:"dropdown-80 text-cut",list:e,onSelectOption:a.onSelectDevice,tooltipID:"reports-maintenancereport-device",label:"Device",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name",defaultOption:""===a.state.selectedFilters.user.name?"Select Company":"No Devices"})),s.a.createElement(N.a,{md:3,className:"custom-dropdown remove-padding"},s.a.createElement("div",null,s.a.createElement($e.a,null,s.a.createElement(et.a,null,"Select Date",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"date",value:a.state.selectedFilters.date,onChange:function(e){return a.handleDateChange(e)},placeholder:"Select date"})))),s.a.createElement(N.a,{md:12,xs:12,className:"float-right"},s.a.createElement("div",{id:"secondRow"},s.a.createElement(G,{bsStyle:"warning",className:"float-right report-btn",onClick:function(){return a.getReportData()},disabled:a.isReportButtonDisabled()},s.a.createElement("i",{className:"fa fa-search searchIcon"}),"View Report"))))},a.getReportData=function(){var e;e={customerId:-1===a.state.selectedFilters.user.id?null:a.state.selectedFilters.user.selectedCustomerId,deviceId:-1===a.state.selectedFilters.device.id?null:a.state.selectedFilters.device.id,batchId:""===a.state.selectedFilters.batch?null:a.state.selectedFilters.batch,date:null===a.state.selectedFilters.date?null:a.state.selectedFilters.date},a.props.getMaintenanceReport(e)},a.displayData=function(){return s.a.createElement(D.a,null,s.a.createElement(N.a,null,a.getMaintenanceDataTable()))},a.getCollapsibleHeader=function(){return s.a.createElement("div",null,s.a.createElement("h6",{className:"clickable collapsible-header"},"Devices to be maintained ",a.state.isExpanded?s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-down fa-xs"})):s.a.createElement("span",null,s.a.createElement("i",{className:"fa fa-angle-right fa-xs"}))))},a.getDisplayModeButton=function(){var e=Jr;return s.a.createElement(_a.a,{pullRight:!0,bsSize:"xsmall",title:e.filter(function(e){return e.mode===a.state.displayMode})[0].name,id:"display-mode-dd",className:"mr-20"}," ",e.map(function(e){return s.a.createElement(Ea.a,{eventKey:e.mode,key:e.mode,onSelect:function(){return a.setState({displayMode:e.mode})}},e.name)}))},a.maintenanceGraphicalSection=function(){var e=a.props.maintenanceReportData?a.props.maintenanceReportData:[],t=We(e);return s.a.createElement("div",{className:"graphical-report"},"  ",s.a.createElement("div",null,s.a.createElement(q.a,{options:t.options,series:t.series,height:300,type:"bar"})))};var n=ps(a.props.userInfo,a.props.companies);return a.state={selectedFilters:{user:{id:n.id,name:n.name,selectedCustomerId:n.customerId},device:{id:null,name:""},batch:"",date:""},maintenanceReportData:[],isDisabled:!0,isExpanded:!1,pageSize:5,sort:[],displayMode:0},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearMaintenanceReport(Ne)}},{key:"componentWillMount",value:function(){this.props.companies&&0===this.props.companies.length&&this.props.getAllCompanies(),this.props.devicesBatchList&&0===this.props.devicesBatchList.length&&this.props.getDeviceBatchList(),this.props.devices&&0===this.props.devices.length&&this.props.getDevices()}},{key:"componentWillReceiveProps",value:function(e){e.maintenanceReportData&&e.maintenanceReportData.length>=0&&this.setState({maintenanceReportData:e.maintenanceReportData})}},{key:"render",value:function(){return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("h5",null,"Device Maintenance  ",s.a.createElement("span",{className:"float-right"},this.getDisplayModeButton()))),content:s.a.createElement("div",null,s.a.createElement("div",null,this.getReportFilters()),s.a.createElement("div",null),this.props.isGettingMaintenanceReport?s.a.createElement(ua,null):this.state.maintenanceReportData&&0==this.state.maintenanceReportData.length?s.a.createElement("div",{className:"alarmReportDiv no-data"},"Select Filters to Generate Report"):1==this.state.displayMode?s.a.createElement("div",{className:"alarmReportDiv"},this.maintenanceGraphicalSection()):s.a.createElement("div",null,s.a.createElement(D.a,null," ",s.a.createElement(Ra,{classNames:"float-right-2 mr-20",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize})),s.a.createElement("div",null,this.displayData())))})))))}}]),t}(s.a.Component),Sr={getAllCompanies:ht,getDeviceBatchList:$a,getDevices:hn,getMaintenanceReport:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:kn(a),Is.Report().GetMaintenanceReport(e).then(function(e){zn(a,e.data.data)}).catch(function(e){Hn(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},clearMaintenanceReport:Wn},vr=Object(ve.b)(function(e){return{companies:e.Company?e.Company.CompaniesList:[],devicesBatchList:e.Device&&e.Device.devicesBatchList?e.Device.devicesBatchList:[],devices:e.Device&&e.Device.deviceList?e.Device.deviceList:[],maintenanceReportData:e.Report&&e.Report.maintenanceReportData?e.Report.maintenanceReportData:[],isGettingMaintenanceReport:!!e.Report&&e.Report.isGettingMaintenanceReport,permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},Sr)(gr),Ir=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).componentWillMount=function(){a.props.personas&&0===a.props.personas.length&&a.props.getPersonas(),a.props.all_roles&&0===a.props.all_roles.length&&a.props.getRolesList(),a.props.personaPermissionsList&&0===a.props.personaPermissionsList.length&&a.props.GetPersonaPermissionsList()},a.getPersonaButtonState=function(){return-1===a.state.persona.selectedFormId.id||-1===a.state.persona.selectedPersonaId.id},a.createPersonaPermission=function(){var e=a.state.persona,t={Id:0,Form:e.selectedFormId,Persona:e.selectedPersonaId};a.setState({persona:Object(p.a)({},a.state.persona,{selectedFormId:{id:-1,name:""}})},function(){a.props.createPersonaPermission(t)})},a.IsPersonaFormOptionDisabled=function(e){var t=e.id;return as(a.props.personaPermissionsList,a.state.persona.selectedPersonaId.id,t,"personaId","formId")},a.getPersonaPermissionCard=function(){var e=a.props.formsList;return s.a.createElement("div",null," ",s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},s.a.createElement(N.a,{md:4,xs:12,className:"responsive_marginBottom"},s.a.createElement(ha,{title:-1!==a.state.persona.selectedPersonaId.id?a.state.persona.selectedPersonaId.name:"Select Persona",id:"split-button-management-personaPermission-persona",className:"dropdown-70 text-cut",list:a.props.personas,onSelectOption:function(e){return a.setState({persona:Object(p.a)({},a.state.persona,{selectedPersonaId:{id:e.id,name:e.personaName},selectedFormId:{id:-1,name:""}})})},tooltipID:"administration-management-personaPermission-persona",label:"Persona",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"personaName"})),s.a.createElement(N.a,{md:4,xs:12,className:"responsive_marginBottom"},s.a.createElement(ha,{title:-1!==a.state.persona.selectedFormId.id?a.state.persona.selectedFormId.name:"Select Form Type",id:"split-button-management-personaPermission-Form",className:"dropdown-70 text-cut",list:e&&e,onSelectOption:function(e){return a.setState({persona:Object(p.a)({},a.state.persona,{selectedFormId:{id:e.id,name:e.formName}})})},tooltipID:"administration-management-personaPermission-Form",label:"Form",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"formName",canDisableOptions:!0,disableOptionFunc:a.IsPersonaFormOptionDisabled})),s.a.createElement(N.a,{md:3,xs:12,className:"custom-inputs mt-10"},s.a.createElement(N.a,{className:"custom-inputs companyAddButton"},s.a.createElement(G,{fill:!0,className:"buttonColor responsive_FormsBtn",id:"submit",type:"submit",disabled:!!a.getPersonaButtonState(),onClick:function(){return a.createPersonaPermission()}},"Create Permissions"))),s.a.createElement(N.a,null,a.props.isCreatingPersonaPermission?s.a.createElement(ua,null):""),s.a.createElement("div",{className:"clearfix"}))),s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},a.allPropsExist()&&a.props.personaPermissionsList&&a.props.personaPermissionsList.length?a.getPersonaPermissionsTabbedComponent():"")))},a.allPropsExist=function(){return a.props.all_roles&&a.props.all_roles.length&&a.props.personas&&a.props.personas.length&&a.props.formsList&&a.props.formsList.length},a.handlePageSize=function(e){a.setState({persona:Object(p.a)({},a.state.persona,{pageSize:e})})},a.handleDeletePersonaPermission=function(e){a.setState({persona:Object(p.a)({},a.state.persona,{showModal:!0,toBeDeleted:e.id})})},a.handleEditPersonaPermission=function(e){a.setState({persona:Object(p.a)({},a.state.persona,{selectedPersonaId:{id:e.personaId,name:e.personaName},selectedFormId:{id:e.formId,name:e.formName},idToBeEdited:e.id,isOpen:!0})})},a.closeDeletionModal=function(){a.setState({persona:Object(p.a)({},a.state.persona,{showModal:!1,toBeDeleted:-1})})},a.closePersonaPermissionModal=function(){a.setState({persona:Object(p.a)({},a.state.persona,{isOpen:!1,selectedPersonaId:{id:-1,name:""},selectedFormId:{id:-1,name:""},idToBeEdited:-1,isDisabled:!0})})},a.onSaveEditPersonaPermission=function(){var e=a.state.persona,t={Id:e.idToBeEdited,formId:e.selectedFormId.id,personaId:e.selectedPersonaId.id};a.props.updatePersona(t),a.closePersonaPermissionModal()},a.getPersonaPermissionsTable=function(e){var t=e;return s.a.createElement("div",null,s.a.createElement(Da.a,{data:t,noDataText:"No Data Available",minRows:1,PaginationComponent:Ca,showPagination:t.length>5,defaultPageSize:5,pageSize:a.state.persona.pageSize,className:"-highlight",defaultFilterMethod:Xr,columns:[{Header:function(){return s.a.createElement("span",null,"Persona")},accessor:"personaName",minWidth:150,width:200},{Header:function(){return s.a.createElement("span",null,"Form")},accessor:"formName",minWidth:150,width:200,filterable:!0,style:Qr},{Header:"",accessor:"Update",sortable:!1,filterable:!1,Cell:function(e){return s.a.createElement("div",{className:"float-left"},s.a.createElement(G,{"data-tip":!0,"data-for":"edit-btn",variant:"primary",onClick:function(t){a.handleEditPersonaPermission(e.original)}},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Edit")),s.a.createElement(G,{"data-tip":!0,"data-for":"del-btn",variant:"primary",onClick:function(t){a.handleDeletePersonaPermission(e.original)}},s.a.createElement("i",{className:"fa fa-trash red-text"})),s.a.createElement(fa.a,{id:"del-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Delete")))}}]}))},a.getModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.persona.showModal,onHide:function(){a.closeDeletionModal()}},s.a.createElement(Aa.a.Header,null,s.a.createElement(Aa.a.Title,null,"Confirmation")),s.a.createElement(Aa.a.Body,null,"Do you want to delete this persona permission?"),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:function(){a.closeDeletionModal()}},"Cancel"),s.a.createElement(G,{bsStyle:"danger",onClick:function(){a.closeDeletionModal(),a.props.DeletePersonaPermission(a.state.persona.toBeDeleted)}},"Delete")))))},a.getUpdateModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.persona.isOpen,onHide:function(){a.closePersonaPermissionModal()},bsSize:"large"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Edit Persona Permission")),s.a.createElement(Aa.a.Body,{className:"modalHeightPermission"},s.a.createElement(N.a,{md:12},s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserRoles"},s.a.createElement(et.a,null,"Persona"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.persona.selectedPersonaId.name,disabled:!0}))),s.a.createElement(N.a,{md:6,className:"custom-inputs custom-dropdown responsive_marginBottom"},s.a.createElement(ha,{title:-1!==a.state.persona.selectedFormId.id?a.state.persona.selectedFormId.name:"Select Form Type",id:"split-button-usermanagement-persona-form",className:"dropdown-50 text-cut",list:a.props.formsList,onSelectOption:function(e){return a.setState({persona:Object(p.a)({},a.state.persona,{selectedFormId:{id:e.id,name:e.formName},isDisabled:!1})})},tooltipID:"administration-usermanagement-persona-form",label:"Form",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"formName",canDisableOptions:!0,disableOptionFunc:a.IsPersonaFormOptionDisabled})))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:a.closePersonaPermissionModal},"Close"),s.a.createElement(G,{onClick:a.onSaveEditPersonaPermission,disabled:a.state.persona.isDisabled},"Save Changes")))))},a.onSelectPersonaTab=function(e){a.setState({persona:Object(p.a)({},a.state.persona,{selectedTab:e})})},a.getPersonaPermissionsTabbedComponent=function(){var e=a.props.personas;a.props.personaPermissionsList;return s.a.createElement("div",null,s.a.createElement(Ia.a.Container,{id:"alarm-warning-report",activeKey:a.state.persona.selectedTab,onSelect:function(e){return a.onSelectPersonaTab(e)}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs",className:"responsiveNav"},e.map(function(e){return s.a.createElement(Pa.a,{eventKey:e.id},e.personaName," ",s.a.createElement(Oa.a,null,a.getFilteredPersonaPermissions(e.id).length))}),s.a.createElement(Ra,{classNames:"float-right-2 responsive-mt-20",changePageSize:a.handlePageSize,selectedPage:a.state.persona.pageSize}))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!1},e.map(function(e){return s.a.createElement(Ia.a.Pane,{eventKey:e.id},a.getPersonaPermissionsTable(a.getFilteredPersonaPermissions(e.id)))}))))))},a.getFilteredPersonaPermissions=function(e){return a.props.personaPermissionsList.filter(function(t){return t.personaId===e})},a.state={persona:{selectedPersonaId:{id:-1,name:""},selectedFormId:{id:-1,name:""},isDisabled:!0,pageSize:5,showModal:!1,toBeDeleted:-1,isOpen:!1,idToBeEdited:-1,selectedTab:a.props.personas&&a.props.personas.length?a.props.personas[0].id:1}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.render}},{key:"render",value:function(){return console.log("PERSONA PERMISSIONS RENDERED"),s.a.createElement("div",null,this.state.persona.showModal?this.getModals():"",this.state.persona.isOpen?this.getUpdateModals():"",this.getPersonaPermissionCard())}}]),t}(s.a.Component),br={getRoles:It,getRolesList:bt,getPersonas:At,createPersonaPermission:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){var n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Mt(a),n={FormId:e.Form.id,PersonaId:e.Persona.id,id:0},Is.Settings().CreatePersonaPermissions(n).then(function(t){a(kt()),Ft(a,e)}).catch(function(e){xt(a)});case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},GetPersonaPermissionsList:kt,DeletePersonaPermission:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Wt(a),Is.Settings().DeletePersonaPermission(e).then(function(t){Vt(a,e)}).catch(function(e){Yt(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},updatePersona:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:da(a),Is.Settings().UpdatePersonaPermissions(e).then(function(e){ca(a,e.data)}).catch(function(e){ma(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Pr=Object(ve.b)(function(e){return{roles:e.Settings&&null!=e.Settings.persona_roles?e.Settings.persona_roles:[],all_roles:e.Settings&&null!=e.Settings.roles?e.Settings.roles:[],personas:e.Settings&&null!=e.Settings.personas?e.Settings.personas:[],formsList:e.Settings?e.Settings.formNames:[],isCreatingPersonaPermission:!!e.Settings&&e.Settings.isCreatingPersona,userId:e.User?e.User.UserInfo.userId:"",personaPermissionsList:e.Settings&&null!=e.Settings.personaPermissionsList?e.Settings.personaPermissionsList:[],permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},br)(Ir),Or=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).componentWillMount=function(){a.props.GetFormsList()},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name;""===e.currentTarget.value.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({errors:t,forms:Object(p.a)({},a.state.forms,Object(y.a)({isAddFormDisabled:n},r,e.currentTarget.value))})},a.validates=function(e){var t={},n=!0;return Object.entries(e).forEach(function(e){""===e[1].toString().trimLeft().trimRight()&&(t[e[0]]="Required",n=!1)}),n?a.setState({forms:Object(p.a)({},a.state.forms,{isAddFormDisabled:!1})}):a.setState({errors:t,forms:Object(p.a)({},a.state.forms,{isAddFormDisabled:!0})}),n},a.onAddFormName=function(e){e.preventDefault(),a.validates({formName:a.state.forms.formName})?a.isExistingForm(a.state.forms.formName)||(a.props.addFormNames(a.state.forms.formName),a.setState({forms:Object(p.a)({},a.state.forms,{formName:""})}),e.target.reset()):K.b.warn("Please provide required information",{position:K.b.POSITION.BOTTOM_RIGHT})},a.isExistingForm=function(e){return a.props.formsList.filter(function(t){return t.formName===e.name}).length>0},a.onSelectForm=function(e){var t=e.name,n=a.state.forms;n.formName=t,a.setState({forms:n})},a.getFormCard=function(){var e=JSON.stringify(kr),t=JSON.parse(e);return t=t.sort(function(e,t){return e.name>t.name?1:-1}),s.a.createElement("div",null," ",s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},s.a.createElement("div",{className:"addFormName"},s.a.createElement("form",{id:"user-rights-form",onSubmit:a.onAddFormName},s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{md:4,xs:12,className:"mr-20"},s.a.createElement(ha,{title:""!==a.state.forms.formName?a.state.forms.formName:"Select Form",id:"split-button-management-addForm-formName",className:"dropdown-70 text-cut",list:t,onSelectOption:a.onSelectForm,tooltipID:"administration-management-addForm-formName",label:"Form Name",direction:"bottom",required:!0,menuItemIdkey:"name",menuItemIdName:"name",canDisableOptions:!0,disableOptionFunc:a.isExistingForm})),s.a.createElement(N.a,{md:3,xs:12,className:"custom-inputs margin-top-btn"},s.a.createElement(G,{fill:!0,className:"buttonColor responsive_FormsBtn",id:"submit",type:"submit",disabled:""===a.state.forms.formName},"Add Form Name")),s.a.createElement(N.a,null,a.props.isAddingFormName?s.a.createElement(ua,null):""))),s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},a.props.formsList&&a.props.formsList.length?a.getFormNameTable():""))))))},a.allPropsExist=function(){return a.props.all_roles&&a.props.all_roles.length&&a.props.personas&&a.props.personas.length&&a.props.formsList&&a.props.formsList.length},a.handlePageSizeFormName=function(e){a.setState({forms:Object(p.a)({},a.state.forms,{pageSize:e})})},a.handleEditFormName=function(e){a.setState({forms:Object(p.a)({},a.state.forms,{formName:e.formName,idToBeEdited:e.id,isOpen:!0})})},a.handleDeleteForm=function(e){a.setState({forms:Object(p.a)({},a.state.forms,{showModal:!0,toBeDeleted:e.id})})},a.closeFormNameModal=function(){a.setState({forms:Object(p.a)({},a.state.forms,{isOpen:!1,formName:"",idToBeEdited:-1,isAddFormDisabled:!0}),errors:Object(p.a)({},a.state.errors,{formName:""})})},a.onSaveEditFormName=function(){if(a.validates({formName:a.state.forms.formName})){if(!a.isExistingForm(a.state.forms.formName)){var e=a.state.forms,t={formId:e.idToBeEdited,formName:e.formName};a.props.updateFormName(t),a.closeFormNameModal()}}else K.b.warn("Please provide required information",{position:K.b.POSITION.BOTTOM_RIGHT})},a.getFormNameTable=function(){var e=a.props.formsList;return s.a.createElement("div",null,s.a.createElement(D.a,null,s.a.createElement(N.a,null,s.a.createElement(Ra,{classNames:"float-right-2 mr-20 mb-20",changePageSize:a.handlePageSizeFormName,selectedPage:a.state.forms.pageSize}))),s.a.createElement(Da.a,{data:e,noDataText:"No Data Available",minRows:1,PaginationComponent:Ca,showPagination:e.length>5,defaultPageSize:5,pageSize:a.state.forms.pageSize,className:"-highlight",defaultFilterMethod:Xr,columns:[{Header:function(){return s.a.createElement("span",{className:"sortable"},"Form Name")},accessor:"formName",minWidth:150,sortable:!0,width:250,filterable:!0,style:Qr},{Header:function(){return s.a.createElement("span",null,"Is Active")},accessor:"isActive",minWidth:150,width:250,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.isActive})}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Created on")},minWidth:150,width:250,style:Qr,sortable:!0,id:"createdDate",accessor:function(e){var t="";return null!=e.createdDate&&(t=be()(e.createdDate).format("x")),t},Cell:function(e){return e.original.createdDate?be()(e.original.createdDate).format("MM/DD/YYYY"):""},defaultSortDesc:!0,filterMethod:function(e,t,a){if(be()(e.value).isValid()){var n=be()(e.value).format("x"),r=be()(t._original.createdDate).format("L");if(n===(r=be()(r).format("x")))return!0}return!1}},{Header:"",accessor:"Update",sortable:!1,filterable:!1,Cell:function(e){return s.a.createElement("div",{className:"float-left"},s.a.createElement(G,{"data-tip":!0,"data-for":"edit-btn",variant:"primary",onClick:function(t){a.handleEditFormName(e.original)}},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Edit")),s.a.createElement(G,{"data-tip":!0,"data-for":"del-btn",variant:"primary",onClick:function(t){a.handleDeleteForm(e.original)}},s.a.createElement("i",{className:"fa fa-trash red-text"})),s.a.createElement(fa.a,{id:"del-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Delete")))}}]}))},a.getModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.forms.showModal,onHide:function(){a.setState({forms:Object(p.a)({},a.state.forms,{showModal:!1,toBeDeleted:-1})})}},s.a.createElement(Aa.a.Header,null,s.a.createElement(Aa.a.Title,null,"Confirmation")),s.a.createElement(Aa.a.Body,null,"Do you want to delete this form?"),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:function(){a.setState({forms:Object(p.a)({},a.state.forms,{showModal:!1,toBeDeleted:-1})})}},"Cancel"),s.a.createElement(G,{bsStyle:"danger",onClick:function(){a.setState({forms:Object(p.a)({},a.state.forms,{showModal:!1,toBeDeleted:-1})}),a.props.DeleteForm(a.state.forms.toBeDeleted)}},"Delete")))))},a.getUpdateModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.forms.isOpen,onHide:function(){a.closeFormNameModal()},bsSize:"large"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Edit Form Name")),s.a.createElement(Aa.a.Body,null,s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,{className:"inputMargin"},s.a.createElement(et.a,null,"Form name",s.a.createElement("span",{className:"error"},"*")),s.a.createElement(tt.a,{type:"text",name:"formName",placeholder:"Form Name",value:a.state.forms.formName,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.formName)))))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:a.closeFormNameModal},"Close"),s.a.createElement(G,{onClick:a.onSaveEditFormName,disabled:a.state.forms.isAddFormDisabled},"Save Changes")))))},a.state={errors:{selectedFormType:"",selectedUserRole:"",formName:""},forms:{formName:"",isAddFormDisabled:!0,showModal:!1,pageSize:5,toBeDeleted:-1,isOpen:!1,idToBeEdited:-1}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.render}},{key:"render",value:function(){return console.log("FORMS COMPONENT RENDERED"),s.a.createElement("div",null,this.state.forms.showModal?this.getModals():"",this.state.forms.isOpen?this.getUpdateModals():"",this.getFormCard())}}]),t}(s.a.Component),Dr={addFormNames:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Ct(a),Is.Settings().addFormName(e).then(function(e){_t(a,e.data)}).catch(function(e){Rt(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},GetFormsList:Ut,updateFormName:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:la(a),Is.Settings().UpdateForm(e).then(function(e){oa(a,e.data)}).catch(function(e){ia(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},DeleteForm:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Xt(a),Is.Settings().DeleteForm(e).then(function(t){qt(a,e)}).catch(function(e){Kt(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Nr=Object(ve.b)(function(e){return{formsList:e.Settings?e.Settings.formNames:[],isAddingFormName:!!e.Settings&&e.Settings.isAddingFormName,userId:e.User?e.User.UserInfo.userId:"",permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},Dr)(Or),Cr=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).componentWillMount=function(){a.props.rolePermissionList&&0===a.props.rolePermissionList.length&&a.props.GetRolePermissionList(),a.props.personaPermissionsList&&0===a.props.personaPermissionsList.length&&a.props.GetPersonaPermissionsList()},a.getPermissionButtonState=function(){return-1===a.state.permissions.selectedFormId||-1===a.state.permissions.selectedUserRoleId||-1===a.state.permissions.selectedUserPersonaId},a.handleSubmitPermission=function(e){e.preventDefault();var t=a.state.permissions,n=t.selectedFormId,r=t.selectedUserRoleId,s=t.selectedFormType,o=t.selectedUserRole,i=t.canDelete,l=t.canUpdate,c=t.canInsert,m={id:0,roleId:r,formId:n,canView:t.canView,canUpdate:l,canInsert:c,canDelete:i,formName:s,roleName:o,canExport:t.canExport};a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedUserRoleId:-1,selectedFormId:-1,canView:!1,canUpdate:!1,canInsert:!1,canDelete:!1,canExport:!1,allOption:!1,selectedFormType:"",selectedUserRole:""})},function(){a.props.createRolePermission(m)})},a.onSelectAllPermissions=function(){var e=a.state.permissions.allOption;a.setState({permissions:Object(p.a)({},a.state.permissions,{canView:!e,canUpdate:!e,canInsert:!e,canDelete:!e,canExport:!e,allOption:!e})})},a.componentWillReceiveProps=function(e){a.setState({permissions:Object(p.a)({},a.state.permissions,{persona_roles_list:e.roles})})},a.onChangeCheckbox=function(e,t){a.setState({permissions:Object(p.a)({},a.state.permissions,Object(y.a)({},e,t))},function(){var e=a.state.permissions,t=e.canInsert,n=e.canDelete,r=e.canUpdate,s=e.canView,o=e.canExport,i=!1;t&&n&&r&&s&&o&&(i=!0),a.setState({permissions:Object(p.a)({},a.state.permissions,{allOption:i})})})},a.onSelectPersona=function(e){a.props.getRoles(e.personaName);var t=a.props.personaPermissionsList.filter(function(t){return t.personaId===e.id}).sort(function(e,t){return gs(e.formName,t.formName)});a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedUserPersona:e.personaName,selectedUserPersonaId:e.id,selectedUserRole:"",selectedUserRoleId:-1,selectedFormId:-1,selectedFormType:"",persona_roles_list:[],persona_forms_list:t})})},a.getRolePermissionCard=function(){a.props.roles;return s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},s.a.createElement("div",null,s.a.createElement("form",{onSubmit:a.handleSubmitPermission},s.a.createElement(N.a,{md:4,className:"responsive_marginBottom"},s.a.createElement(ha,{title:""!==a.state.permissions.selectedUserPersona?a.state.permissions.selectedUserPersona:"Select Persona",id:"split-button-management-rolePermission-personas",className:"dropdown-70 text-cut",list:a.props.personas,onSelectOption:a.onSelectPersona,tooltipID:"administration-management-rolePermission-personas",label:"Personas",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"personaName"})),s.a.createElement(N.a,{md:4,className:"responsive_marginBottom"},s.a.createElement(ha,{title:""!==a.state.permissions.selectedUserRole?a.state.permissions.selectedUserRole:"Select User Role",id:"split-button-management-rolePermission-userRoles",className:"dropdown-70 text-cut",list:a.state.permissions.persona_roles_list,onSelectOption:function(e){return a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedUserRole:e.role1,selectedUserRoleId:e.id,selectedFormId:-1,selectedFormType:""})})},tooltipID:"administration-management-rolePermission-userRoles",label:"User Roles",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"role1"})),s.a.createElement(N.a,{md:4,className:"responsive_marginBottom"},s.a.createElement(ha,{title:""!==a.state.permissions.selectedFormType?a.state.permissions.selectedFormType:"Select Form Type",id:"split-button-management-rolePermission-Form",className:"dropdown-70 text-cut",list:""!==a.state.permissions.selectedUserRole?a.state.permissions.persona_forms_list:[],onSelectOption:function(e){return a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedFormType:e.formName,selectedFormId:e.formId})})},tooltipID:"administration-management-rolePermission-form",label:"Form",direction:"bottom",required:!0,menuItemIdkey:"formId",menuItemIdName:"formName",canDisableOptions:!0,disableOptionFunc:a.IsRolePermissionFormOptionDisabled})),s.a.createElement(N.a,{md:12,className:"permission-padding"},s.a.createElement(et.a,null,"Permissions")),s.a.createElement(N.a,{md:12,className:"custom-inputs checkbox-padding"},s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline custom-checkbox"},s.a.createElement("input",{id:"checkbox6",type:"checkbox",onChange:a.onSelectAllPermissions,checked:!a.state.permissions.isOpen&&a.state.permissions.allOption}),s.a.createElement("label",{htmlFor:"checkbox6"},"All"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox1",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canView",!a.state.permissions.canView)},checked:!a.state.permissions.isOpen&&a.state.permissions.canView}),s.a.createElement("label",{htmlFor:"checkbox1"},"View"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox2",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canInsert",!a.state.permissions.canInsert)},checked:!a.state.permissions.isOpen&&a.state.permissions.canInsert}),s.a.createElement("label",{htmlFor:"checkbox2"},"Insert"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox3",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canUpdate",!a.state.permissions.canUpdate)},checked:!a.state.permissions.isOpen&&a.state.permissions.canUpdate}),s.a.createElement("label",{htmlFor:"checkbox3"},"Update"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox4",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canDelete",!a.state.permissions.canDelete)},checked:!a.state.permissions.isOpen&&a.state.permissions.canDelete}),s.a.createElement("label",{htmlFor:"checkbox4"},"Delete"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox5",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canExport",!a.state.permissions.canExport)},checked:!a.state.permissions.isOpen&&a.state.permissions.canExport}),s.a.createElement("label",{htmlFor:"checkbox5"},"Export")))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement(N.a,{xs:7,className:"custom-inputs companyAddButton"},s.a.createElement(G,{fill:!0,className:"buttonColor",id:"submit",type:"submit",disabled:!!a.getPermissionButtonState()},"Create Permissions"))),s.a.createElement("div",{className:"clearfix"})),s.a.createElement(D.a,{className:"mt-5percent"},s.a.createElement(N.a,{md:12},a.allPropsExist()&&a.props.rolePermissionList&&a.props.rolePermissionList.length?a.getRolePermissionsTabbedComponent():"")))))},a.IsRolePermissionFormOptionDisabled=function(e){var t=e.formId;return as(a.props.rolePermissionList,a.state.permissions.selectedUserRoleId,t,"roleId","formId")},a.allPropsExist=function(){return a.props.all_roles&&a.props.all_roles.length&&a.props.personas&&a.props.personas.length&&a.props.formsList&&a.props.formsList.length},a.handlePageSizePermission=function(e){a.setState({permissions:Object(p.a)({},a.state.permissions,{pageSize:e})})},a.handleEditRolePermission=function(e){var t=!1;e.canView&&e.canDelete&&e.canInsert&&e.canUpdate&&e.canExport&&(t=!0),a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedFormType:e.formName,selectedUserRole:e.roleName,selectedFormId:e.formId,selectedUserRoleId:e.roleId,canView:e.canView,canDelete:e.canDelete,canUpdate:e.canUpdate,canInsert:e.canInsert,canExport:e.canExport,idToBeEdited:e.id,allOption:t,isOpen:!0})})},a.handleDeletePermissions=function(e){a.setState({permissions:Object(p.a)({},a.state.permissions,{showModal:!0,toBeDeleted:e.id})})},a.closePermissionModal=function(){a.setState({permissions:Object(p.a)({},a.state.permissions,{isOpen:!1,selectedFormType:"",selectedUserRole:"",selectedFormId:-1,selectedUserRoleId:-1,selectedUserPersona:"",selectedUserPersonaId:-1,canView:!1,canDelete:!1,canUpdate:!1,canInsert:!1,canExport:!1,allOption:!1,showModal:!1,idToBeEdited:-1})})},a.onSaveEditRolePermission=function(){var e=a.state.permissions,t={id:e.idToBeEdited,roleId:e.selectedUserRoleId,formId:e.selectedFormId,canView:e.canView,canUpdate:e.canUpdate,canInsert:e.canInsert,canDelete:e.canDelete,canExport:e.canExport,formName:e.selectedFormType,roleName:e.selectedUserRole};a.props.updateRolePermission(t),a.closePermissionModal()},a.getRolePermissionsTable=function(e){var t=e;return s.a.createElement("div",null,s.a.createElement(Da.a,{data:t,noDataText:"No Data Available",minRows:1,PaginationComponent:Ca,showPagination:t.length>5,defaultPageSize:5,pageSize:a.state.permissions.pageSize,className:"-highlight",defaultFilterMethod:Xr,columns:[{Header:function(){return s.a.createElement("span",null,"Persona")},accessor:"personaName",minWidth:100,width:150,filterable:!0},{Header:function(){return s.a.createElement("span",null,"User Role")},accessor:"roleName",minWidth:100,width:150,filterable:!0},{Header:function(){return s.a.createElement("span",null,"Form")},accessor:"formName",minWidth:100,width:150,filterable:!0,style:Qr},{Header:function(){return s.a.createElement("span",null,"Can View")},accessor:"canView",minWidth:100,width:100,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.canView})}},{Header:function(){return s.a.createElement("span",null,"Can Insert")},accessor:"canInsert",minWidth:100,width:100,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.canInsert})}},{Header:function(){return s.a.createElement("span",null,"Can Update")},accessor:"canUpdate",minWidth:100,width:100,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.canUpdate})}},{Header:function(){return s.a.createElement("span",null,"Can Delete")},accessor:"canDelete",minWidth:100,width:100,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.canDelete})}},{Header:function(){return s.a.createElement("span",null,"Can Export")},accessor:"canExport",minWidth:100,width:100,Cell:function(e){return s.a.createElement("input",{type:"checkbox",disabled:!0,defaultChecked:!1,checked:e.original.canExport})}},{Header:"",accessor:"Update",sortable:!1,filterable:!1,Cell:function(e){return s.a.createElement("div",{className:"float-left"},s.a.createElement(G,{"data-tip":!0,"data-for":"edit-btn",variant:"primary",onClick:function(t){a.handleEditRolePermission(e.original)}},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Edit")),s.a.createElement(G,{"data-tip":!0,"data-for":"del-btn",variant:"primary",onClick:function(t){a.handleDeletePermissions(e.original)}},s.a.createElement("i",{className:"fa fa-trash red-text"})),s.a.createElement(fa.a,{id:"del-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Delete")))}}]}))},a.getModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.permissions.showModal,onHide:function(){a.setState({permissions:Object(p.a)({},a.state.permissions,{showModal:!1,toBeDeleted:-1})})}},s.a.createElement(Aa.a.Header,null,s.a.createElement(Aa.a.Title,null,"Confirmation")),s.a.createElement(Aa.a.Body,null,"Do you want to delete this role-permission?"),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:function(){a.setState({permissions:Object(p.a)({},a.state.permissions,{showModal:!1,toBeDeleted:-1})})}},"Cancel"),s.a.createElement(G,{bsStyle:"danger",onClick:function(){a.setState({permissions:Object(p.a)({},a.state.permissions,{showModal:!1,toBeDeleted:-1})}),a.props.DeleteRolePermission(a.state.permissions.toBeDeleted)}},"Delete")))))},a.getUpdateModals=function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"static-modal"},s.a.createElement(Aa.a,{show:a.state.permissions.isOpen,onHide:function(){a.closePermissionModal()},bsSize:"large"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Edit Role Permission")),s.a.createElement(Aa.a.Body,{className:"modalHeightPermission"},s.a.createElement(N.a,{md:12},s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserRoles"},s.a.createElement(et.a,null,"User Roles"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.permissions.selectedUserRole,disabled:!0}))),s.a.createElement(N.a,{md:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalForm"},s.a.createElement(et.a,null,"Form"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.permissions.selectedFormType,disabled:!0})))),s.a.createElement(N.a,{md:12},s.a.createElement(et.a,null,"Permissions")),s.a.createElement(N.a,{md:12,className:"custom-inputs checkbox-padding"},s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline custom-checkbox"},s.a.createElement("input",{id:"checkbox6",type:"checkbox",onChange:a.onSelectAllPermissions,checked:a.state.permissions.allOption}),s.a.createElement("label",{htmlFor:"checkbox6",className:"custom-label"},"All"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox1",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canView",!a.state.permissions.canView)},checked:a.state.permissions.canView}),s.a.createElement("label",{htmlFor:"checkbox1",className:"custom-label"},"View"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox2",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canInsert",!a.state.permissions.canInsert)},checked:a.state.permissions.canInsert}),s.a.createElement("label",{htmlFor:"checkbox2",className:"custom-label"},"Insert"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox3",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canUpdate",!a.state.permissions.canUpdate)},checked:a.state.permissions.canUpdate}),s.a.createElement("label",{htmlFor:"checkbox3",className:"custom-label"},"Update"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox4",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canDelete",!a.state.permissions.canDelete)},checked:a.state.permissions.canDelete}),s.a.createElement("label",{htmlFor:"checkbox4",className:"custom-label"},"Delete"))),s.a.createElement(N.a,{md:2},s.a.createElement("div",{className:"checkbox checkbox-inline"},s.a.createElement("input",{id:"checkbox5",type:"checkbox",onChange:function(){return a.onChangeCheckbox("canExport",!a.state.permissions.canExport)},checked:a.state.permissions.canExport}),s.a.createElement("label",{htmlFor:"checkbox5",className:"custom-label"},"Export"))))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(G,{onClick:a.closePermissionModal},"Close"),s.a.createElement(G,{onClick:a.onSaveEditRolePermission},"Save Changes")))))},a.onSelectRoleTab=function(e){a.setState({permissions:Object(p.a)({},a.state.permissions,{selectedTab:e})})},a.getFilteredRolePermissions=function(e){return a.props.rolePermissionList.filter(function(t){return t.personaId===e})},a.getRolePermissionsTabbedComponent=function(){var e=a.props.personas;a.props.rolePermissionList;return s.a.createElement("div",null,s.a.createElement(Ia.a.Container,{id:"alarm-warning-report",activeKey:a.state.permissions.selectedTab,onSelect:function(e){return a.onSelectRoleTab(e)}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs",className:"responsiveNav"},e.map(function(e){return s.a.createElement(Pa.a,{eventKey:e.id},e.personaName," ",s.a.createElement(Oa.a,null,a.getFilteredRolePermissions(e.personaId).length))}),s.a.createElement(Ra,{classNames:"float-right-2 responsive-mt-20",changePageSize:a.handlePageSizePermission,selectedPage:a.state.permissions.pageSize}))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!1},e.map(function(e){return s.a.createElement(Ia.a.Pane,{eventKey:e.id},a.getRolePermissionsTable(a.getFilteredRolePermissions(e.personaId)))}))))))},a.state={permissions:{selectedFormType:"",selectedUserRole:"",selectedFormId:-1,selectedUserRoleId:-1,selectedUserPersona:"",selectedUserPersonaId:-1,canView:!1,canDelete:!1,canUpdate:!1,canInsert:!1,canExport:!1,showModal:!1,allOption:!1,pageSize:5,persona_roles_list:[],persona_forms_list:[],idToBeEdited:-1,isOpen:!1,toBeDeleted:-1,selectedTab:a.props.personas&&a.props.personas.length?a.props.personas[0].id:1}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.render}},{key:"render",value:function(){return console.log("ROLES COMPONENT RENDERED"),console.log(this.props.rolePermissionList),s.a.createElement("div",null,this.state.permissions.showModal?this.getModals():"",this.state.permissions.isOpen?this.getUpdateModals():"",this.getRolePermissionCard())}}]),t}(s.a.Component),_r={getRoles:It,getRolesList:bt,getPersonas:At,createRolePermission:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:jt(a),Is.Settings().CreateRolePermissions(e).then(function(e){Gt(a,e.data)}).catch(function(e){Bt(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},GetRolePermissionList:$t,GetPersonaPermissionsList:kt,updateRolePermission:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:sa(a),Is.Settings().UpdateRolePermissions(e).then(function(e){na(a,e.data)}).catch(function(e){ra(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},DeleteRolePermission:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Zt(a),Is.Settings().DeleteRolePermissions(e).then(function(t){Qt(a,e)}).catch(function(e){Jt(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},Rr=Object(ve.b)(function(e){return{roles:e.Settings&&null!=e.Settings.persona_roles?e.Settings.persona_roles:[],all_roles:e.Settings&&null!=e.Settings.roles?e.Settings.roles:[],personas:e.Settings&&null!=e.Settings.personas?e.Settings.personas:[],formsList:e.Settings?e.Settings.formNames:[],isAddingFormName:!!e.Settings&&e.Settings.isAddingFormName,userId:e.User?e.User.UserInfo.userId:"",personaPermissionsList:e.Settings&&null!=e.Settings.personaPermissionsList?e.Settings.personaPermissionsList:[],rolePermissionList:e.Settings&&null!=e.Settings.rolePermissionList?e.Settings.rolePermissionList:[],permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},_r)(Cr),Ar=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).componentWillMount=function(){a.props.personas&&0===a.props.personas.length&&a.props.getPersonas(),a.props.all_roles&&0===a.props.all_roles.length&&a.props.getRolesList()},a.state={selectedTab:"1"},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this;return console.log("Selected tab",this.state.selectedTab),s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{title:"User Management",content:s.a.createElement("div",null,s.a.createElement(Ia.a.Container,{id:"persona-permissions-box",activeKey:this.state.selectedTab,onSelect:function(t){return e.setState({selectedTab:t})}},s.a.createElement(D.a,{className:"clearfix"},s.a.createElement(N.a,{sm:12},s.a.createElement(ba.a,{bsStyle:"tabs",className:"responsiveNav"},s.a.createElement(Pa.a,{eventKey:"1"},"Forms"),s.a.createElement(Pa.a,{eventKey:"2"},"Persona Permissions"),s.a.createElement(Pa.a,{eventKey:"3"},"Role Permissions"))),s.a.createElement(N.a,{sm:12},s.a.createElement(Ia.a.Content,{animation:!0},s.a.createElement(Ia.a.Pane,{eventKey:"1"},s.a.createElement(Nr,{render:"1"===this.state.selectedTab})),s.a.createElement(Ia.a.Pane,{eventKey:"3"},s.a.createElement(Rr,{render:"3"===this.state.selectedTab})),s.a.createElement(Ia.a.Pane,{eventKey:"2"},s.a.createElement(Pr,{render:"2"===this.state.selectedTab})))))))})))))}}]),t}(s.a.Component),yr={getRoles:It,getRolesList:bt,getPersonas:At},Tr=Object(ve.b)(function(e){return{roles:e.Settings&&null!=e.Settings.persona_roles?e.Settings.persona_roles:[],all_roles:e.Settings&&null!=e.Settings.roles?e.Settings.roles:[],personas:e.Settings&&null!=e.Settings.personas?e.Settings.personas:[],formsList:e.Settings?e.Settings.formNames:[],userId:e.User?e.User.UserInfo.userId:"",permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},yr)(Ar),Ur=(a(146),function(e){function t(e){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).call(this,e))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"content mt-20"},s.a.createElement(C.a,{fluid:!0},s.a.createElement("div",{className:"whole-page"},s.a.createElement("h1",null," 403 Forbidden"),s.a.createElement("p",null,"You don't have permissions to access this page kindly contact Admin for further details.")),s.a.createElement("div",{className:"clearfix"}))))}}]),t}(s.a.Component)),Lr=function(e){function t(e){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).call(this,e))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,"Oops! Something bad happened. Please contact administrator for further details.")}}]),t}(s.a.Component),wr=a(541),Mr=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handlePageSize=function(e){a.setState({pageSize:e})},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name,s=e.currentTarget.value;""==s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({errors:t,isDisabled:n,userProfile:Object(p.a)({},a.state.userProfile,Object(y.a)({},r,s))}),"oldPassword"!==r&&"newPassword"!==r&&"confirmNewPassword"!==r||a.validateUpdatePassword()},a.validateUpdatePassword=function(){var e=a.state.userProfile,t=e.oldPassword,n=e.newPassword,r=e.confirmNewPassword;""===t||""===n||""===r?a.setState({canUpdatePassword:!1}):a.setState({canUpdatePassword:!0})},a.validatePasswordStrength=function(){return a.state.userProfile.newPassword.match("(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{8,15})$")},a.validateConfirmPassword=function(){var e=a.state.userProfile;return e.newPassword!==e.confirmNewPassword?(a.setState({canUpdatePassword:!1,errors:Object(p.a)({},a.state.errors,{confirmNewPassword:"Password doesn't match"})}),!1):(a.setState({canUpdatePassword:!0,errors:Object(p.a)({},a.state.errors,{confirmNewPassword:""})}),!0)},a.onSelectCompany=function(e){a.setState({companyName:e.name,companyId:e.id}),a.props.getUserProfiles(e.customerId)},a.handleShow_UpdateModal=function(e,t){a.removeErrors(),a.setState({isOpenUpdateModal:!0,userProfile:Object(p.a)({},a.state.userProfile,{firstname:t.original.firstName,lastname:t.original.lastName,username:t.original.username,userId:t.original.userId,email:t.original.emailAddress,profilePicture:t.original.profilePicture,customerId:t.original.customerId})})},a.handleShow_UpdatePassword=function(e,t){a.removeErrors(),a.setState({isOpenChangePassword:!0,userProfile:Object(p.a)({},a.state.userProfile,{email:t.original.emailAddress})})},a.resetState=function(){a.setState({userProfile:Object(p.a)({},a.state.userProfile,{firstname:"",lastname:"",username:"",userId:"",email:"",profilePicture:"",customerId:"",newPassword:"",oldPassword:"",confirmNewPassword:""})})},a.handleClose_UpdateProfile=function(){a.removeErrors(),a.setState({isOpenUpdateModal:!1}),a.resetState()},a.removeErrors=function(){a.setState({errors:{firstname:"",lastname:"",newPassword:"",oldPassword:"",confirmNewPassword:"",profilePicture:""}})},a.handleSave_UpdateProfile=function(){var e=Object(On.a)(a.state.userProfileList),t=e&&e.filter(function(e){return e.emailAddress===a.state.userProfile.email});t.length>0?(t[0].firstName!==a.state.userProfile.firstname&&(t[0].firstName=a.state.userProfile.firstname),t[0].lastName!==a.state.userProfile.lastname&&(t[0].lastName=a.state.userProfile.lastname),t[0].profilePicture!==a.state.userProfile.profilePicture&&(t[0].profilePicture=a.state.userProfile.profilePicture),a.props.updateProfile(t[0])):K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),a.handleClose_UpdateProfile()},a.handleSave_UpdatePassword=function(){if(a.validateConfirmPassword())if(a.validatePasswordStrength()){var e={email:a.state.userProfile.email,currentPassword:a.state.userProfile.oldPassword,newPassword:a.state.userProfile.newPassword};a.props.changePassword(e),a.closeChangePassword()}else a.setState({canUpdatePassword:!1,errors:Object(p.a)({},a.state.errors,{newPassword:"Password should contain at least one number, one letter, and 8-15 character length."})})},a.closeChangePassword=function(){a.removeErrors(),a.resetState(),a.setState({isOpenChangePassword:!1,canUpdatePassword:!1})},a.handleSort=function(e){var t=a.state.sort;if(t&&t.length>0){var n=t.findIndex(function(t){return t.id===e[0].id});-1!==n?t[n].desc?t=t.filter(function(t){return t.id!==e[0].id}):(t=t.filter(function(t){return t.id!==e[0].id})).push({id:e[0].id,desc:!0}):t.push({id:e[0].id,desc:!1})}else t.push({id:e[0].id,desc:!1});a.setState({sort:t})},a.handleImgUpload=function(e){var t=e.currentTarget.files[0];cs(t,function(e){e,a.setState({isDisabled:!1,userProfile:Object(p.a)({},a.state.userProfile,{profilePicture:e})})})},a.getUpdateModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.isOpenUpdateModal,onHide:a.handleClose_UpdateProfile,bsSize:"large"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Update Profile")),s.a.createElement(Aa.a.Body,{className:"updateProfileModal"},s.a.createElement(N.a,{md:3},s.a.createElement("div",{className:"paddingTopLeft"},null===a.state.userProfile.profilePicture?s.a.createElement("span",null,s.a.createElement(wr.a,{src:z.a,rounded:!0,className:"profileImg-lg profile-image-overlay"}),s.a.createElement(wr.a,{style:{filter:"contrast(0.1)"},src:z.a,rounded:!0,className:"profileImg-lg"})):s.a.createElement("span",null," ",s.a.createElement(wr.a,{src:"data:image/jpeg;base64,"+a.state.userProfile.profilePicture,rounded:!0,className:"profileImg-lg profile-image-overlay"}),s.a.createElement(wr.a,{style:{filter:"contrast(0.1)"},src:"data:image/jpeg;base64,"+a.state.userProfile.profilePicture,rounded:!0,className:"profileImg-lg"})),s.a.createElement("div",{"data-tip":!0,"data-for":"file-upload-btn"},s.a.createElement("input",{onChange:a.handleImgUpload,type:"file",name:"profilePicture",accept:"image/x-png,image/jpeg",className:"custom-file-input"}),s.a.createElement(fa.a,{id:"file-upload-btn",effect:"solid",place:"bottom"},s.a.createElement("span",null,"Update Profile Picture"))))),s.a.createElement(N.a,{md:9,className:"mt-10"},s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserRoles"},s.a.createElement(et.a,null,"First Name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",name:"firstname",value:a.state.userProfile.firstname,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.firstname))),s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalForm"},s.a.createElement(et.a,null,"Last Name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",name:"lastname",value:a.state.userProfile.lastname,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.lastname)))),s.a.createElement(N.a,{md:9,className:"mt-10"},s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserId"},s.a.createElement(et.a,null,"User Id"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.userProfile.userId,disabled:!0}))),s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalEmail"},s.a.createElement(et.a,null,"Email"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.userProfile.email,disabled:!0}))))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(F.a,{onClick:a.handleClose_UpdateProfile},"Close"),s.a.createElement(F.a,{onClick:a.handleSave_UpdateProfile,disabled:a.state.isDisabled},"Save Changes"))))},a.getChangePasswordModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.isOpenChangePassword,onHide:a.closeChangePassword},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Update Password")),s.a.createElement(Aa.a.Body,{className:"updateProfileModal"},s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePassword"},s.a.createElement(et.a,null,"Current  Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"oldPassword",autoComplete:"new-password",placeholder:"Enter your Current Password",value:a.state.userProfile.oldPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.oldPassword))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePasswordNew"},s.a.createElement(et.a,null,"New Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"newPassword",autoComplete:"new-password",placeholder:"Enter your New Password",value:a.state.userProfile.newPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.newPassword))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePasswordConfirm"},s.a.createElement(et.a,null,"Confirm New Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"confirmNewPassword",autoComplete:"new-password",placeholder:"Confirm New Password",value:a.state.userProfile.confirmNewPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.confirmNewPassword)))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(F.a,{onClick:a.closeChangePassword},"Close"),s.a.createElement(F.a,{disabled:!a.state.canUpdatePassword,onClick:a.handleSave_UpdatePassword},"Save Changes"))))},a.state={companyId:a.props.userInfo.customer_Id,companyName:a.props.userInfo.customerId,sort:[],pageSize:5,isDisabled:!0,canUpdatePassword:!1,isOpenUpdateModal:!1,userProfileList:[],isOpenChangePassword:!1,userProfile:{firstname:"",lastname:"",username:"",userId:-1,email:"",newPassword:"",oldPassword:"",confirmNewPassword:"",profilePicture:null,customerId:""},errors:{firstname:"",lastname:"",newPassword:"",oldPassword:"",confirmNewPassword:""}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.state,a=t.companyId,n=t.companyName;this.props.companiesList&&0===this.props.companiesList.length&&this.props.getCompaniesList(),-1===a&&this.props.userProfiles&&0!==this.props.userProfiles.length&&this.props.clearUserProfileList(),""!==n&&this.setState({companyId:0},function(){e.props.getUserProfiles(n)})}},{key:"shouldComponentUpdate",value:function(e,t){return-1!==t.companyId||!e.userProfiles||0===e.userProfiles.length||(this.props.clearUserProfileList(),!1)}},{key:"componentWillReceiveProps",value:function(e){e.userProfiles&&this.setState({userProfileList:e.userProfiles})}},{key:"render",value:function(){var e=this,t=this.state.userProfileList;return s.a.createElement("div",{className:"content"},this.getUpdateModal(),this.getChangePasswordModal(),s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(R,{title:s.a.createElement("div",null,s.a.createElement("span",null,"User Profiles")," ",t&&t.length>0?s.a.createElement(Ra,{classNames:"float-right-2",changePageSize:this.handlePageSize,selectedPage:this.state.pageSize}):s.a.createElement("span",null)," "),content:s.a.createElement("div",null,s.a.createElement(D.a,{className:"rowMargin"},s.a.createElement(N.a,{md:8,className:"custom-dropdown"},s.a.createElement(ha,{title:""!==this.state.companyName?this.state.companyName:"Select Customer",disabled:this.props.isGettingProfiles,id:"split-button-userprofile-user",className:"dropdown-50 text-cut",list:this.props.companiesList,onSelectOption:this.onSelectCompany,tooltipID:"administration-userprofile-user",label:"User",direction:"bottom",required:!0,menuItemIdkey:"id",menuItemIdName:"name"}))),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},this.props.isGettingProfiles?s.a.createElement(ua,null):t&&t.length?s.a.createElement(Da.a,{minRows:t&&t.length?0:5,PaginationComponent:Ca,columns:[{Header:"Profile",accessor:"profileImage",minWidth:100,style:Qr,filterable:!1,Cell:function(e){return null===e.original.profilePicture?s.a.createElement("img",{src:z.a,className:"profileImg"}):s.a.createElement("img",{src:"data:image/jpeg;base64,"+"".concat(e.original.profilePicture),className:"profileImg"})}},{Header:function(){return s.a.createElement("span",{className:"sortable"},"First Name")},accessor:"firstName",minWidth:140,style:Qr},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Last Name")},accessor:"lastName",minWidth:140},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Username")},accessor:"username",minWidth:140},{Header:function(){return s.a.createElement("span",{className:"sortable"},"Email")},accessor:"emailAddress",minWidth:140},{Header:"",accessor:"Update",sortable:!1,filterable:!1,minWidth:140,Cell:function(t){return s.a.createElement("div",null,s.a.createElement(F.a,{"data-tip":!0,"data-for":"edit-btn",onClick:function(a){return e.handleShow_UpdateModal(a,t)},className:e.props.componentPermissions&&e.props.componentPermissions.canUpdate?"d-block":"d-none",disabled:!e.props.componentPermissions||!e.props.componentPermissions.canUpdate},s.a.createElement("i",{className:"fa fa-pencil"})),s.a.createElement(fa.a,{id:"edit-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Edit")),s.a.createElement(F.a,{"data-tip":!0,"data-for":"update-password-btn",onClick:function(a){return e.handleShow_UpdatePassword(a,t)}},s.a.createElement("i",{className:"fa fa-key"})),s.a.createElement(fa.a,{id:"update-password-btn",effect:"solid",place:"top"},s.a.createElement("span",null,"Update Password")))},width:120}],data:t,showPagination:!0,defaultPageSize:5,pageSize:this.state.pageSize,sorted:this.state.sort,onSortedChange:this.handleSort,filterable:!0,defaultFilterMethod:Xr,className:"-highlight"}):s.a.createElement("div",{className:"userProfileDiv"},"Select User to view User's Profiles"))))})))))}}]),t}(s.a.Component),Fr={getCompaniesList:ht,getUserProfiles:Q,updateProfile:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a,n){var r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ee(a),r=n(),e.emailAddress===r.User.UserInfo.userId?a(Ns(e)):Is.UserProfile().UpdateUser(e).then(function(e){te(a,e.data)}).catch(function(e){ae(a,e.response.data.message)});case 3:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()},changePassword:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:ne(a),Is.UserProfile().UpdatePassword(e).then(function(e){re(a,e.data)}).catch(function(e){se(a,e.response.data.message)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},clearUserProfileList:function(){return function(){var e=Object(h.a)(f.a.mark(function e(t){return f.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t({type:n.CLEAR_USER_PROFILES});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}},xr=Object(ve.b)(function(e){return{companiesList:e.Company?e.Company.CompaniesList:[],userProfiles:e.UserProfile?e.UserProfile.userProfiles:[],isGettingProfiles:!(!e.UserProfile||!e.UserProfile.isGettingProfiles)&&e.UserProfile.isGettingProfiles,userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},Fr)(Mr),jr=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).getTwinIFrame=function(e){var t=a.props.userInfo.customerId;return s.a.createElement("iframe",{src:"".concat(Me,"/").concat(t,"?mode=").concat(e)})},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.props.componentPermissions;return s.a.createElement("div",{className:"content"},s.a.createElement(C.a,{fluid:!0},s.a.createElement(D.a,null,s.a.createElement(N.a,{md:12},s.a.createElement(_,{title:"Manufacturer Digital twin",category:"",ctTableFullWidth:!0,ctTableResponsive:!0,content:e.canUpdate&&e.canView?this.getTwinIFrame("edit"):e.canView?this.getTwinIFrame("view"):s.a.createElement("div",{className:"no-permission"},"Sorry, You don't have permissions to view this site")})))))}}]),t}(s.a.Component),Gr=Object(ve.b)(function(e){return{permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{},userInfo:e.User.UserInfo&&e.User.UserInfo?e.User.UserInfo:null}},{})(jr),Br=[{name:"Home"},{name:"Administration"},{name:"Device Management"},{name:"Digital Twin"},{name:"Reporting"},{name:"Logging"}],kr=[{path:"/dashboard",name:"Dashboard",icon:"pe-7s-graph",component:Ze,parent:"Home",layout:"/admin"},{path:"/customer",name:"Add Users",icon:"pe-7s-culture",component:va,parent:"Administration",layout:"/admin"},{path:"/monitorCustomer",name:"Monitor Users",icon:"pe-7s-culture",component:xa,parent:"Administration",layout:"/admin"},{path:"/userProfile",name:"User Profile",icon:"pe-7s-culture",component:xr,parent:"Administration",layout:"/admin"},{path:"/devices",name:"Add Devices",icon:"pe-7s-phone",component:Pn,parent:"Device Management",layout:"/admin"},{path:"/monitorDevice",name:"Monitor Devices",icon:"pe-7s-phone",component:Tn,parent:"Device Management",layout:"/admin"},{path:"/errorcodes",name:"Error Codes",icon:"pe-7s-attention",component:sr,parent:"Device Management",layout:"/admin"},{path:"/upload",name:"Upload BOM",icon:"pe-7s-note2",component:_n,parent:"Device Management",layout:"/admin"},{path:"/firmware",name:"Update Firmware",icon:"pe-7s-tools",component:wn,parent:"Device Management",layout:"/admin"},{path:"/userRights",name:"User Management",icon:"pe-7s-science",component:Tr,parent:"",layout:"/admin"},{path:"/manufacturerDigitalTwin",name:"For Manufacturer",icon:"pe-7s-global",component:Gr,parent:"Digital Twin",layout:"/admin"},{path:"/distributorDigitalTwin",name:"For Distributor",icon:"pe-7s-global",component:Fn,parent:"Digital Twin",layout:"/admin"},{path:"/usagereport",name:"Device Usage",icon:"pe-7s-global",component:ar,parent:"Reporting",layout:"/admin"},{path:"/alarmAndWarningReport",name:"Device Alarms & Warnings",icon:"pe-7s-attention",component:mr,parent:"Reporting",layout:"/admin"},{path:"/maintenanceReport",name:"Device Maintenance",icon:"fa fa-pie-chart",component:vr,parent:"Reporting",layout:"/admin"},{path:"/energyReport",name:"Device Energy Consumption",icon:"fa fa-bolt",component:hr,parent:"Reporting",layout:"/admin"},{path:"/PLCDetails",name:"PLC Inverter Details",icon:"pe-7s-plugin",component:pr,parent:"Reporting",layout:"/admin"},{path:"/accesslogs",name:"Access Logs",icon:"pe-7s-note2",component:Rn,parent:"Logging",layout:"/admin"},{path:"/auditlogs",name:"Audit Logs",icon:"pe-7s-science",component:Rn,parent:"Logging",layout:"/admin"}],zr=[{path:"/NotPermitted",name:"",icon:"",component:Ur,parent:"",layout:"/admin"},{path:"/contactAdmin",name:"",icon:"",component:Lr,parent:"",layout:"/admin"}],Hr=a(250),Wr=a.n(Hr),Vr=function(){return!!localStorage.getItem("API_Key")},Yr=function(){return localStorage.getItem("API_Key")},qr=function(){localStorage.removeItem("API_Key"),localStorage.removeItem("state"),window.location.href="/"},Kr=function(){var e=Yr();try{if(null!=e){var t=Wr()(e);if(t&&t.exp&&be()(t.exp)<be()(be()().unix()))return!0}return!1}catch(a){return!0}},Xr=function(e,t){var a=t[e.pivotId||e.id];return"undefined"===typeof a||("object"===typeof a&&null!==a&&a.key?String(a.key).toLowerCase().includes(e.value.toLowerCase()):String(a).toLowerCase().includes(e.value.toLowerCase()))},Qr={whiteSpace:"unset"},Jr=[{mode:0,name:"Tabular Mode"},{mode:1,name:"Graphical Mode"}],Zr=function(e){return e.sort(function(e,t){return(e.createdDate?new Date(e.createdDate):"")<(t.createdDate?new Date(t.createdDate):"")?1:-1})},$r=function(e,t,a){return e.map(function(e){var n=e,r=t.filter(function(e){return e.id==n.formId}),s=a.filter(function(e){return e.id==n.personaId});return r.length&&(n.formName=r[0].formName),s.length&&(n.personaName=s[0].personaName),n})},es=function(e,t,a){return e.map(function(e){var n=e,r=t.filter(function(e){return e.id==n.formId}),s=a.filter(function(e){return e.id==n.roleId});return r.length&&(n.formName=r[0].formName),s.length&&(n.roleName=s[0].role1),n})},ts=function(e,t){return t.filter(function(t){return t.id==e})[0].formName},as=function(e,t,a,n,r){return!!e.filter(function(e){return e[n]==t&&e[r]==a}).length},ns=function(e,t){if(t&&"SuperAdmin"==t.roleName)return e.map(function(e){return e.disabled=!1,e});var a=t&&t.personaPermission?t.personaPermission.map(function(e){return e.formName.toLowerCase()}):[],n=e.filter(function(e){return a.includes(e.name.toLowerCase())}),r=t&&t.rolePermission?t.rolePermission.map(function(e){return e.formName=e.formName.toLowerCase(),e}):[];return n.map(function(e){var t=r.length?r.filter(function(t){return t.formName===e.name.toLowerCase()}):[];return t.length&&(e.disabled=!t[0].canView,e.disabled=null===e.disabled||e.disabled),e})},rs=function(e,t,a){var n=!0,r=t&&t.personaPermission?t.personaPermission.map(function(e){return e.formName.toLowerCase()}):[],s=e.filter(function(e){return r.includes(e.name.toLowerCase())}),o=s.map(function(e){return"".concat(e.layout).concat(e.path)});if(!(n=o.includes(a)))return n;for(var i=t&&t.rolePermission?t.rolePermission.map(function(e){return e.formName=e.formName.toLowerCase(),e}):[],l=function(){var e=s[c];if("".concat(e.layout).concat(e.path)===a){var t=i.length?i.filter(function(t){return t.formName===e.name.toLowerCase()}):[];if(t.length)return n=t[0].canView,"break"}},c=0;c<s.length;c++){if("break"===l())break}return n},ss=function(e,t,a){var n={canDelete:!1,canExport:!1,canInsert:!1,canUpdate:!1,canView:!1},r=t&&t.rolePermission?t.rolePermission.map(function(e){return e.formName=e.formName.toLowerCase(),e}):[],s=e.filter(function(e){return"".concat(e.layout).concat(e.path)===a});if(s.length){var o=s[0],i=r.length?r.filter(function(e){return e.formName===o.name.toLowerCase()}):[];i.length&&(n.canView=i[0].canView,n.canDelete=i[0].canDelete,n.canExport=i[0].canExport,n.canInsert=i[0].canInsert,n.canUpdate=i[0].canUpdate)}return n},os=function(e){var t=kr.filter(function(e){return"/monitorDevice"===e.path})[0],a=e&&e.rolePermission?e.rolePermission:[],n=a.length?a.filter(function(e){return e.formName.toLowerCase()===t.name.toLowerCase()}):[];return!!n.length&&(!!n[0].canView&&n[0].canView)},is=function(e){var t=kr.filter(function(e){return"/devices"===e.path})[0],a=e&&e.rolePermission?e.rolePermission:[],n=a.length?a.filter(function(e){return e.formName.toLowerCase()===t.name.toLowerCase()}):[];return!!n.length&&(!!n[0].canView&&n[0].canInsert)},ls=function(e){var t=kr.filter(function(e){return"/userProfile"===e.path})[0],a=e&&e.rolePermission?e.rolePermission:[],n=a.length?a.filter(function(e){return e.formName.toLowerCase()===t.name.toLowerCase()}):[];return!!n.length&&(!!n[0].canView&&n[0].canInsert)},cs=function(e,t){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){var e=ms(a.result);t(e)},a.onerror=function(e){console.log("Error: ",e)}},ms=function(e){return e.startsWith("data:image/jpeg;base64,")?e.substring(23):e.startsWith("data:image/png;base64,")?e.substring(22):e},ds=function(e,t){"Success"===e?K.b.success("Password Updated!",{position:K.b.POSITION.BOTTOM_RIGHT}):K.b.warn(t,{position:K.b.POSITION.BOTTOM_RIGHT})},us=function(e,t,a){for(var n=e.concat(t),r=0;r<n.length;r++)for(var s=r+1;s<n.length;s++)a(n[r],n[s])&&(n.splice(s,1),s--);return n},ps=function(e,t){var a="";if(null!=e){var n=t.filter(function(t){return t.customerId===e.customerId});n.length&&(a=n[0].name)}return{id:e&&e.customer_Id?e.customer_Id:-1,customerId:e&&e.customerId?e.customerId:"",name:""==a?e.customerId:a}},Es=[{id:".bin",value:".bin"}],fs=[{id:".csv",value:".csv"},{id:".xls",value:".xls"}],hs=[{id:"Smart Fan Box",value:"Smart Fan Box"},{id:"PLC Inverter",value:"PLC Inverter"},{id:"Industrial Fan",value:"Industrial Fan"}],gs=function(e,t){var a=e.toUpperCase(),n=t.toUpperCase(),r=0;return a>n?r=1:a<n&&(r=-1),r},Ss=window.location.origin+"/api/",vs=Yr(),Is={Authenticate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"User/authenticate/";return{Authenticate:function(t){return S.a.post(e,t)}}},Company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"Company/";return vs=Yr(),{CreateCompany:function(t){return S.a.post(e+"create/",t,{headers:{Authorization:"Bearer ".concat(vs)}})},CreateUserProfile:function(t){return S.a.post(e+"CreateCustomerUser/".concat(t.userId,"/").concat(t.customerId,"/").concat(t.roleType,"/").concat(t.firstName,"/").concat(t.lastName,"/").concat(t.emailAddress,"/").concat(t.lang),t,{headers:{Authorization:"Bearer ".concat(vs)}})},getAllCompanies:function(){return S.a.get(e+"getAllCompanies/",{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateCompany:function(t){return S.a.post(e+"update",t,{headers:{Authorization:"Bearer ".concat(vs)}})},GetCustomerList:function(){return S.a.get(e+"getCompanyList/",{headers:{Authorization:"Bearer ".concat(vs)}})}}},Settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss;return vs=Yr(),{GetRolesList:function(){return S.a.get(e+"User/GetRoles/",{headers:{Authorization:"Bearer ".concat(vs)}})},GetRolesListByPersona:function(t){return S.a.get(e+"User/GetRoleByPersona/".concat(t),{headers:{Authorization:"Bearer ".concat(vs)}})},GetCustomerTypes:function(){return S.a.get(e+"Company/GetPersonas/",{headers:{Authorization:"Bearer ".concat(vs)}})},addFormName:function(t){return S.a.post(e+"User/CreateForm/"+t,t,{headers:{Authorization:"Bearer ".concat(vs)}})},GetFormTypes:function(){return S.a.get(e+"User/GetForm/",{headers:{Authorization:"Bearer ".concat(vs)}})},GetPersonaPermissionsList:function(){return S.a.get(e+"Company/GetPersonaPermission",{headers:{Authorization:"Bearer ".concat(vs)}})},GetRolePermissionsList:function(){return S.a.get(e+"User/GetRolePermission",{headers:{Authorization:"Bearer ".concat(vs)}})},CreatePersonaPermissions:function(t){return S.a.post("".concat(e,"Company/CreatePersonaPermission"),t,{headers:{Authorization:"Bearer ".concat(vs)}})},DeletePersonaPermission:function(t){return S.a.post("".concat(e,"Company/DeletePersonaPermission/").concat(t),t,{headers:{Authorization:"Bearer ".concat(vs)}})},DeleteForm:function(t){return S.a.post("".concat(e,"User/DeleteForm/").concat(t),t,{headers:{Authorization:"Bearer ".concat(vs)}})},DeleteRolePermissions:function(t){return S.a.post("".concat(e,"User/DeleteRolePermission/").concat(t),t,{headers:{Authorization:"Bearer ".concat(vs)}})},CreateRolePermissions:function(t){return S.a.post("".concat(e,"User/CreateRolePermission"),t,{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateRolePermissions:function(t){return S.a.post("".concat(e,"User/UpdateRolePermission"),t,{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateForm:function(t){return S.a.post("".concat(e,"User/UpdateForm/").concat(t.formId,"/").concat(t.formName),t,{headers:{Authorization:"Bearer ".concat(vs)}})},UpdatePersonaPermissions:function(t){return S.a.post("".concat(e,"Company/UpdatePersonaPermission"),t,{headers:{Authorization:"Bearer ".concat(vs)}})}}},Device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"Device/";return vs=Yr(),{AddDevice:function(t){return S.a.post(e+"addDevices/",t,{headers:{Authorization:"Bearer ".concat(vs)}})},getDevices:function(){return S.a.get(e+"getAllDevices/",{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateDevice:function(t){return S.a.post(e+"updatedevice",t,{headers:{Authorization:"Bearer ".concat(vs)}})},GetDeviceBatchList:function(){return S.a.get(e+"getdeviceBatchNumber",{headers:{Authorization:"Bearer ".concat(vs)}})},UploadBOM:function(t,a){return S.a.post(e+"uploadBom/".concat(t.companyId,"/").concat(t.deviceBatch,"/").concat(t.fileformat,"/").concat(t.bomType),a,{headers:{Authorization:"Bearer ".concat(vs),"Content-Type":"multipart/form-data"}})},UpdateFirmware:function(t,a){return S.a.post(e+"updateFirmware/".concat(t.companyId,"/").concat(t.deviceBatch,"/").concat(t.fileformat),a,{headers:{Authorization:"Bearer ".concat(vs),"Content-Type":"multipart/form-data"}})},GetErrorCodes:function(){return S.a.get(e+"getAllAlarmWarning",{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateErrorCode:function(t){return S.a.post(e+"updateAlarmWarning",t,{headers:{Authorization:"Bearer ".concat(vs)}})},GetDeviceList:function(){return S.a.get(e+"getDeviceList/",{headers:{Authorization:"Bearer ".concat(vs)}})}}},UserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"User/";return{GetUsers:function(t){return S.a.get(e+"GetUsers/",{headers:{Authorization:"Bearer ".concat(vs)},params:{customerId:t}})},UpdateUser:function(t){return S.a.post(e+"UpdateUser/",t,{headers:{Authorization:"Bearer ".concat(vs)}})},UpdatePassword:function(t){return S.a.post(e+"ResetPassword/",t,{headers:{Authorization:"Bearer ".concat(vs)}})},UpdateMyPassword:function(t){return S.a.post(e+"UpdateUserPassword/",t,{headers:{Authorization:"Bearer ".concat(vs)}})}}},Dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"Dashboard/";return vs=Yr(),{UsageReport:function(t){return S.a.get(e+"UsageReport/"+t.customerId+"/"+t.userId,{headers:{Authorization:"Bearer ".concat(vs)}})},GetAlarmAndWarningReportData:function(t){return S.a.get(e+"AlarmWarningReport/".concat(t.customerId,"/").concat(t.batchId,"/").concat(t.deviceId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},GetMaintenanceReport:function(t){return S.a.get(e+"MaintenanceReport/".concat(t.customerId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},GetInverterDetails:function(t){return S.a.get(e+"DeviceAlarmHistory/".concat(t.customerId,"/").concat(t.deviceId),{headers:{Authorization:"Bearer ".concat(vs)}})},GetEnergyConsumptionReport:function(t){return S.a.get(e+"EnergyData/".concat(t.customerId,"/").concat(t.batchId,"/").concat(t.deviceId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},GetStats:function(t){return S.a.get(e+"getDeviceStats?customerId=".concat(t.customerId,"&userId=").concat(t.userId),{headers:{Authorization:"Bearer ".concat(vs)}})}}},Report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ss+"Report/";return vs=Yr(),{UsageReport:function(t){return S.a.get(e+"UsageReport/"+t.selectedCustomerId+"/"+t.emailId+"/"+t.deviceId+"/"+t.date+"/"+t.days,{headers:{Authorization:"Bearer ".concat(vs)}})},GetAlarmAndWarningReportData:function(t){return S.a.get(e+"AlarmWarningReport/".concat(t.customerId,"/").concat(t.batchId,"/").concat(t.deviceId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},GetMaintenanceReport:function(t){return S.a.get(e+"MaintenanceReport/".concat(t.customerId,"/").concat(t.batchId,"/").concat(t.deviceId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},GetInverterDetails:function(t){return S.a.get(e+"DeviceAlarmHistory/".concat(t.customerId,"/").concat(t.deviceId),{headers:{Authorization:"Bearer ".concat(vs)}})},GetEnergyConsumptionReport:function(t){return S.a.get(e+"DeviceConsumptionReport/".concat(t.customerId,"/").concat(t.deviceId,"/").concat(t.date),{headers:{Authorization:"Bearer ".concat(vs)}})},ExportUsageReport:function(t){return S.a.post(e+"exportUsageReport/"+t.selectedCustomerId+"/"+t.emailId+"/"+t.deviceId+"/"+t.date+"/"+t.days,t,{headers:{Authorization:"Bearer ".concat(vs)}})}}}};!function(e){e.CREATE="CREATE",e.AUTHENTICATE="AUTHENTICATE",e.AUTHENTICATION_SUCCESS="AUTHENTICATION_SUCCESS",e.AUTHENTICATION_FAILED="AUTHENTICATION_FAILED",e.LOADER="LOADER",e.UPDATE_MY_USER_PROFILE="UPDATE_MY_USER_PROFILE",e.UPDATE_MY_USER_PROFILE_SUCCESS="UPDATE_MY_USER_PROFILE_SUCCESS",e.UPDATE_MY_USER_PROFILE_FAILED="UPDATE_MY_USER_PROFILE_FAILED",e.UPDATE_MY_PASSWORD="UPDATE_MY_PASSWORD",e.UPDATE_MY_PASSWORD_SUCCESS="UPDATE_MY_PASSWORD_SUCCESS",e.UPDATE_MY_PASSWORD_FAILED="UPDATE_MY_PASSWORD_FAILED"}(xn||(xn={}));var bs=function(e,t){e({type:xn.AUTHENTICATE,payload:t})},Ps=function(e,t){},Os=function(e){K.b.error("Please provide right credentials",{position:K.b.POSITION.BOTTOM_RIGHT})},Ds=function(e,t){e({type:xn.LOADER,payload:t})},Ns=function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:Cs(a),Is.UserProfile().UpdateUser(e).then(function(e){_s(a,e.data)}).catch(function(e){Rs(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},Cs=function(e){e({type:xn.UPDATE_MY_USER_PROFILE})},_s=function(e,t){K.b.success("Successfully Updated!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:xn.UPDATE_MY_USER_PROFILE_SUCCESS,payload:t})},Rs=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:xn.UPDATE_MY_USER_PROFILE_FAILED})},As=function(e){e({type:xn.UPDATE_MY_PASSWORD})},ys=function(e,t){ds(t.statusCode,t.message),e({type:xn.UPDATE_MY_PASSWORD_SUCCESS,payload:t})},Ts=function(e){K.b.error("Failed!",{position:K.b.POSITION.BOTTOM_RIGHT}),e({type:xn.UPDATE_MY_PASSWORD_FAILED})},Us={UserInfo:{customerId:"",profileImage:"",role:"",userId:"",userName:"",userPermission:{},firstName:"",lastName:"",id:-1,customer_Id:-1,lastLogin:""},isLoggedIn:!1,isLoading:!1,isUpdatingProfile:!1,isUpdatingPassword:!1},Ls={Companies:[],CompaniesList:[],isAddingCompany:!1,isAddingUserProfile:!1,isGettingCompanies:!1},ws={devices:[],isAddingDevice:!1,isGettingDevices:!1,devicesBatchList:[],isUploadingBOM:!1,errorCodes:[],deviceList:[],isUploadingFirmware:!1,isUpdatingErrorCode:!1,isGettingErrorCode:!1},Ms={persona_roles:[],roles:[],personas:[],formNames:[],rolePermissionList:[],isCreatingPersona:!1,isAddingFormName:!1,isCreatingRolePermission:!1,personaPermissionsList:[]},Fs={userProfiles:[],isGettingProfiles:!1},xs={loginAlertStatus:"Not Assigned",addCompanyAlertStatus:"Not Assigned",addDeviceAlertStatus:"Not Assigned",getUsageReportStatus:"Not Assigned"},js={maintenanceReport:{maintainedDevices:[],pendingDevices:[]},isGettingMaintenanceReport:!1,isGettingAlarmsReport:!1,alarmsWarningData:[],usageReport:[],dashboardStats:[],isGettingStats:!1,isGettingUsageData:!1},Gs={usageReport:null,isFetchingUsageReport:!1,alarmReportData:[],inverterData:[],maintenanceReportData:[],energyConsumptionReportData:[],isGettingAlarmsReport:!1,isGettingMaintenanceReport:!1,isGettingInverterDetails:!1,isGettingEnergyDetails:!1},Bs=Object(m.combineReducers)({User:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Us,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case xn.AUTHENTICATE:return Object(p.a)({},e,{UserInfo:{id:t.payload.id?t.payload.id:-1,customerId:t.payload.customerId?t.payload.customerId:"",customer_Id:t.payload.customer_Id?t.payload.customer_Id:-1,profileImage:t.payload.profileImage?t.payload.profileImage:"",userId:t.payload.userId?t.payload.userId:"",role:t.payload.role?t.payload.role:"",userName:t.payload.userName?t.payload.userName:"",firstName:t.payload.firstName?t.payload.firstName:"",lastName:t.payload.lastName?t.payload.lastName:"",userPermission:t.payload.userPermission?t.payload.userPermission:null,lastLogin:be()(new Date).format("hh:mm a")},isLoggedIn:!0});case xn.AUTHENTICATION_FAILED:return Object(p.a)({},e,{IsLoggedIn:!1});case xn.LOADER:return Object(p.a)({},e,{isLoading:t.payload});case xn.UPDATE_MY_USER_PROFILE:return Object(p.a)({},e,{isUpdatingProfile:!0});case xn.UPDATE_MY_USER_PROFILE_SUCCESS:var n=t.payload;return a.UserInfo=Object(p.a)({},a.UserInfo,{firstName:n.firstName,lastName:n.lastName,profileImage:n.profilePicture}),Object(p.a)({},a,{isUpdatingProfile:!1});case xn.UPDATE_MY_USER_PROFILE_FAILED:return Object(p.a)({},e,{isUpdatingProfile:!1});case xn.UPDATE_MY_PASSWORD:return Object(p.a)({},e,{isUpdatingPassword:!0});case xn.UPDATE_MY_PASSWORD_SUCCESS:case xn.UPDATE_MY_PASSWORD_FAILED:return Object(p.a)({},e,{isUpdatingPassword:!1});default:return e}},Company:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ls,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe.ADD_COMPANY:return Object(p.a)({},e,{isAddingCompany:!0});case oe.ADD_COMPANY_SUCCESS:case oe.ADD_COMPANY_FAILED:return Object(p.a)({},e,{isAddingCompany:!1});case oe.ADD_USER_PROFILE:return Object(p.a)({},e,{isAddingUserProfile:!0});case oe.ADD_USER_PROFILE_FAILED:case oe.ADD_USER_PROFILE_SUCESS:return Object(p.a)({},e,{isAddingUserProfile:!1});case oe.UPDATE_COMPANY:var a=Ye.a.cloneDeep(e.Companies),n=t.payload;a=a.map(function(e){return e.id==n.id&&(e.address=n.address,e.name=n.name,e.customerType=n.customerType),e});var r=Ye.a.cloneDeep(e.CompaniesList);return r=r.map(function(e){return e.id==n.id&&(e.address=n.address,e.name=n.name,e.customerType=n.customerType),e}),Object(p.a)({},e,{Companies:a,CompaniesList:r});case oe.UPDATE_COMPANY_FAILED:case oe.UPDATE_COMPANY_SUCCESS:return Object(p.a)({},e);case oe.GET_ALL_COMPANIES:return Object(p.a)({},e,{isGettingCompanies:!0});case oe.GET_ALL_COMPANIES_SUCCESS:return Object(p.a)({},e,{Companies:t.payload,isGettingCompanies:!1});case oe.GET_ALL_COMPANIES_FAILED:return Object(p.a)({},e,{isGettingCompanies:!1});case oe.GET_COMPANIES_LIST:return Object(p.a)({},e);case oe.GET_COMPANIES_LIST_SUCCESS:return Object(p.a)({},e,{CompaniesList:t.payload});case oe.GET_COMPANIES_LIST_FAILED:return Object(p.a)({},e);default:return e}},Device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ws,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case ja.ADD_DEVICE:return Object(p.a)({},e,{isAddingDevice:!0});case ja.ADD_DEVICE_SUCCESS:case ja.ADD_DEVICE_FAILED:return Object(p.a)({},e,{isAddingDevice:!1});case ja.GET_ALL_DEVICES_SUCCESS:return Object(p.a)({},e,{devices:t.payload,isGettingDevices:!1});case ja.GET_ALL_DEVICES_FAILED:return Object(p.a)({},e,{isGettingDevices:!1});case ja.GET_ALL_DEVICES:return Object(p.a)({},e,{isGettingDevices:!0});case ja.UPDATE_DEVICE:var n=t.payload;return a.devices=a.devices.map(function(e){return e.id==n.id&&(e.name=n.deviceName),e}),Object(p.a)({},a,{isAddingDevice:!0});case ja.UPDATE_DEVICE_SUCCESS:case ja.ADD_DEVICE_FAILED:return Object(p.a)({},e,{isAddingDevice:!1});case ja.GET_DEVICE_BATCH:return Object(p.a)({},e);case ja.GET_DEVICE_BATCH_SUCCESS:return Object(p.a)({},e,{devicesBatchList:t.payload});case ja.UPLOAD_BOM:return Object(p.a)({},e,{isUploadingBOM:!0});case ja.UPLOAD_BOM_SUCCESS:case ja.UPLOAD_BOM_FAILED:return Object(p.a)({},e,{isUploadingBOM:!1});case ja.UPDATE_FIRMWARE:return Object(p.a)({},e,{isUploadingFirmware:!0});case ja.UPDATE_FIRMWARE_SUCCESS:case ja.UPDATE_FIRMWARE_FAILED:return Object(p.a)({},e,{isUploadingFirmware:!1});case ja.GET_ERROR_CODES:return Object(p.a)({},e,{isGettingErrorCode:!0});case ja.GET_ERROR_CODES_SUCCESS:return Object(p.a)({},e,{errorCodes:t.payload,isGettingErrorCode:!1});case ja.GET_ERROR_CODES_FAILED:return Object(p.a)({},e,{isGettingErrorCode:!1});case ja.UPDATE_ERROR_CODE_SUCCESS:var r=t.payload;return a.devices=a.errorCodes.map(function(e){return e.code==r.code&&(e.description=r.description,e.reasonAnalysis=r.reasonAnalysis),e}),Object(p.a)({},a,{isUpdatingErrorCode:!1});case ja.UPDATE_ERROR_CODE:return Object(p.a)({},e,{isUpdatingErrorCode:!0});case ja.UPDATE_ERROR_CODE_FAILED:return Object(p.a)({},e,{isUpdatingErrorCode:!1});case ja.GET_DEVICES_LIST_SUCCESS:return Object(p.a)({},e,{deviceList:t.payload});case ja.GET_DEVICES_LIST_FAILED:case ja.GET_DEVICES_LIST:return Object(p.a)({},e);default:return e}},Alerts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xs,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ma.LOGIN_ALERT:return Object(p.a)({},e,{loginAlertStatus:t.payload});case Ma.ADD_COMPANY_ALERT:return Object(p.a)({},e,{addCompanyAlertStatus:t.payload});case Ma.ADD_DEVICE_ALERT:return Object(p.a)({},e,{addDeviceAlertStatus:t.payload});case Ma.GET_USAGE_REPORT_STATUS:return Object(p.a)({},e,{getUsageReportStatus:t.payload});default:return e}},Settings:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ms,a=arguments.length>1?arguments[1]:void 0,n="",r=[],s=[],o=Object(p.a)({},t),i=[];switch(a.type){case at.GET_ROLES:return n=Array.isArray(a.payload)?a.payload:[],s=es(t.rolePermissionList,t.formNames,n),Object(p.a)({},t,{roles:n});case at.GET_ROLES_FAILED:return Object(p.a)({},t,{roles:[]});case at.GET_ROLES_BY_PERSONA:return n=Array.isArray(a.payload)?a.payload:[],Object(p.a)({},t,{persona_roles:n});case at.GET_ROLES_BY_PERSONA_FAILED:return Object(p.a)({},t,{persona_roles:[]});case at.GET_PERSONAS:return n=Array.isArray(a.payload)?a.payload:[],r=$r(t.personaPermissionsList,t.formNames,n),Object(p.a)({},t,{personas:n,personaPermissionsList:r});case at.GET_PERSONAS_FAILED:return Object(p.a)({},t,{personas:[]});case at.GET_FORMS:return n=Array.isArray(a.payload)?a.payload:[],r=$r(t.personaPermissionsList,n,t.personas),s=es(t.rolePermissionList,n,t.roles),Object(p.a)({},t,{formNames:n,personaPermissionsList:r,rolePermissionList:s});case at.GET_FORMS_FAILED:return Object(p.a)({},t,{formNames:[]});case at.ADD_FORM_NAME:return Object(p.a)({},t,{isAddingFormName:!0});case at.ADD_FORM_NAME_SUCCESS:return Object(p.a)({},t,{formNames:[].concat(Object(On.a)(t.formNames),[a.payload]),isAddingFormName:!1});case at.ADD_FORM_NAME_FAILED:return Object(p.a)({},t,{isAddingFormName:!1});case at.CREATE_PERSONA_PERMISSIONS:return Object(p.a)({},t,{isCreatingPersona:!0});case at.CREATE_PERSONA_PERMISSIONS_SUCCESS:var l={formId:a.payload.Form.id,formName:a.payload.Form.name,personaId:a.payload.Persona.id,personaName:a.payload.Persona.name};return Object(p.a)({},t,{isCreatingPersona:!1,personaPermissionsList:[].concat(Object(On.a)(t.personaPermissionsList),[l])});case at.CREATE_PERSONA_PERMISSIONS_FAILED:return Object(p.a)({},t,{isCreatingPersona:!1});case at.CREATE_ROLE_PERMISSIONS:return Object(p.a)({},t,{isCreatingRolePermission:!0});case at.CREATE_ROLE_PERMISSIONS_SUCCESS:var c=a.payload;return c.formName=ts(c.formId,o.formNames),c.roleName=(e=c.roleId,o.roles.filter(function(t){return t.id==e})[0].role1),Object(p.a)({},t,{isCreatingRolePermission:!1,rolePermissionList:[].concat(Object(On.a)(t.rolePermissionList),[c])});case at.CREATE_ROLE_PERMISSIONS_FAILED:return Object(p.a)({},t,{isCreatingRolePermission:!1});case at.GET_PERSONA_PERMISSIONS:return Object(p.a)({},t);case at.GET_PERSONA_PERMISSIONS_SUCCESS:return n=Array.isArray(a.payload)?a.payload:[],n=$r(n,t.formNames,t.personas),Object(p.a)({},t,{personaPermissionsList:n});case at.GET_PERSONA_PERMISSIONS_FAILED:return Object(p.a)({},t,{personaPermissionsList:[]});case at.GET_ROLE_PERMISSIONS:return Object(p.a)({},t);case at.GET_ROLE_PERMISSIONS_SUCCESS:return n=Array.isArray(a.payload)?a.payload:[],n=es(n,t.formNames,t.roles),Object(p.a)({},t,{rolePermissionList:n});case at.GET_ROLE_PERMISSIONS_FAILED:return Object(p.a)({},t,{rolePermissionList:[]});case at.DELETE_PERSONA_PERMISSION:return Object(p.a)({},t);case at.DELETE_PERSONA_PERMISSION_SUCCESS:return i=t.personaPermissionsList.filter(function(e){return e.id!=a.payload}),Object(p.a)({},t,{personaPermissionsList:i});case at.DELETE_PERSONA_PERMISSION_FAILED:return Object(p.a)({},t);case at.UPDATE_ROLE_PERMISSIONS_SUCCESS:var m=a.payload;return o.rolePermissionList=o.rolePermissionList.map(function(e){return e.id==m.id&&(e.canView=m.canView,e.canInsert=m.canInsert,e.canUpdate=m.canUpdate,e.canDelete=m.canDelete,e.canExport=m.canExport),e}),Object(p.a)({},o);case at.UPDATE_ROLE_PERMISSIONS_FAILED:case at.UPDATE_ROLE_PERMISSIONS:return Object(p.a)({},t);case at.UPDATE_FORM_NAME_SUCCESS:var d=a.payload;return o.formNames=o.formNames.map(function(e){return e.id==d.id&&(e.formName=d.formName),e}),Object(p.a)({},o);case at.UPDATE_FORM_NAME_FAILED:case at.UPDATE_FORM_NAME:return Object(p.a)({},t);case at.UPDATE_PERSONA_PERMISSIONS_SUCCESS:var u=a.payload;return o.personaPermissionsList=o.personaPermissionsList.map(function(e){var t;return e.id==u.id&&(e.formId=u.formId,e.personaId=u.personaId,e.formName=ts(u.formId,o.formNames),e.personaName=(t=u.personaId,o.personas.filter(function(e){return e.id==t})[0].personaName)),e}),Object(p.a)({},o);case at.UPDATE_PERSONA_PERMISSIONS_FAILED:case at.UPDATE_PERSONA_PERMISSIONS:case at.DELETE_FORM:return Object(p.a)({},t);case at.DELETE_FORM_SUCCESS:return i=t.formNames.filter(function(e){return e.id!=a.payload}),Object(p.a)({},t,{formNames:i});case at.DELETE_FORM_FAILED:case at.DELETE_ROLE_PERMISSION:return Object(p.a)({},t);case at.DELETE_ROLE_PERMISSION_SUCCESS:return i=t.rolePermissionList.filter(function(e){return e.id!=a.payload}),Object(p.a)({},t,{rolePermissionList:i});case at.DELETE_ROLE_PERMISSION_FAILED:return Object(p.a)({},t);default:return t}},UserProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fs,t=arguments.length>1?arguments[1]:void 0,a=Object(p.a)({},e);switch(t.type){case n.GET_ALL_USER_PROFILES:return Object(p.a)({},e,{userProfiles:[],isGettingProfiles:!0});case n.GET_ALL_USER_PROFILES_SUCCESS:return Object(p.a)({},e,{userProfiles:t.payload,isGettingProfiles:!1});case n.GET_ALL_USER_PROFILES_FAILED:return Object(p.a)({},e,{userProfiles:[],isGettingProfiles:!1});case n.CLEAR_USER_PROFILES:return Object(p.a)({},e,{userProfiles:[]});case n.UPDATE_USER_PROFILES:return Object(p.a)({},e,{isUpdatingProfile:!0});case n.UPDATE_USER_PROFILES_SUCCESS:var r=t.payload;return a.userProfiles=a.userProfiles.map(function(e){return e.id===r.id&&(e.firstName=r.firstName,e.lastName=r.lastName,e.profilePicture=r.profilePicture),e}),Object(p.a)({},a,{isUpdatingProfile:!1});case n.UPDATE_USER_PROFILES_FAILED:return Object(p.a)({},e,{isUpdatingProfile:!1});case n.UPDATE_PASSWORD:return Object(p.a)({},e,{isUpdatingPassword:!0});case n.UPDATE_PASSWORD_SUCCESS:case n.UPDATE_PASSWORD_FAILED:return Object(p.a)({},e,{isUpdatingPassword:!1});default:return e}},Dashboard:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:js,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X.GET_MAINTAINANCE_REPORT:return Object(p.a)({},e,{maintenanceReport:{maintainedDevices:[],pendingDevices:[]},isGettingMaintenanceReport:!0});case X.GET_MAINTAINANCE_REPORT_SUCCESS:return Object(p.a)({},e,{maintenanceReport:{maintainedDevices:t.payload.data.maintainedDevice,pendingDevices:t.payload.data.pendingDevice},isGettingMaintenanceReport:!1});case X.GET_MAINTAINANCE_REPORT_FAILED:return Object(p.a)({},e,{maintenanceReport:{maintainedDevices:[],pendingDevices:[]},isGettingMaintenanceReport:!1});case X.GET_USAGE_REPORT:return Object(p.a)({},e,{usageReport:[],isGettingUsageData:!0});case X.GET_USAGE_REPORT_SUCCESS:return Object(p.a)({},e,{usageReport:t.payload,isGettingUsageData:!1});case X.GET_USAGE_REPORT_FAILED:return Object(p.a)({},e,{usageReport:[],isGettingUsageData:!1});case X.DASHBOARD_GET_ALARMS_REPORT:return Object(p.a)({},e,{alarmsWarningData:[],isGettingAlarmsReport:!0});case X.DASHBOARD_GET_ALARMS_REPORT_SUCCESS:return Object(p.a)({},e,{alarmsWarningData:t.payload,isGettingAlarmsReport:!1});case X.DASHBOARD_GET_ALARMS_REPORT_FAILED:return Object(p.a)({},e,{alarmsWarningData:[],isGettingAlarmsReport:!1});case X.GET_STATS:return Object(p.a)({},e,{dashboardStats:[],isGettingStats:!0});case X.GET_STATS_SUCCESS:return Object(p.a)({},e,{dashboardStats:t.payload,isGettingStats:!1});case X.GET_STATS_FAILED:return Object(p.a)({},e,{dashboardStats:[],isGettingStats:!1});default:return e}},Report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gs,t=arguments.length>1?arguments[1]:void 0;Object(p.a)({},e);switch(t.type){case za.GET_ALL_USAGEREPORT:return Object(p.a)({},e,{usageReport:null,isFetchingUsageReport:!0});case za.GET_ALL_USAGEREPORT_SUCCESS:return Object(p.a)({},e,{usageReport:t.payload,isFetchingUsageReport:!1});case za.GET_ALL_USAGEREPORT_FAILED:return Object(p.a)({},e,{isFetchingUsageReport:!1});case za.GET_ALARMS_REPORT:return Object(p.a)({},e,{isGettingAlarmsReport:!0});case za.GET_ALARMS_REPORT_SUCCESS:return Object(p.a)({},e,{alarmReportData:t.payload,isGettingAlarmsReport:!1});case za.GET_ALARMS_REPORT_FAILED:return Object(p.a)({},e,{isGettingAlarmsReport:!1,alarmReportData:[]});case za.GET_MAINTENANCE_REPORT:return Object(p.a)({},e,{maintenanceReportData:[],isGettingMaintenanceReport:!0});case za.GET_MAINTENANCE_REPORT_SUCCESS:return Object(p.a)({},e,{maintenanceReportData:t.payload,isGettingMaintenanceReport:!1});case za.GET_MAINTENANCE_REPORT_FAILED:return Object(p.a)({},e,{maintenanceReportData:[],isGettingMaintenanceReport:!1});case za.GET_INVERTER_DETAILS:return Object(p.a)({},e,{isGettingInverterDetails:!0});case za.GET_INVERTER_DETAILS_SUCCESS:return Object(p.a)({},e,{inverterData:t.payload,isGettingInverterDetails:!1});case za.GET_INVERTER_DETAILS_FAILED:return Object(p.a)({},e,{isGettingInverterDetails:!1,inverterData:[]});case za.GET_ENERGY_CONSUMPTION_DATA:return Object(p.a)({},e,{isGettingEnergyDetails:!0});case za.GET_ENERGY_CONSUMPTION_SUCCESS:return Object(p.a)({},e,{energyConsumptionReportData:t.payload,isGettingEnergyDetails:!1});case za.GET_ENERGY_CONSUMPTION_FAILED:return Object(p.a)({},e,{isGettingEnergyDetails:!1,energyConsumptionReportData:[]});case za.CLEAR_REPORT_DATA:var a=t.payload;return Object(p.a)({},e,Object(y.a)({},a,[]));default:return e}}});var ks=function(){var e=window.localStorage.getItem("state");if(null!==e)return JSON.parse(e)}(),zs=Object(m.createStore)(Bs,ks,Object(m.compose)(Object(u.composeWithDevTools)(Object(m.applyMiddleware)(d.a))));zs.subscribe(function(){return function(e){try{var t=JSON.stringify(e);window.localStorage.setItem("state",t),sessionStorage.setItem("state",t)}catch(a){console.log(a)}}(zs.getState())});a(511),a(512),a(513),a(514),a(515),a(516);var Hs=a(545),Ws=a(542),Vs=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).resetState=function(){a.setState({userProfile:Object(p.a)({},a.state.userProfile,{id:-1,firstname:"",lastname:"",username:"",userId:"",email:"",profilePicture:"",customerId:"",newPassword:"",oldPassword:"",confirmNewPassword:"",customer_Id:-1})})},a.removeErrors=function(){a.setState({errors:{firstname:"",lastname:"",newPassword:"",oldPassword:"",confirmNewPassword:"",profilePicture:""}})},a.handleClose=function(){a.removeErrors(),a.resetState(),a.closeModal()},a.closeModal=function(){a.setState({isOpened:!1})},a.openModal=function(){a.setState({isOpened:!0,isOpenUpdateModal:!1,userProfile:a.getUserProfileFromProps()})},a.handleEdit=function(){a.setState({isOpenUpdateModal:!0,isOpened:!1,userProfile:a.getUserProfileFromProps()})},a.getUserProfileFromProps=function(){return Object(p.a)({},a.state.userProfile,{id:a.props.userInfo&&a.props.userInfo.id?a.props.userInfo.id:-1,firstname:a.props.userInfo&&a.props.userInfo.firstName?a.props.userInfo.firstName:"",lastname:a.props.userInfo&&a.props.userInfo.lastName?a.props.userInfo.lastName:"",username:a.props.userInfo&&a.props.userInfo.userName?a.props.userInfo.userName:"",userId:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",email:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",profilePicture:a.props.userInfo&&a.props.userInfo.profileImage?a.props.userInfo.profileImage:null,roleName:a.props.userInfo&&a.props.userInfo.userPermission.roleName?a.props.userInfo.userPermission.roleName:"",personaName:a.props.userInfo&&a.props.userInfo.userPermission.personaName?a.props.userInfo.userPermission.personaName:"",customerId:a.props.userInfo&&a.props.userInfo.customerId?a.props.userInfo.customerId:"",customer_Id:a.props.userInfo&&a.props.userInfo.customer_Id?a.props.userInfo.customer_Id:-1})},a.handleImgUpload=function(e){var t=e.currentTarget.files[0];cs(t,function(e){e,a.setState({isDisabled:!1,userProfile:Object(p.a)({},a.state.userProfile,{profilePicture:e})})})},a.handleInputChange=function(e){var t={},n=!1,r=e.currentTarget.name,s=e.currentTarget.value;""==s.trimLeft().trimRight()?(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"Required")),n=!0):(t=Object(p.a)({},a.state.errors,Object(y.a)({},r,"")),n=!1),a.setState({errors:t,isDisabled:n,userProfile:Object(p.a)({},a.state.userProfile,Object(y.a)({},r,s))}),"oldPassword"!==r&&"newPassword"!==r&&"confirmNewPassword"!==r||a.validateUpdatePassword()},a.isEmptyProfileImage=function(e){return""===e||null===e||void 0===e},a.getViewProfileModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.isOpened,onHide:a.handleClose,bsSize:"medium"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"My Profile")),s.a.createElement(Aa.a.Body,{id:"user-info-modal-body"},s.a.createElement(D.a,{className:"mb-20"},s.a.createElement(N.a,{md:4,xs:4}),s.a.createElement(N.a,{md:4,xs:4,className:"text-center"},s.a.createElement("img",{className:"view-profile-img",src:a.isEmptyProfileImage(a.state.userProfile.profilePicture)?z.a:"data:image/jpeg;base64,"+a.state.userProfile.profilePicture,alt:"..."}),s.a.createElement("h4",{className:"user-name"},s.a.createElement("br",null),s.a.createElement("small",null,a.state.userProfile.username)),s.a.createElement("div",null," ",s.a.createElement("p",{className:"description"},a.state.userProfile.userId)),s.a.createElement("div",null,s.a.createElement(F.a,{onClick:function(){return a.handleEdit()},bsStyle:"warning",className:"buttonColor mt-10"},s.a.createElement("i",{className:"fa fa-pencil"})," Edit Profile"))),s.a.createElement(N.a,{md:4,xs:4})),s.a.createElement("hr",null),s.a.createElement(D.a,null,s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Customer ID")),s.a.createElement("div",null,s.a.createElement("small",null,a.state.userProfile.customerId))),s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Customer Type ")),s.a.createElement("div",null,s.a.createElement("small",null,a.state.userProfile.personaName))),s.a.createElement(N.a,{md:4,className:"text-center"},s.a.createElement("div",null,s.a.createElement("strong",null,"Role ")),s.a.createElement("div",null,s.a.createElement("small",null,a.state.userProfile.roleName)))))))},a.componentWillMount=function(){setTimeout(function(){a.setState({welcomeText:""})},1e3*a.state.timeout_in_seconds)},a.onLogout=function(e){qr()},a.LogoutButton=function(){return s.a.createElement("div",{onClick:function(e){return a.onLogout(e)}},s.a.createElement("i",{"data-tip":!0,"data-for":"logout",className:"fa fa-sign-out"})," Log out")},a.getDropdownTitle=function(){return s.a.createElement("span",null," ",a.isEmptyProfileImage(a.props.userInfo.profileImage)?s.a.createElement(wr.a,{src:z.a}):s.a.createElement(wr.a,{src:"data:image/jpeg;base64,"+a.props.userInfo.profileImage}),"  ",a.state.welcomeText," ".concat(a.props.userInfo.firstName," ").concat(a.props.userInfo.lastName))},a.getUpdateModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.isOpenUpdateModal,onHide:a.handleClose_UpdateProfile,bsSize:"large"},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Update Profile")),s.a.createElement(Aa.a.Body,{className:"updateProfileModal"},s.a.createElement(N.a,{md:3},s.a.createElement("div",{className:"paddingTopLeft"},null===a.state.userProfile.profilePicture?s.a.createElement("span",null,s.a.createElement(wr.a,{src:z.a,rounded:!0,className:"profileImg-lg profile-image-overlay"}),s.a.createElement(wr.a,{style:{filter:"contrast(0.1)"},src:z.a,rounded:!0,className:"profileImg-lg"})):s.a.createElement("span",null," ",s.a.createElement(wr.a,{src:"data:image/jpeg;base64,"+a.state.userProfile.profilePicture,rounded:!0,className:"profileImg-lg profile-image-overlay"}),s.a.createElement(wr.a,{style:{filter:"contrast(0.1)"},src:"data:image/jpeg;base64,"+a.state.userProfile.profilePicture,rounded:!0,className:"profileImg-lg"})),s.a.createElement("div",{"data-tip":!0,"data-for":"file-upload-btn"},s.a.createElement("input",{onChange:a.handleImgUpload,type:"file",name:"profilePicture",accept:"image/x-png,image/jpeg",className:"custom-file-input"}),s.a.createElement(fa.a,{id:"file-upload-btn",effect:"solid",place:"bottom"},s.a.createElement("span",null,"Update Profile Picture"))))),s.a.createElement(N.a,{md:9,className:"mt-10"},s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserRoles"},s.a.createElement(et.a,null,"First Name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",name:"firstname",value:a.state.userProfile.firstname,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.firstname))),s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalForm"},s.a.createElement(et.a,null,"Last Name"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",name:"lastname",value:a.state.userProfile.lastname,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.lastname)))),s.a.createElement(N.a,{md:9,className:"mt-10"},s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalUserId"},s.a.createElement(et.a,null,"User Id"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.userProfile.userId,disabled:!0}))),s.a.createElement(N.a,{xs:6,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"formHorizontalEmail"},s.a.createElement(et.a,null,"Email"),s.a.createElement(tt.a,{bsClass:"form-control",type:"text",value:a.state.userProfile.email,disabled:!0}))))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(F.a,{onClick:a.handleClose_UpdateProfile},"Close"),s.a.createElement(F.a,{onClick:a.handleSave_UpdateProfile,disabled:a.state.isDisabled},"Save Changes"))))},a.handleClose_UpdateProfile=function(){a.removeErrors(),a.setState({isOpenUpdateModal:!1,isOpened:!0})},a.handleSave_UpdateProfile=function(){var e=a.props.userInfo;e.firstName!==a.state.userProfile.firstname&&(e.firstName=a.state.userProfile.firstname),e.lastName!==a.state.userProfile.lastname&&(e.lastName=a.state.userProfile.lastname),e.profilePicture!==a.state.userProfile.profilePicture&&(e.profilePicture=a.state.userProfile.profilePicture);var t={id:a.state.userProfile.id,userId:a.state.userProfile.userId,firstName:a.state.userProfile.firstname,lastName:a.state.userProfile.lastname,userName:a.state.userProfile.username,profilePicture:a.state.userProfile.profilePicture,customerId:a.state.userProfile.customer_Id,emailAddress:a.state.userProfile.email};a.props.updateProfile(t),a.handleClose_UpdateProfile()},a.getChangePasswordModal=function(){return s.a.createElement("div",null,s.a.createElement(Aa.a,{show:a.state.isOpenChangePassword,onHide:a.closeChangePassword},s.a.createElement(Aa.a.Header,{closeButton:!0},s.a.createElement(Aa.a.Title,null,"Update Password")),s.a.createElement(Aa.a.Body,{className:"updateProfileModal"},s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePassword"},s.a.createElement(et.a,null,"Current  Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"oldPassword",autoComplete:"new-password",placeholder:"Enter your Current Password",value:a.state.userProfile.oldPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.oldPassword))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePasswordNew"},s.a.createElement(et.a,null,"New Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"newPassword",autoComplete:"new-password",placeholder:"Enter your New Password",value:a.state.userProfile.newPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.newPassword))),s.a.createElement(N.a,{md:12,className:"custom-inputs"},s.a.createElement($e.a,{controlId:"updatePasswordConfirm"},s.a.createElement(et.a,null,"Confirm New Password"),s.a.createElement(tt.a,{bsClass:"form-control",type:"password",name:"confirmNewPassword",autoComplete:"new-password",placeholder:"Confirm New Password",value:a.state.userProfile.confirmNewPassword,onChange:a.handleInputChange}),s.a.createElement("span",{className:"error"},a.state.errors.confirmNewPassword)))),s.a.createElement(Aa.a.Footer,null,s.a.createElement(F.a,{onClick:a.closeChangePassword},"Close"),s.a.createElement(F.a,{disabled:!a.state.canUpdatePassword,onClick:a.handleSave_UpdatePassword},"Update"))))},a.handleSave_UpdatePassword=function(){if(a.validateConfirmPassword())if(a.validatePasswordStrength()){var e={currentPassword:a.state.userProfile.oldPassword,newPassword:a.state.userProfile.newPassword,email:a.state.userProfile.email};a.props.resetPassword(e),a.closeChangePassword()}else a.setState({canUpdatePassword:!1,errors:Object(p.a)({},a.state.errors,{newPassword:"Password should contain at least one number, one letter, and 8-15 character length."})})},a.closeChangePassword=function(){a.removeErrors(),a.resetState(),a.setState({isOpenChangePassword:!1,canUpdatePassword:!1})},a.openChangePassword=function(){a.removeErrors(),a.resetState(),a.setState({isOpenChangePassword:!0,userProfile:Object(p.a)({},a.state.userProfile,{id:a.props.userInfo&&a.props.userInfo.id?a.props.userInfo.id:-1,firstname:a.props.userInfo&&a.props.userInfo.firstName?a.props.userInfo.firstName:"",lastname:a.props.userInfo&&a.props.userInfo.lastName?a.props.userInfo.lastName:"",username:a.props.userInfo&&a.props.userInfo.userName?a.props.userInfo.userName:"",userId:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",email:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",profilePicture:a.props.userInfo&&a.props.userInfo.profileImage?a.props.userInfo.profileImage:null,roleName:a.props.userInfo&&a.props.userInfo.userPermission.roleName?a.props.userInfo.userPermission.roleName:"",personaName:a.props.userInfo&&a.props.userInfo.userPermission.personaName?a.props.userInfo.userPermission.personaName:"",customerId:a.props.userInfo&&a.props.userInfo.customerId?a.props.userInfo.customerId:""})})},a.validateUpdatePassword=function(){var e=a.state.userProfile,t=e.oldPassword,n=e.newPassword,r=e.confirmNewPassword;""===t||""===n||""===r?a.setState({canUpdatePassword:!1}):a.setState({canUpdatePassword:!0})},a.validatePasswordStrength=function(){return a.state.userProfile.newPassword.match("(?!^[0-9]*$)(?!^[a-zA-Z]*$)^([a-zA-Z0-9]{8,15})$")},a.validateConfirmPassword=function(){var e=a.state.userProfile;return e.newPassword!==e.confirmNewPassword?(a.setState({canUpdatePassword:!1,errors:Object(p.a)({},a.state.errors,{confirmNewPassword:"Password doesn't match"})}),!1):(a.setState({canUpdatePassword:!0,errors:Object(p.a)({},a.state.errors,{confirmNewPassword:""})}),!0)},a.state={welcomeText:"Welcome",timeout_in_seconds:60,isOpened:!1,isOpenUpdateModal:!1,canUpdatePassword:!1,isOpenChangePassword:!1,userProfile:{id:a.props.userInfo&&a.props.userInfo.id?a.props.userInfo.id:-1,firstname:a.props.userInfo&&a.props.userInfo.firstName?a.props.userInfo.firstName:"",lastname:a.props.userInfo&&a.props.userInfo.lastName?a.props.userInfo.lastName:"",username:a.props.userInfo&&a.props.userInfo.userName?a.props.userInfo.userName:"",userId:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",email:a.props.userInfo&&a.props.userInfo.userId?a.props.userInfo.userId:"",profilePicture:a.props.userInfo&&a.props.userInfo.profileImage?a.props.userInfo.profileImage:null,roleName:a.props.userInfo&&a.props.userInfo.userPermission.roleName?a.props.userInfo.userPermission.roleName:"",personaName:a.props.userInfo&&a.props.userInfo.userPermission.personaName?a.props.userInfo.userPermission.personaName:"",customerId:a.props.userInfo&&a.props.userInfo.customerId?a.props.userInfo.customerId:"",customer_Id:a.props.userInfo&&a.props.userInfo.customer_Id?a.props.userInfo.customer_Id:-1,newPassword:"",oldPassword:"",confirmNewPassword:""},errors:{firstname:"",lastname:"",newPassword:"",oldPassword:"",confirmNewPassword:"",profilePicture:""}},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,this.getViewProfileModal(),this.getUpdateModal(),this.getChangePasswordModal(),s.a.createElement(ba.a,{className:"w-100"},s.a.createElement(Pa.a,{eventKey:3,onClick:function(){e.props.history.push("/admin/dashboard")}},s.a.createElement("span",{className:"main-title"},"Xavor IoT Platform Portal")),s.a.createElement(Pa.a,{className:"float-right"},s.a.createElement("span",{id:"nav-dropdown2"},s.a.createElement(Ws.a,{className:"pull-right",eventKey:4,title:this.getDropdownTitle(),id:"nav-dropdown"},s.a.createElement(Ea.a,{eventKey:"4.1",onClick:function(){e.openModal()}},s.a.createElement("i",{className:"fa fa-user"})," View Profile"),s.a.createElement(Ea.a,{eventKey:"4.2",onClick:function(){e.openChangePassword()}},s.a.createElement("i",{className:"fa fa-lock"})," Change Password"),s.a.createElement(Ea.a,{divider:!0}),s.a.createElement(Ea.a,{eventKey:"4.3"},this.LogoutButton()))))))}}]),t}(s.a.Component),Ys={updateProfile:Ns,resetPassword:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:As(a),Is.UserProfile().UpdatePassword(e).then(function(e){ys(a,e.data)}).catch(function(e){Ts(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()},UpdateUserPassword:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:As(a),Is.UserProfile().UpdateMyPassword(e).then(function(e){ys(a,e.data)}).catch(function(e){Ts(a)});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}},qs=Object(ve.b)(function(e){return{userInfo:e.User&&e.User.UserInfo?e.User.UserInfo:null}},Ys)(Vs),Ks=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).mobileSidebarToggle=function(e){!1===a.state.sidebarExists&&a.setState({sidebarExists:!0}),e.preventDefault(),document.documentElement.classList.toggle("nav-open");var t=document.createElement("div");t.id="bodyClick",t.onclick=function(){document.documentElement.classList.toggle("nav-open")},document.body.appendChild(t)},a.state={sidebarExists:!1},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement(Hs.a,{fluid:!0},s.a.createElement(Hs.a.Header,null,s.a.createElement(Hs.a.Toggle,{onClick:this.mobileSidebarToggle})),s.a.createElement(Hs.a.Collapse,null,s.a.createElement(qs,this.props)))}}]),t}(s.a.Component),Xs=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement("footer",{className:"footer"},s.a.createElement(C.a,{fluid:!0},s.a.createElement("p",{className:"copyright pull-right"},"\xa9 Copyright ",(new Date).getFullYear()," - Xavor IoT Platform Portal - Product of ",s.a.createElement("a",{href:"https://www.xavor.com/products",target:"_blank"},"Xavor Corporation"),". All Rights Reserved")))}}]),t}(r.Component),Qs=a(114),Js=a.n(Qs),Zs=function(e){function t(){var e,a;Object(v.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(b.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t){t.disabled?e.preventDefault():a.props.onlyOpenSelectedSubMenu(t.parent?t.parent:"Administration")},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"activeRoute",value:function(e,t){return window.location.pathname.indexOf(e)>-1?"active":""}},{key:"render",value:function(){var e=this;return s.a.createElement("ul",{className:this.props.activeMenu.includes(this.props.parent)?"nav submenu_show":"nav submenu_hide"},this.props.subRoutes.length>0&&this.props.subRoutes.map(function(t,a){return s.a.createElement("li",{className:e.activeRoute(t.layout+t.path,t.disabled),key:a},s.a.createElement(l.b,{to:t.layout+t.path,className:t.disabled?"nav-disabled":"nav-link",activeClassName:"active",onClick:function(a){return e.handleClick(a,t)}},s.a.createElement("i",{className:t.icon}),s.a.createElement("p",null,t.name)))}))}}]),t}(s.a.Component),$s=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).fetchData=function(){a.props.getForms(),a.props.getRolesList(),a.props.getPersonas(),a.props.getPersonaPermissionsList(),a.props.getRolePermissionList()},a.onlyOpenSelectedSubMenu=function(e){a.setState({activeMenu:[e]})},a.toggleNav=function(e){if(e.preventDefault(),e.target.text&&a.state.activeMenu.includes(e.target.text))a.setState({activeMenu:a.state.activeMenu.filter(function(t){return t!==e.target.text})});else if(e.target.text){var t=a.state.activeMenu;t.push(e.target.text),a.setState({activeMenu:t})}},a.state={width:window.innerWidth,isActive:!1,activeMenu:[]},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"activeRoute",value:function(e){return this.props.location.pathname.indexOf(e)>-1?"active":""}},{key:"updateDimensions",value:function(){this.setState({width:window.innerWidth})}},{key:"componentWillMount",value:function(){var e=this;this.fetchData();var t=ns(this.props.routes,this.props.userPermissions).filter(function(t){if(e.props.location.pathname.includes(t.path))return t});if(t&&t.length){var a=t[0].parent?t[0].parent:"Administration",n=this.state.activeMenu;n.push(a),this.setState({activeMenu:n})}}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.addEventListener("resize",this.updateDimensions.bind(this))}},{key:"render",value:function(){var e=this,t=ns(this.props.routes,this.props.userPermissions),a=Br.filter(function(e){return t.filter(function(t){return t.parent===e.name}).length>0}),n={backgroundImage:"url("+this.props.image+")"};return s.a.createElement("div",{id:"sidebar",className:"sidebar","data-color":this.props.color,"data-image":this.props.image},this.props.hasImage?s.a.createElement("div",{className:"sidebar-background",style:n}):null,s.a.createElement("div",{className:"logo",onClick:function(){e.props.history.push("/admin/dashboard")}},s.a.createElement("a",{className:"simple-text logo-normal"},s.a.createElement("div",{className:"logo-img"},s.a.createElement("img",{src:Js.a,alt:"logo_image"})))),s.a.createElement("div",{className:"sidebar-wrapper"},s.a.createElement("ul",{className:"nav"},a.map(function(a,n){return s.a.createElement("li",{key:n,id:a.name.split(" ").join(""),onClick:e.toggleNav,className:"clickable"},s.a.createElement("a",null,a.name,s.a.createElement("i",{className:e.state.activeMenu.includes(a.name)?"fa fa-angle-down fa-xs sidebarNavItem":"fa fa-angle-right fa-xs sidebarNavItem"})),s.a.createElement(Zs,{subRoutes:t.filter(function(e){return e.parent===a.name}),activeMenu:e.state.activeMenu,parent:a.name,onlyOpenSelectedSubMenu:e.onlyOpenSelectedSubMenu}))}))))}}]),t}(s.a.Component),eo={getRolesList:bt,getPersonas:At,getForms:Ut,getPersonaPermissionsList:kt,getRolePermissionList:$t},to=Object(ve.b)(function(e){return{roles:e.Settings&&null!=e.Settings.roles?e.Settings.roles:[],personas:e.Settings&&null!=e.Settings.personas?e.Settings.personas:[],forms:e.Settings&&null!=e.Settings.personas?e.Settings.formNames:[],personaPermissionsList:e.Settings&&null!=e.Settings.personaPermissionsList?e.Settings.personaPermissionsList:[],rolePermissionList:e.Settings&&null!=e.Settings.rolePermissionList?e.Settings.rolePermissionList:[],userPermissions:e.User&&e.User.UserInfo&&null!=e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:null}},eo)($s),ao=a(253),no=a.n(ao),ro=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).getPagesRoutes=function(e){return e.map(function(e,t){var n=rs(kr,a.props.permissions,e.layout+e.path);if("/admin"===e.layout){if(n||a.props.location.pathname==Ae){var r=ss(kr,a.props.permissions,e.layout+e.path);return s.a.createElement(c.b,{path:e.layout+e.path,render:function(t){return s.a.createElement(e.component,Object.assign({},t,{componentPermissions:r}))},key:t})}return s.a.createElement(c.b,{render:function(e){return s.a.createElement(Ur,e)},path:e.layout+e.path,key:t})}return null})},a.getValidationRoutes=function(e){return e.map(function(e,t){return"/admin"===e.layout?s.a.createElement(c.b,{path:e.layout+e.path,render:function(t){return s.a.createElement(e.component,t)},key:t}):null})},a.state={image:no.a,color:"#CCCCCC",hasImage:!1,fixedClasses:"dropdown show-dropdown open"},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){var e=this.getPagesRoutes(kr).concat(this.getValidationRoutes(zr));return s.a.createElement("div",{className:"wrapper"},s.a.createElement(to,Object.assign({},this.props,{routes:kr,image:this.state.image,color:this.state.color,hasImage:this.state.hasImage})),s.a.createElement("div",{id:"main-panel",className:"main-panel",ref:"mainPanel"},s.a.createElement(Ks,this.props),s.a.createElement(c.d,null,e),s.a.createElement(Xs,null)))}}]),t}(s.a.Component),so=Object(ve.b)(function(e){return{permissions:e.User.UserInfo&&e.User.UserInfo.userPermission?e.User.UserInfo.userPermission:{}}},{})(ro),oo=a(543),io=(a(526),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).mobileSidebarToggle=a.mobileSidebarToggle.bind(Object(w.a)(a)),a.state={sidebarExists:!1},a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"mobileSidebarToggle",value:function(e){!1===this.state.sidebarExists&&this.setState({sidebarExists:!0}),e.preventDefault(),document.documentElement.classList.toggle("nav-open");var t=document.createElement("div");t.id="bodyClick",t.onclick=function(){document.documentElement.classList.toggle("nav-open")},document.body.appendChild(t)}},{key:"render",value:function(){return s.a.createElement(Hs.a,{fluid:!0,className:"nav-color"},s.a.createElement(Hs.a.Header,null,s.a.createElement(Hs.a.Brand,null,s.a.createElement("div",{className:"logo-login"},s.a.createElement("div",{className:"logo-img-login"},s.a.createElement("img",{src:Js.a,alt:"logo_image"}),this.props.brandText))),s.a.createElement(Hs.a.Toggle,{onClick:this.mobileSidebarToggle})))}}]),t}(s.a.Component)),lo=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(b.a)(this,Object(P.a)(t).call(this,e))).handleInputChange=function(e){var t,n=e.currentTarget.name,r=e.currentTarget.value.trim();a.setState((t={},Object(y.a)(t,n,r),Object(y.a)(t,"errors",Object(p.a)({},a.state.errors,Object(y.a)({},n,""))),t))},a.handleSubmit=function(e){e.preventDefault(),a.validates(a.state)&&a.props.authenticateUser({email:a.state.email,password:a.state.password})},a.validates=function(e){var t={},n=!0;return void 0==e.email||""!==e.email&&null!==e.email||(n=!1,t.email="Email is required"),void 0==e.password||""!==e.password&&null!==e.password||(n=!1,t.password="Password is required"),a.setState({errors:t}),n},a.state={email:"",password:"",isLoggedIn:!1,errors:{email:"",password:""}},Vr()&&a.props.history.push("/admin/dashboard",{loadDashboard:!0}),a}return Object(O.a)(t,e),Object(I.a)(t,[{key:"componentWillReceiveProps",value:function(e){Vr()&&this.props.history.push("/admin/dashboard",{loadDashboard:!0})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(io,{brandText:"Xavor IoT Platform Portal"}),s.a.createElement("div",{className:"limiter"},s.a.createElement("div",{className:"container-login100"},s.a.createElement("div",{className:"wrap-login100"},s.a.createElement("div",{className:"login100-form-title"}),s.a.createElement("div",{className:"custom-content"},this.props.isLoading&&s.a.createElement(ua,{isLoading:!0}),s.a.createElement(oo.a,{horizontal:!0,onSubmit:this.handleSubmit},s.a.createElement($e.a,{controlId:"formHorizontalEmail"},s.a.createElement(D.a,{className:"emailLable"},"Email"),s.a.createElement(D.a,{className:"rowStyle"},s.a.createElement(tt.a,{type:"email",autoComplete:"username",placeholder:"Email",name:"email",onChange:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.email))),s.a.createElement($e.a,{controlId:"formHorizontalPassword"},s.a.createElement(D.a,{className:"emailLable"},"Password"),s.a.createElement(D.a,{className:"rowStyle"},s.a.createElement(tt.a,{type:"password",autoComplete:"current-password",placeholder:"Password",name:"password",onChange:this.handleInputChange}),s.a.createElement("span",{className:"error"},this.state.errors.password))),s.a.createElement($e.a,null,s.a.createElement(D.a,{className:"rowStyle"},s.a.createElement(F.a,{className:"buttonStyle",type:"submit",id:"submit"},"Sign in")))))))))}}]),t}(s.a.Component),co={authenticateUser:function(e){return function(){var t=Object(h.a)(f.a.mark(function t(a,n){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n(),Ga(a,"Not Assigned"),Ds(a,!0),Is.Authenticate().Authenticate(e).then(function(e){var t;t=e.headers.api_key,localStorage.setItem("API_Key",t);var n=e.data.userName;bs(a,e.data),Ps(a,n),Ds(a,!1),Ga(a,"Success")}).catch(function(e){Ds(a,!1),Ga(a,"Failed"),Os(a)});case 4:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}()}},mo=Object(ve.b)(function(e){return{userCredentials:e.User?e.User.UserInfo:void 0,isLoggedIn:!!e.User&&e.User.isLoggedIn,isLoading:!!e.User&&e.User.isLoading,loginAlertStatus:e.Alerts?e.Alerts.loginAlertStatus:"not assigned"}},co)(lo),uo=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return s.a.createElement(r.Fragment,null,Vr()?this.props.children:s.a.createElement(c.a,{to:"/login"}))}}]),t}(s.a.Component),po=a(254),Eo=a.n(po),fo=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(P.a)(t).apply(this,arguments))}return Object(O.a)(t,e),Object(I.a)(t,[{key:"render",value:function(){return console.log(Kr()),s.a.createElement(s.a.Fragment,null,s.a.createElement(Eo.a,{show:!!Kr(),title:"Login Session expired!",text:"Please try to login again",confirmButtonText:"Logout",onConfirm:function(){return qr()}}))}}]),t}(s.a.Component);i.a.render(s.a.createElement(l.a,null,s.a.createElement(ve.a,{store:zs},s.a.createElement(K.a,null),s.a.createElement(fo,null),s.a.createElement(c.d,null,s.a.createElement(c.b,{exact:!0,path:"/login",render:function(e){return s.a.createElement(mo,e)}})," ",s.a.createElement(c.b,{exact:!0,path:"/"},s.a.createElement(c.a,{to:"/login"}))," ",s.a.createElement(uo,null,s.a.createElement(c.b,{path:"/admin",render:function(e){return s.a.createElement(so,e)}}))))),document.getElementById("root"))},71:function(e,t,a){}},[[255,1,2]]]);
//# sourceMappingURL=main.986f5ebd.chunk.js.map